/* eslint-disable */
(function (global, factory) {
typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/common'), require('@angular/core'), require('@angular/forms'), require('@angular/platform-browser')) :
typeof define === 'function' && define.amd ? define(['exports', '@angular/common', '@angular/core', '@angular/forms', '@angular/platform-browser'], factory) :
(global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.mobiscroll = {}, global.angularCommon, global.angularCore, global.angularForms, global.angularPlatformBrowser));
}(this, (function (exports, common, core, forms, platformBrowser) { 'use strict';

var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b;}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];};return extendStatics(d,b)};function __extends(d,b){extendStatics(d,b);function __(){this.constructor=d;}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __);}var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p];}return t};return __assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]];}return t}function __decorate(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex);}}function __metadata(metadataKey,metadataValue){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(metadataKey,metadataValue)}var Observable=function(){function Observable(){this.nr=0;this.keys=1;this.subscribers={};}Observable.prototype.subscribe=function(handler){var key=this.keys++;this.subscribers[key]=handler;this.nr++;return key};Observable.prototype.unsubscribe=function(key){this.nr--;delete this.subscribers[key];};Observable.prototype.next=function(value){var subscribers=this.subscribers;for(var key in subscribers){if(subscribers.hasOwnProperty(key)){subscribers[key](value);}}};return Observable}();exports.ɵj = void 0;var vers;exports.ɵk = void 0;exports.ɵl = void 0;var version=[];var touchUi=false;var isBrowser=typeof window!=="undefined";var isDarkQuery=isBrowser&&window.matchMedia&&window.matchMedia("(prefers-color-scheme:dark)");var userAgent=isBrowser?navigator.userAgent:"";var platform=isBrowser?navigator.platform:"";var maxTouchPoints=isBrowser?navigator.maxTouchPoints:0;var device=userAgent&&userAgent.match(/Android|iPhone|iPad|iPod|Windows Phone|Windows|MSIE/i);var isSafari=userAgent&&/Safari/.test(userAgent);if(/Android/i.test(device)){exports.ɵj="android";vers=userAgent.match(/Android\s+([\d\.]+)/i);touchUi=true;if(vers){version=vers[0].replace("Android ","").split(".");}}else if(/iPhone|iPad|iPod/i.test(device)||/iPhone|iPad|iPod/i.test(platform)||platform==="MacIntel"&&maxTouchPoints>1){exports.ɵj="ios";vers=userAgent.match(/OS\s+([\d\_]+)/i);touchUi=true;if(vers){version=vers[0].replace(/_/g,".").replace("OS ","").split(".");}}else if(/Windows Phone/i.test(device)){exports.ɵj="wp";touchUi=true;}else if(/Windows|MSIE/i.test(device)){exports.ɵj="windows";}exports.ɵk=+version[0];exports.ɵl=+version[1];var options={};var util={};var themes={};var autoDetect={};var globalChanges=new Observable;function getAutoTheme(){var autoTheme="";var theme="";var firstTheme="";if(exports.ɵj==="android"){theme="material";}else if(exports.ɵj==="wp"||exports.ɵj==="windows"){theme="windows";}else {theme="ios";}for(var key in themes){if(themes[key].baseTheme===theme&&themes[key].auto!==false&&key!==theme+"-dark"){autoTheme=key;break}else if(key===theme){autoTheme=key;}else if(!firstTheme){firstTheme=key;}}return autoTheme||firstTheme}function setOptions(local){for(var k in local){if(local.hasOwnProperty(k)){options[k]=local[k];}}globalChanges.next(options);}function createCustomTheme(name,baseTheme,auto){var base=themes[baseTheme];themes[name]=__assign({},base,{auto:auto,baseTheme:baseTheme});autoDetect.theme=getAutoTheme();}var platform$1={majorVersion:exports.ɵk,minorVersion:exports.ɵl,name:exports.ɵj};var arrowBack='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M217.9 256L345 129c9.4-9.4 9.4-24.6 0-33.9-9.4-9.4-24.6-9.3-34 0L167 239c-9.1 9.1-9.3 23.7-.7 33.1L310.9 417c4.7 4.7 10.9 7 17 7s12.3-2.3 17-7c9.4-9.4 9.4-24.6 0-33.9L217.9 256z"/></svg>';var arrowDown='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 294.1L383 167c9.4-9.4 24.6-9.4 33.9 0s9.3 24.6 0 34L273 345c-9.1 9.1-23.7 9.3-33.1.7L95 201.1c-4.7-4.7-7-10.9-7-17s2.3-12.3 7-17c9.4-9.4 24.6-9.4 33.9 0l127.1 127z"/></svg>';var arrowForward='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M294.1 256L167 129c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.3 34 0L345 239c9.1 9.1 9.3 23.7.7 33.1L201.1 417c-4.7 4.7-10.9 7-17 7s-12.3-2.3-17-7c-9.4-9.4-9.4-24.6 0-33.9l127-127.1z"/></svg>';var arrowUp='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 217.9L383 345c9.4 9.4 24.6 9.4 33.9 0 9.4-9.4 9.3-24.6 0-34L273 167c-9.1-9.1-23.7-9.3-33.1-.7L95 310.9c-4.7 4.7-7 10.9-7 17s2.3 12.3 7 17c9.4 9.4 24.6 9.4 33.9 0l127.1-127z"/></svg>';var clearIcon='<svg xmlns="http://www.w3.org/2000/svg" height="17" viewBox="0 0 17 17" width="17"><path d="M8.5 0a8.5 8.5 0 110 17 8.5 8.5 0 010-17zm3.364 5.005a.7.7 0 00-.99 0l-2.44 2.44-2.439-2.44-.087-.074a.7.7 0 00-.903 1.064l2.44 2.439-2.44 2.44-.074.087a.7.7 0 001.064.903l2.439-2.441 2.44 2.441.087.074a.7.7 0 00.903-1.064l-2.441-2.44 2.441-2.439.074-.087a.7.7 0 00-.074-.903z" fill="currentColor" fill-rule="evenodd"/></svg>';var textFieldOpt={clearIcon:clearIcon,labelStyle:"inline"};themes.ios={Calendar:{nextIconH:arrowForward,nextIconV:arrowDown,prevIconH:arrowBack,prevIconV:arrowUp},Checkbox:{position:"end"},Datepicker:{clearIcon:clearIcon,display:"bottom"},Dropdown:textFieldOpt,Eventcalendar:{chevronIconDown:arrowDown,nextIconH:arrowForward,nextIconV:arrowDown,prevIconH:arrowBack,prevIconV:arrowUp},Input:textFieldOpt,Radio:{position:"end"},Scroller:{display:"bottom",itemHeight:34,minWheelWidth:55,rows:5,scroll3d:true},SegmentedGroup:{drag:true},Select:{clearIcon:clearIcon},Textarea:textFieldOpt};createCustomTheme("ios-dark","ios");var arrowDown$1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>';var arrowUp$1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 14l5-5 5 5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>';var chevronLeft='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M23.12 11.12L21 9l-9 9 9 9 2.12-2.12L16.24 18z"/></svg>';var chevronRight='<svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36"><path d="M15 9l-2.12 2.12L19.76 18l-6.88 6.88L15 27l9-9z"/></svg>';var clearIcon$1='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/></svg>';var keyboardDown='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/><path fill="none" d="M0 0h24v24H0V0z"/></svg>';var keyboardUp='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/><path d="M0 0h24v24H0z" fill="none"/></svg>';var textFieldOpt$1={clearIcon:clearIcon$1,dropdownIcon:arrowDown$1,inputStyle:"box",labelStyle:"floating",notch:true,ripple:true};themes.material={Button:{ripple:true},Calendar:{downIcon:arrowDown$1,nextIconH:chevronRight,nextIconV:keyboardDown,prevIconH:chevronLeft,prevIconV:keyboardUp,upIcon:arrowUp$1},Datepicker:{clearIcon:clearIcon$1,display:"center"},Dropdown:textFieldOpt$1,Eventcalendar:{chevronIconDown:keyboardDown,colorEventList:true,downIcon:arrowDown$1,nextIconH:chevronRight,nextIconV:keyboardDown,prevIconH:chevronLeft,prevIconV:keyboardUp,upIcon:arrowUp$1},Input:textFieldOpt$1,ListItem:{ripple:true},Scroller:{display:"center",rows:3},Select:{clearIcon:clearIcon$1,rows:3},Textarea:textFieldOpt$1};createCustomTheme("material-dark","material");autoDetect.theme=getAutoTheme();function intPart(floatNum){if(floatNum<-1e-7){return Math.ceil(floatNum-1e-7)}return Math.floor(floatNum+1e-7)}function hijriToGregorian(hY,hM,hD){var l;var j;var n;var i;var k;var gregDate=new Array(3);var jd=intPart((11*hY+3)/30)+354*hY+30*hM-intPart((hM-1)/2)+hD+1948440-385;if(jd>2299160){l=jd+68569;n=intPart(4*l/146097);l=l-intPart((146097*n+3)/4);i=intPart(4e3*(l+1)/1461001);l=l-intPart(1461*i/4)+31;j=intPart(80*l/2447);hD=l-intPart(2447*j/80);l=intPart(j/11);hM=j+2-12*l;hY=100*(n-49)+i+l;}else {j=jd+1402;k=intPart((j-1)/1461);l=j-1461*k;n=intPart((l-1)/365)-intPart(l/1461);i=l-365*n+30;j=intPart(80*i/2447);hD=i-intPart(2447*j/80);i=intPart(j/11);hM=j+2-12*i;hY=4*k+n+i-4716;}gregDate[2]=hD;gregDate[1]=hM;gregDate[0]=hY;return gregDate}function gregorianToHijri(gY,gM,gD){var jd;var l;var j;var n;var hijriDate=new Array(0,0,0);if(gY>1582||gY===1582&&gM>10||gY===1582&&gM===10&&gD>14){jd=intPart(1461*(gY+4800+intPart((gM-14)/12))/4)+intPart(367*(gM-2-12*intPart((gM-14)/12))/12)-intPart(3*intPart((gY+4900+intPart((gM-14)/12))/100)/4)+gD-32075;}else {jd=367*gY-intPart(7*(gY+5001+intPart((gM-9)/7))/4)+intPart(275*gM/9)+gD+1729777;}l=jd-1948440+10632;n=intPart((l-1)/10631);l=l-10631*n+354;j=intPart((10985-l)/5316)*intPart(50*l/17719)+intPart(l/5670)*intPart(43*l/15238);l=l-intPart((30-j)/15)*intPart(17719*j/50)-intPart(j/16)*intPart(15238*j/43)+29;gM=intPart(24*l/709);gD=l-intPart(709*gM/24);gY=30*n+j-30;hijriDate[2]=gD;hijriDate[1]=gM;hijriDate[0]=gY;return hijriDate}var hijriCalendar={getYear:function(date){return gregorianToHijri(date.getFullYear(),date.getMonth()+1,date.getDate())[0]},getMonth:function(date){return --gregorianToHijri(date.getFullYear(),date.getMonth()+1,date.getDate())[1]},getDay:function(date){return gregorianToHijri(date.getFullYear(),date.getMonth()+1,date.getDate())[2]},getDate:function(y,m,d,h,i,s,u){if(m<0){y+=Math.floor(m/12);m=m%12?12+m%12:0;}if(m>11){y+=Math.floor(m/12);m=m%12;}var gregorianDate=hijriToGregorian(y,+m+1,d);return new Date(gregorianDate[0],gregorianDate[1]-1,gregorianDate[2],h||0,i||0,s||0,u||0)},getMaxDayOfMonth:function(hY,hM){if(hM<0){hY+=Math.floor(hM/12);hM=hM%12?12+hM%12:0;}if(hM>11){hY+=Math.floor(hM/12);hM=hM%12;}var daysPerMonth=[30,29,30,29,30,29,30,29,30,29,30,29];var leapYear=(hY*11+14)%30<11;return daysPerMonth[hM]+(hM===11&&leapYear?1:0)}};var UNDEFINED=undefined;getArray(3);getArray(4);var ARRAY7=getArray(7);var ARRAY24=getArray(24);function constrain(val,min,max){return Math.max(min,Math.min(val,max))}function isArray(obj){return Array.isArray(obj)}function isNumeric(a){return a-parseFloat(a)>=0}function isNumber(a){return typeof a==="number"}function isString(s){return typeof s==="string"}function isEmpty(v){return v===UNDEFINED||v===null||v===""}function isUndefined(v){return typeof v==="undefined"}function isObject(v){return typeof v==="object"}function emptyOrTrue(value){return value!==null&&value!==UNDEFINED&&""+value!=="false"}function getArray(nr){return Array.apply(0,Array(Math.max(0,nr)))}function addPixel(value){return value!==UNDEFINED?value+(isNumeric(value)?"px":""):""}function noop(){return}function pad(num,size){if(size===void 0){size=2;}var str=num+"";while(str.length<size){str="0"+num;}return str}function round(nr){return Math.round(nr)}function step(value,st){return floor(value/st)*st}function floor(nr){return Math.floor(nr)}function throttle(fn,threshhold){if(threshhold===void 0){threshhold=100;}var last;var timer;return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}var now=+new Date;if(last&&now<last+threshhold){clearTimeout(timer);timer=setTimeout((function(){last=now;fn.apply(void 0,args);}),threshhold);}else {last=now;fn.apply(void 0,args);}}}function debounce(fn,threshhold){if(threshhold===void 0){threshhold=100;}var timer;return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i];}clearTimeout(timer);timer=setTimeout((function(){fn.apply(void 0,args);}),threshhold);}}function find(arr,fn){return findItemOrIndex(arr,fn)}function findIndex(arr,fn){return findItemOrIndex(arr,fn,true)}function findItemOrIndex(arr,fn,index){var len=arr.length;for(var i=0;i<len;i++){var item=arr[i];if(fn(item,i)){return index?i:item}}return index?-1:UNDEFINED}var gDaysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31];var jDaysInMonth=[31,31,31,31,31,31,30,30,30,30,30,29];function jalaliToGregorian(jY,jM,jD){var i;var jy=jY-979;var jm=jM-1;var jd=jD-1;var jDayNo=365*jy+floor(jy/33)*8+floor((jy%33+3)/4);for(i=0;i<jm;++i){jDayNo+=jDaysInMonth[i];}jDayNo+=jd;var gDayNo=jDayNo+79;var gy=1600+400*floor(gDayNo/146097);gDayNo=gDayNo%146097;var leap=true;if(gDayNo>=36525){gDayNo--;gy+=100*floor(gDayNo/36524);gDayNo=gDayNo%36524;if(gDayNo>=365){gDayNo++;}else {leap=false;}}gy+=4*floor(gDayNo/1461);gDayNo%=1461;if(gDayNo>=366){leap=false;gDayNo--;gy+=floor(gDayNo/365);gDayNo=gDayNo%365;}for(i=0;gDayNo>=gDaysInMonth[i]+(i===1&&leap?1:0);i++){gDayNo-=gDaysInMonth[i]+(i===1&&leap?1:0);}var gm=i+1;var gd=gDayNo+1;return [gy,gm,gd]}function checkDate(jY,jM,jD){return !(jY<0||jY>32767||jM<1||jM>12||jD<1||jD>jDaysInMonth[jM-1]+(jM===12&&(jY-979)%33%4===0?1:0))}function gregorianToJalali(gY,gM,gD){var i;var gy=gY-1600;var gm=gM-1;var gd=gD-1;var gDayNo=365*gy+floor((gy+3)/4)-floor((gy+99)/100)+floor((gy+399)/400);for(i=0;i<gm;++i){gDayNo+=gDaysInMonth[i];}if(gm>1&&(gy%4===0&&gy%100!==0||gy%400===0)){++gDayNo;}gDayNo+=gd;var jDayNo=gDayNo-79;var jNp=floor(jDayNo/12053);jDayNo%=12053;var jy=979+33*jNp+4*floor(jDayNo/1461);jDayNo%=1461;if(jDayNo>=366){jy+=floor((jDayNo-1)/365);jDayNo=(jDayNo-1)%365;}for(i=0;i<11&&jDayNo>=jDaysInMonth[i];++i){jDayNo-=jDaysInMonth[i];}var jm=i+1;var jd=jDayNo+1;return [jy,jm,jd]}var jalaliCalendar={getYear:function(date){return gregorianToJalali(date.getFullYear(),date.getMonth()+1,date.getDate())[0]},getMonth:function(date){return --gregorianToJalali(date.getFullYear(),date.getMonth()+1,date.getDate())[1]},getDay:function(date){return gregorianToJalali(date.getFullYear(),date.getMonth()+1,date.getDate())[2]},getDate:function(y,m,d,h,i,s,u){if(m<0){y+=floor(m/12);m=m%12?12+m%12:0;}if(m>11){y+=floor(m/12);m=m%12;}var gregorianDate=jalaliToGregorian(y,+m+1,d);return new Date(gregorianDate[0],gregorianDate[1]-1,gregorianDate[2],h||0,i||0,s||0,u||0)},getMaxDayOfMonth:function(y,m){var maxdays=31;if(m<0){y+=floor(m/12);m=m%12?12+m%12:0;}if(m>11){y+=floor(m/12);m=m%12;}while(checkDate(y,m+1,maxdays)===false){maxdays--;}return maxdays}};var localeEn={};var locale={en:localeEn};var MBSC_OPTIONS=new core.InjectionToken("MbscOptions");var MbscOptionsService=function(){function MbscOptionsService(_staticOptions,_parentService){this._staticOptions=_staticOptions;this._parentService=_parentService;this.change=new Observable;this._options={};}Object.defineProperty(MbscOptionsService.prototype,"options",{get:function(){return this._options},enumerable:true,configurable:true});MbscOptionsService.prototype.setOptions=function(newOptions){this._options=this._parentService?__assign({},this._staticOptions,this._parentService.options,newOptions):__assign({},this._staticOptions,newOptions);this.change.next(this.options);};MbscOptionsService=__decorate([core.Injectable(),__param(0,core.Optional()),__param(0,core.Inject(MBSC_OPTIONS)),__param(1,core.Optional()),__param(1,core.SkipSelf()),__metadata("design:paramtypes",[Object,MbscOptionsService])],MbscOptionsService);return MbscOptionsService}();var Base=function(){function Base(_cdr,_elr,_zone,_sanitizer,_injector,_vcf,_ctrl,_optp,_globals){var _this=this;this._cdr=_cdr;this._elr=_elr;this._zone=_zone;this._sanitizer=_sanitizer;this._injector=_injector;this._vcf=_vcf;this._ctrl=_ctrl;this._optp=_optp;this.state={};this.props={};this.onDestroy=new core.EventEmitter;this.onInit=new core.EventEmitter;this._onFormChange=noop;this._onFormTouch=noop;if(_optp){this._opt=_optp.options;this._ctxChange=_optp.change.subscribe((function(nextOptions){_this._opt=nextOptions;_this.forceUpdate();}));}else if(_globals){this._opt=_globals;}if(_ctrl){_ctrl.valueAccessor=this;}this._ctor();}Base.prototype.ngOnChanges=function(changes){if(changes.options){var opt=changes.options.currentValue;if(opt){for(var _i=0,_a=Object.keys(opt);_i<_a.length;_i++){var key=_a[_i];this.props[key]=opt[key];}}}for(var _b=0,_c=Object.keys(changes);_b<_c.length;_b++){var key=_c[_b];this.props[key]=changes[key].currentValue;}this._doCheck=true;};Base.prototype.ngDoCheck=function(){if(this._doCheck){this._willUpdate();}};Base.prototype.ngAfterViewChecked=function(){if(this._doCheck){this._updated();}this._doCheck=false;};Base.prototype.ngOnInit=function(){this._doCheck=true;this.__init();this._init();};Base.prototype.ngAfterViewInit=function(){this._el=this._el||this._elr.nativeElement;this._mounted();};Base.prototype.ngOnDestroy=function(){if(this._optp){this._optp.change.unsubscribe(this._ctxChange);}this._destroy();this.__destroy();};Base.prototype._getKey=function(index){return index};Base.prototype.forceUpdate=function(){var _this=this;if(core.NgZone.isInAngularZone()){this._doCheck=true;this._cdr.markForCheck();}else {this._zone.run((function(){_this._doCheck=true;_this._cdr.markForCheck();}));}};Base.prototype.setState=function(newState){var changed;for(var _i=0,_a=Object.keys(newState);_i<_a.length;_i++){var key=_a[_i];if(this.state[key]!==newState[key]){this.state[key]=newState[key];changed=true;}}if(changed){this.forceUpdate();}};Base.prototype._emit=function(name,args){var emitter=this[name];if(emitter&&emitter instanceof core.EventEmitter){emitter.emit(args);}};Base.prototype._safeHtml=function(html){return this._sanitizer.bypassSecurityTrustHtml(html)};Base.prototype._ctor=function(){};Base.prototype._init=function(){};Base.prototype.__init=function(){};Base.prototype._mounted=function(){};Base.prototype._updated=function(){};Base.prototype._destroy=function(){};Base.prototype.__destroy=function(){};Base.prototype._willUpdate=function(){};__decorate([core.Input(),__metadata("design:type",Object)],Base.prototype,"class",void 0);__decorate([core.Input(),__metadata("design:type",Object)],Base.prototype,"context",void 0);__decorate([core.Input(),__metadata("design:type",Object)],Base.prototype,"locale",void 0);__decorate([core.Input(),__metadata("design:type",Array)],Base.prototype,"modules",void 0);__decorate([core.Input(),__metadata("design:type",Object)],Base.prototype,"options",void 0);__decorate([core.Input(),__metadata("design:type",Object)],Base.prototype,"responsive",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],Base.prototype,"rtl",void 0);__decorate([core.Input(),__metadata("design:type",String)],Base.prototype,"theme",void 0);__decorate([core.Input(),__metadata("design:type",String)],Base.prototype,"themeVariant",void 0);__decorate([core.Input(),__metadata("design:type",Object)],Base.prototype,"touchUi",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],Base.prototype,"onDestroy",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],Base.prototype,"onInit",void 0);Base=__decorate([core.Directive({selector:"[mbsc-b]"}),__param(6,core.Optional()),__param(6,core.Self()),__param(7,core.Optional()),__param(8,core.Optional()),__param(8,core.Inject(MBSC_OPTIONS)),__metadata("design:paramtypes",[core.ChangeDetectorRef,core.ElementRef,core.NgZone,platformBrowser.DomSanitizer,core.Injector,core.ViewContainerRef,forms.NgControl,MbscOptionsService,Object])],Base);return Base}();var doc=isBrowser?document:UNDEFINED;var win=isBrowser?window:UNDEFINED;var prefixes=["Webkit","Moz"];var elem=doc&&doc.createElement("div").style;var canvas=doc&&doc.createElement("canvas");var ctx=canvas&&canvas.getContext("2d");var css=win&&win.CSS;var cssSupports=css&&css.supports;var textColors={};var raf=win&&win.requestAnimationFrame||function(func){return setTimeout(func,20)};var rafc=win&&win.cancelAnimationFrame||function(id){clearTimeout(id);};var hasAnimation=elem&&elem.animationName!==UNDEFINED;var isWebView=exports.ɵj==="ios"&&!isSafari;var isWkWebView=isWebView&&win&&win.webkit&&win.webkit.messageHandlers;var hasGhostClick=elem&&elem.touchAction===UNDEFINED||isWebView&&!isWkWebView;var jsPrefix=getPrefix();var cssPrefix=jsPrefix?"-"+jsPrefix.toLowerCase()+"-":"";var has3d=cssSupports&&cssSupports("(transform-style: preserve-3d)");var hasSticky=cssSupports&&(cssSupports("position","sticky")||cssSupports("position","-webkit-sticky"));function getPrefix(){if(!elem||elem.transform!==UNDEFINED){return ""}for(var _i=0,prefixes_1=prefixes;_i<prefixes_1.length;_i++){var prefix=prefixes_1[_i];if(elem[prefix+"Transform"]!==UNDEFINED){return prefix}}return ""}function listen(el,event,handler,opt){if(el){el.addEventListener(event,handler,opt);}}function unlisten(el,event,handler,opt){if(el){el.removeEventListener(event,handler,opt);}}function getDocument(el){if(!isBrowser){return UNDEFINED}return el&&el.ownerDocument?el.ownerDocument:doc}function getDimension(el,property){return parseFloat(getComputedStyle(el)[property]||"0")}function getScrollLeft(el){return el.scrollLeft!==UNDEFINED?el.scrollLeft:el.pageXOffset}function getScrollTop(el){return el.scrollTop!==UNDEFINED?el.scrollTop:el.pageYOffset}function setScrollLeft(el,val){if(el.scrollTo){el.scrollTo(val,el.scrollY);}else {el.scrollLeft=val;}}function setScrollTop(el,val){if(el.scrollTo){el.scrollTo(el.scrollX,val);}else {el.scrollTop=val;}}function getWindow(el){if(!isBrowser){return UNDEFINED}return el&&el.ownerDocument&&el.ownerDocument.defaultView?el.ownerDocument.defaultView:win}function getPosition(el,vertical){var style=getComputedStyle(el);var transform=jsPrefix?style[jsPrefix+"Transform"]:style.transform;var matrix=transform.split(")")[0].split(", ");var px=vertical?matrix[13]||matrix[5]:matrix[12]||matrix[4];return +px||0}function getTextColor(color){if(textColors[color]){return textColors[color]}if(!ctx){return "#fff"}ctx.fillStyle=color;ctx.fillRect(0,0,1,1);var rgb=ctx.getImageData(0,0,1,1).data;var delta=+rgb[0]*.299+ +rgb[1]*.587+ +rgb[2]*.114;var textColor=delta<130?"#fff":"#000";textColors[color]=textColor;return textColor}function scrollStep(elm,startTime,from,to,horizontal,callback){var elapsed=Math.min(1,(+new Date-startTime)/468);var eased=.5*(1-Math.cos(Math.PI*elapsed));var current=round(from+(to-from)*eased);if(horizontal){elm.scrollLeft=current;}else {elm.scrollTop=current;}if(current!==to){raf((function(){scrollStep(elm,startTime,from,to,horizontal,callback);}));}else if(callback){callback();}}function smoothScroll(elm,to,animate,horizontal,rtl,callback){to=Math.max(0,round(to));if(rtl&&horizontal){to=-to;}if(animate){scrollStep(elm,+new Date,horizontal?elm.scrollLeft:elm.scrollTop,to,horizontal,callback);}else {if(horizontal){elm.scrollLeft=to;}else {elm.scrollTop=to;}if(callback){callback();}}}function htmlToText(htmlString){if(doc&&htmlString){var tempElm=doc.createElement("div");tempElm.innerHTML=htmlString;return tempElm.textContent.trim()}return htmlString||""}function getOffset(el){var bRect=el.getBoundingClientRect();var ret={left:bRect.left,top:bRect.top};var window=getWindow(el);if(window!==UNDEFINED){ret.top+=getScrollTop(window);ret.left+=getScrollLeft(window);}return ret}function matches(elm,selector){var matchesSelector=elm&&(elm.matches||elm.msMatchesSelector);return matchesSelector&&matchesSelector.call(elm,selector)}function closest(elm,selector,context){while(elm&&!matches(elm,selector)){if(elm===context||elm.nodeType===elm.DOCUMENT_NODE){return null}elm=elm.parentNode;}return elm}function trigger(elm,name,data){var evt;try{evt=new CustomEvent(name,{bubbles:true,cancelable:true,detail:data});}catch(e){evt=document.createEvent("Event");evt.initEvent(name,true,true);evt.detail=data;}elm.dispatchEvent(evt);}function forEach(items,func){for(var i=0;i<items.length;i++){func(items[i],i);}}var guid=0;var BREAKPOINTS={large:992,medium:768,small:576,xlarge:1200,xsmall:0};var isDark;if(isDarkQuery){isDark=isDarkQuery.matches;isDarkQuery.addListener((function(ev){isDark=ev.matches;globalChanges.next();}));}var BaseComponent=function(_super){__extends(BaseComponent,_super);function BaseComponent(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.s={};_this.state={};_this._mbsc=true;_this._v={version:"5.13.5"};_this._uid=++guid;return _this}Object.defineProperty(BaseComponent.prototype,"nativeElement",{get:function(){return this._el},enumerable:true,configurable:true});BaseComponent.prototype.destroy=function(){};BaseComponent.prototype._hook=function(name,args){var s=this.s;args.inst=this;args.type=name;this._emit(name,args);if(s[name]){return s[name](args,this)}};BaseComponent.prototype.__init=function(){var _this=this;var self=this.constructor;if(self.defaults){this._optChange=globalChanges.subscribe((function(){_this.forceUpdate();}));var modules=this.props.modules;if(modules){for(var _i=0,modules_1=modules;_i<modules_1.length;_i++){var module_1=modules_1[_i];if(module_1.init){module_1.init(this);}}}}this._hook("onInit",{});};BaseComponent.prototype.__destroy=function(){if(this._optChange!==UNDEFINED){globalChanges.unsubscribe(this._optChange);}this._hook("onDestroy",{});};BaseComponent.prototype._render=function(s,state){return};BaseComponent.prototype._willUpdate=function(){this._merge();this._render(this.s,this.state);};BaseComponent.prototype._resp=function(s){var resp=s.responsive;var ret;var br=-1;var width=this.state.width;if(width===UNDEFINED){width=win?win.innerWidth:375;}if(resp&&width){for(var key in resp){if(resp.hasOwnProperty(key)){var value=resp[key];var breakpoint=value.breakpoint||BREAKPOINTS[key];if(width>=breakpoint&&breakpoint>br){ret=value;br=breakpoint;}}}}return ret};BaseComponent.prototype._merge=function(){var self=this.constructor;var defaults=self.defaults;var context=this._opt||{};var props={};var baseTheme;var s;var themeDef;this._prevS=this.s||{};if(defaults){for(var prop in this.props){if(this.props[prop]!==UNDEFINED){props[prop]=this.props[prop];}}var locale=props.locale||context.locale||options.locale||{};var calendarSystem=props.calendarSystem||locale.calendarSystem||context.calendarSystem||options.calendarSystem;var themeName=props.theme||context.theme||options.theme;var themeVariant=props.themeVariant||context.themeVariant||options.themeVariant;if(themeName==="auto"||!themeName){themeName=autoDetect.theme;}if((themeVariant==="dark"||isDark&&(themeVariant==="auto"||!themeVariant))&&themes[themeName+"-dark"]){themeName+="-dark";}props.theme=themeName;themeDef=themes[themeName];var theme=themeDef&&themes[themeName][self._name];s=__assign({},defaults,theme,locale,options,context,calendarSystem,props);var resp=this._resp(s);this._respProps=resp;if(resp){s=__assign({},s,resp);}}else {s=__assign({},this.props);themeDef=themes[s.theme];}baseTheme=themeDef&&themeDef.baseTheme;s.baseTheme=baseTheme;this.s=s;this._className=s.cssClass||s.class||s.className||"";this._rtl=" mbsc-"+(s.rtl?"rtl":"ltr");this._theme=" mbsc-"+s.theme+(baseTheme?" mbsc-"+baseTheme:"");this._touchUi=s.touchUi==="auto"||s.touchUi===UNDEFINED?touchUi:s.touchUi;this._hb=exports.ɵj==="ios"&&(s.theme==="ios"||baseTheme==="ios")?" mbsc-hb":"";};BaseComponent.defaults=UNDEFINED;BaseComponent._name="";BaseComponent=__decorate([core.Directive({selector:"[mbsc-bc]"})],BaseComponent);return BaseComponent}(Base);var ONE_MIN=6e4;var ONE_HOUR=60*ONE_MIN;var ONE_DAY=24*ONE_HOUR;function isMBSCDate(d){return !!d._mbsc}function convertTimezone(d,s){var timezone=s.dataTimezone||s.displayTimezone;var timezonePlugin=s.timezonePlugin;if(timezone&&timezonePlugin&&isMBSCDate(d)){var clone=d.clone();clone.setTimezone(timezone);return clone.toISOString()}return d}var dateTimeLocale={amText:"am",dateFormat:"MM/DD/YYYY",dateFormatLong:"D DDD MMM YYYY",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesMin:["S","M","T","W","T","F","S"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daySuffix:"",firstDay:0,getDate:adjustedDate,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthSuffix:"",pmText:"pm",separator:" ",shortYearCutoff:"+10",timeFormat:"h:mm A",todayText:"Today",yearSuffix:"",getMonth:function(d){return d.getMonth()},getDay:function(d){return d.getDate()},getYear:function(d){return d.getFullYear()},getMaxDayOfMonth:function(y,m){return 32-new Date(y,m,32,12).getDate()},getWeekNumber:function(dt){var d=new Date(+dt);d.setHours(0,0,0);d.setDate(d.getDate()+4-(d.getDay()||7));var yearStart=new Date(d.getFullYear(),0,1);return Math.ceil(((d-yearStart)/864e5+1)/7)}};var ISO_8601_FULL=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?((Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;var ISO_8601_TIME=/^((\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;function setISOParts(parsed,offset,parts){var part;var v;var p={y:1,m:2,d:3,h:4,i:5,s:6,u:7,tz:8};if(parts){for(part in p){if(p.hasOwnProperty(part)){v=parsed[p[part]-offset];if(v){parts[part]=part==="tz"?v:1;}}}}}function getISOString(d,parts){var ret="";var time="";if(d){if(parts.h){time+=pad(d.getHours())+":"+pad(d.getMinutes());if(parts.s){time+=":"+pad(d.getSeconds());}if(parts.u){time+="."+pad(d.getMilliseconds(),3);}if(parts.tz){time+=parts.tz;}}if(parts.y){ret+=d.getFullYear();if(parts.m){ret+="-"+pad(d.getMonth()+1);if(parts.d){ret+="-"+pad(d.getDate());}if(parts.h){ret+="T"+time;}}}else if(parts.h){ret=time;}}return ret}function getDayMilliseconds(d){var dd=new Date(1970,0,1,d.getHours(),d.getMinutes(),d.getSeconds(),d.getMilliseconds());return +dd-+new Date(1970,0,1)}function checkDateRangeOverlap(start1,end1,start2,end2,adjust){var aStart=+start1;var bStart=+start2;var aEnd=adjust&&aStart===+end1?+end1+1:+end1;var bEnd=adjust&&bStart===+end2?+end2+1:+end2;return aStart<bEnd&&aEnd>bStart}function getEndDate(s,allDay,start,end){var exclusive=allDay?s.exclusiveEndDates:true;var tzOpt=allDay?UNDEFINED:s;return exclusive&&start&&end&&start<end?createDate(tzOpt,+end-1):end}function getDateStr(d){return d.getFullYear()+"-"+pad(d.getMonth()+1)+"-"+pad(d.getDate())}function getDateOnly(d){if(isMBSCDate(d)){return d.createDate(d.getFullYear(),d.getMonth(),d.getDate())}else {return adjustedDate(d.getFullYear(),d.getMonth(),d.getDate())}}function getUTCDateOnly(d){return Date.UTC(d.getFullYear(),d.getMonth(),d.getDate())}function getDayDiff(d1,d2){return round((getUTCDateOnly(d2)-getUTCDateOnly(d1))/ONE_DAY)}function getFirstDayOfWeek(d,s,w){var y=d.getFullYear();var m=d.getMonth();var weekDay=d.getDay();var firstWeekDay=w===UNDEFINED?s.firstDay:w;var offset=firstWeekDay-weekDay>0?7:0;return new Date(y,m,firstWeekDay-offset-weekDay+d.getDate())}function isSameDay(d1,d2){return d1.getFullYear()===d2.getFullYear()&&d1.getMonth()===d2.getMonth()&&d1.getDate()===d2.getDate()}function isSameMonth(d1,d2,s){return s.getYear(d1)===s.getYear(d2)&&s.getMonth(d1)===s.getMonth(d2)}function adjustedDate(y,m,d,h,i,s,u){var date=new Date(y,m,d,h||0,i||0,s||0,u||0);if(date.getHours()===23&&(h||0)===0){date.setHours(date.getHours()+2);}return date}function isDate(d){return d.getTime}function createDate(s,yearOrStamp,month,date,h,min,sec,ms){if(yearOrStamp===null){return null}if(yearOrStamp&&(isNumber(yearOrStamp)||isString(yearOrStamp))&&isUndefined(month)){return makeDate(yearOrStamp,s)}if(s&&s.timezonePlugin){return s.timezonePlugin.createDate(s,yearOrStamp,month,date,h,min,sec,ms)}if(isObject(yearOrStamp)){return new Date(yearOrStamp)}if(isUndefined(yearOrStamp)){return new Date}return new Date(yearOrStamp,month||0,date||1,h||0,min||0,sec||0,ms||0)}function makeDate(d,s,format,parts){var parse;if(!d){return null}var plugin=s&&s.timezonePlugin;if(plugin){var parsedDate=isMBSCDate(d)?d:plugin.parse(d,s);parsedDate.setTimezone(s.displayTimezone);return parsedDate}if(isDate(d)){return d}if(d._isAMomentObject){return d.toDate()}if(isNumber(d)){return new Date(d)}if(isString(d)){d=d.trim();}parse=ISO_8601_TIME.exec(d);if(parse){setISOParts(parse,2,parts);return new Date(1970,0,1,parse[2]?+parse[2]:0,parse[3]?+parse[3]:0,parse[4]?+parse[4]:0,parse[5]?+parse[5]:0)}parse=ISO_8601_FULL.exec(d);if(parse){setISOParts(parse,0,parts);return new Date(parse[1]?+parse[1]:1970,parse[2]?parse[2]-1:0,parse[3]?+parse[3]:1,parse[4]?+parse[4]:0,parse[5]?+parse[5]:0,parse[6]?+parse[6]:0,parse[7]?+parse[7]:0)}return parseDate(format,d,s)}function returnDate(d,s,displayFormat,isoParts){var moment=isBrowser&&window.moment||s.moment;var format=s.returnFormat;if(d){if(format==="moment"&&moment){return moment(d)}if(format==="locale"){return formatDate(displayFormat,d,s)}if(format==="iso8601"){return getISOString(d,isoParts)}}return d}function formatDate(format,date,options$1){var i;var year;var output="";var literal=false;var c;var s=__assign({},dateTimeLocale,options.locale,options$1);var peekAhead=function(symbol){var nr=0;var j=i;while(j+1<format.length&&format.charAt(j+1)===symbol){nr++;j++;}return nr};var lookAhead=function(symbol){var nr=peekAhead(symbol);i+=nr;return nr};var formatNumber=function(symbol,val,len){var ret=""+val;if(lookAhead(symbol)){while(ret.length<len){ret="0"+ret;}}return ret};var formatName=function(symbol,val,short,long){return lookAhead(symbol)===3?long[val]:short[val]};for(i=0;i<format.length;i++){if(literal){if(format.charAt(i)==="'"&&!lookAhead("'")){literal=false;}else {output+=format.charAt(i);}}else {switch(format.charAt(i)){case"D":c=peekAhead("D");if(c>1){output+=formatName("D",date.getDay(),s.dayNamesShort,s.dayNames);}else {output+=formatNumber("D",s.getDay(date),2);}break;case"M":c=peekAhead("M");if(c>1){output+=formatName("M",s.getMonth(date),s.monthNamesShort,s.monthNames);}else {output+=formatNumber("M",s.getMonth(date)+1,2);}break;case"Y":year=s.getYear(date);output+=lookAhead("Y")===3?year:(year%100<10?"0":"")+year%100;break;case"h":var h=date.getHours();output+=formatNumber("h",h>12?h-12:h===0?12:h,2);break;case"H":output+=formatNumber("H",date.getHours(),2);break;case"m":output+=formatNumber("m",date.getMinutes(),2);break;case"s":output+=formatNumber("s",date.getSeconds(),2);break;case"a":output+=date.getHours()>11?s.pmText:s.amText;break;case"A":output+=date.getHours()>11?s.pmText.toUpperCase():s.amText.toUpperCase();break;case"'":if(lookAhead("'")){output+="'";}else {literal=true;}break;default:output+=format.charAt(i);}}}return output}function parseDate(format,value,options){var s=__assign({},dateTimeLocale,options);var def=makeDate(s.defaultValue||new Date);if(!value){return def}if(!format){format=s.dateFormat+s.separator+s.timeFormat;}var shortYearCutoff=s.shortYearCutoff;var year=s.getYear(def);var month=s.getMonth(def)+1;var day=s.getDay(def);var hours=def.getHours();var minutes=def.getMinutes();var seconds=0;var ampm=-1;var literal=false;var iValue=0;var iFormat;var peekAhead=function(symbol){var nr=0;var j=iFormat;while(j+1<format.length&&format.charAt(j+1)===symbol){nr++;j++;}return nr};var lookAhead=function(match){var matches=peekAhead(match);iFormat+=matches;return matches};var getNumber=function(match){var count=lookAhead(match);var size=count>=2?4:2;var digits=new RegExp("^\\d{1,"+size+"}");var num=value.substr(iValue).match(digits);if(!num){return 0}iValue+=num[0].length;return parseInt(num[0],10)};var getName=function(match,shortNames,longNames){var count=lookAhead(match);var names=count===3?longNames:shortNames;for(var i=0;i<names.length;i++){if(value.substr(iValue,names[i].length).toLowerCase()===names[i].toLowerCase()){iValue+=names[i].length;return i+1}}return 0};var checkLiteral=function(){iValue++;};for(iFormat=0;iFormat<format.length;iFormat++){if(literal){if(format.charAt(iFormat)==="'"&&!lookAhead("'")){literal=false;}else {checkLiteral();}}else {switch(format.charAt(iFormat)){case"Y":year=getNumber("Y");break;case"M":{var p=peekAhead("M");if(p<2){month=getNumber("M");}else {month=getName("M",s.monthNamesShort,s.monthNames);}break}case"D":{var p=peekAhead("D");if(p<2){day=getNumber("D");}else {getName("D",s.dayNamesShort,s.dayNames);}break}case"H":hours=getNumber("H");break;case"h":hours=getNumber("h");break;case"m":minutes=getNumber("m");break;case"s":seconds=getNumber("s");break;case"a":ampm=getName("a",[s.amText,s.pmText],[s.amText,s.pmText])-1;break;case"A":ampm=getName("A",[s.amText,s.pmText],[s.amText,s.pmText])-1;break;case"'":if(lookAhead("'")){checkLiteral();}else {literal=true;}break;default:checkLiteral();}}}if(year<100){var cutoffYear=void 0;if(!isString(shortYearCutoff)){cutoffYear=+shortYearCutoff;}else {cutoffYear=(new Date).getFullYear()%100+parseInt(shortYearCutoff,10);}var addedCentury=void 0;if(year<=cutoffYear){addedCentury=0;}else {addedCentury=-100;}year+=(new Date).getFullYear()-(new Date).getFullYear()%100+addedCentury;}hours=ampm===-1?hours:ampm&&hours<12?hours+12:!ampm&&hours===12?0:hours;var date=s.getDate(year,month-1,day,hours,minutes,seconds);if(s.getYear(date)!==year||s.getMonth(date)+1!==month||s.getDay(date)!==day){return def}return date}function dateValueEquals(v1,v2,s){if(v1===v2){return true}if(isArray(v1)&&!v1.length&&v2===null||isArray(v2)&&!v2.length&&v1===null){return true}if(v1===null||v2===null||v1===UNDEFINED||v2===UNDEFINED){return false}if(isString(v1)&&isString(v2)){return v1===v2}var dateFormat=s&&s.dateFormat;if(isArray(v1)||isArray(v2)){if(v1.length!==v2.length){return false}for(var i=0;i<v1.length;i++){var eq=true;var a=v1[i];var b=v2[i];if(isString(a)&&isString(b)){eq=a===b;}else {eq=+makeDate(a,s,dateFormat)===+makeDate(b,s,dateFormat);}if(!eq){return false}}return true}return +makeDate(v1,s,dateFormat)===+makeDate(v2,s,dateFormat)}function addDays(date,days){var copy=isMBSCDate(date)?date.clone():new Date(date);copy.setDate(copy.getDate()+days);return copy}function roundTime(date,step){var ms=ONE_MIN*step;var copy=(isMBSCDate(date)?date.clone():new Date(date)).setHours(0,0,0,0);var rounded=copy+Math.round((+date-+copy)/ms)*ms;return isMBSCDate(date)?date.createDate(rounded):new Date(rounded)}function constrainDate(date,min,max){return min&&date<min?new Date(min):max&&date>max?new Date(max):date}if(isBrowser&&typeof Symbol==="undefined"){window.Symbol={toPrimitive:"toPrimitive"};}util.datetime={formatDate:formatDate,parseDate:parseDate};var ANIMATION_START="animationstart";var BLUR="blur";var CHANGE="change";var CLICK="click";var CONTEXTMENU="contextmenu";var DOUBLE_CLICK="dblclick";var FOCUS="focus";var FOCUS_IN="focusin";var INPUT="input";var KEY_DOWN="keydown";var MOUSE_DOWN="mousedown";var MOUSE_MOVE="mousemove";var MOUSE_UP="mouseup";var MOUSE_OVER="mousedown";var MOUSE_ENTER="mouseenter";var MOUSE_LEAVE="mouseleave";var MOUSE_WHEEL="mousewheel";var RESIZE="resize";var SCROLL="scroll";var TOUCH_START="touchstart";var TOUCH_MOVE="touchmove";var TOUCH_END="touchend";var TOUCH_CANCEL="touchcancel";var WHEEL="wheel";var BACKSPACE=8;var TAB=9;var ENTER=13;var ESC=27;var SPACE=32;var PAGE_UP=33;var PAGE_DOWN=34;var END=35;var HOME=36;var LEFT_ARROW=37;var UP_ARROW=38;var RIGHT_ARROW=39;var DOWN_ARROW=40;var DELETE=46;var WEEK_DAYS={SU:0,MO:1,TU:2,WE:3,TH:4,FR:5,SA:6};var RULE_KEY_MAP={byday:"weekDays",bymonth:"month",bymonthday:"day",dtstart:"from",freq:"repeat",wkst:"weekStart"};function addMultiDayEvent(obj,item,s,overwrite){var start=makeDate(item.start,item.allDay?UNDEFINED:s);var end=makeDate(item.end,item.allDay?UNDEFINED:s);var duration=end-start;if(overwrite){item.start=start;item.end=end;}start=getDateOnly(start);end=s.exclusiveEndDates?end:getDateOnly(addDays(end,1));while(start<end||!duration){addToList(obj,start,item);start=addDays(start,1);duration=1;}}function addToList(obj,d,data){var key=getDateStr(d);obj[key]=obj[key]||[];obj[key].push(data);}function getExceptionDateMap(dtStart,start,end,s,exception,exceptionRule){var map={};if(exception){var exceptionDates=getExceptionList(exception);for(var _i=0,exceptionDates_1=exceptionDates;_i<exceptionDates_1.length;_i++){var e=exceptionDates_1[_i];map[getDateStr(makeDate(e))]=true;}}if(exceptionRule){var exceptionDateList=getOccurrences(exceptionRule,dtStart,start,end,s);for(var _a=0,exceptionDateList_1=exceptionDateList;_a<exceptionDateList_1.length;_a++){var ex=exceptionDateList_1[_a];map[getDateStr(ex.d)]=true;}}return map}function parseRule(ruleStr){var rule={};var pairs=ruleStr.split(";");for(var _i=0,pairs_1=pairs;_i<pairs_1.length;_i++){var pair=pairs_1[_i];var values=pair.split("=");var key=values[0].trim().toLowerCase();var value=values[1].trim();rule[RULE_KEY_MAP[key]||key]=value;}return rule}function getNextOccurence(list,start,s,displayFormat){var getYear=s.getYear;var getMonth=s.getMonth;var getDay=s.getDay;var getDate=s.getDate;var getMaxDays=s.getMaxDayOfMonth;var index=0;var closest=null;var _loop_1=function(){var item=list[index];var isDateItself=isString(item)||item.getTime||item.toDate;if(isDateItself||item.date&&!item.recurring){var exactDate=makeDate(isDateItself?item:item.date,s,displayFormat);if(exactDate>start&&(closest===null||exactDate<closest)){closest=exactDate;}}else {if(item.recurring){var rule=item.recurring;if(isString(rule)){rule=parseRule(rule);}var freq=(rule.repeat||"").toLowerCase();var interval=rule.interval||1;var count=rule.count;var from=rule.from?makeDate(rule.from):makeDate(item.start||item.date)||(interval!==1||count!==UNDEFINED?new Date:start);var until=rule.until?makeDate(rule.until):Infinity;var occurredBefore=from<start;var rangeStart=occurredBefore?start:getDateOnly(from);var rangeEnd=until;var countOrInfinity=count===UNDEFINED?Infinity:count;var weekDays=(rule.weekDays||"").split(",");var weekStart=WEEK_DAYS[(rule.weekStart||"MO").trim().toUpperCase()];var day=+(rule.day||getDay(from));var month=+(rule.month||getMonth(from));var exception=item.recurringException;var exceptionRule=item.recurringExceptionRule;var first=void 0;var iterator=void 0;var repeat=true;var i=0;var nr=0;var exceptionDateMap=void 0;switch(freq){case"daily":nr=count&&occurredBefore?floor(getDayDiff(from,start)/interval):0;while(repeat){iterator=getDate(getYear(from),getMonth(from),getDay(from)+nr*interval);exceptionDateMap=getExceptionDateMap(iterator,iterator,addDays(iterator,1),s,exception,exceptionRule);if(iterator<rangeEnd&&nr<countOrInfinity){if(iterator>=start&&!exceptionDateMap[getDateStr(iterator)]){closest=closest&&closest<iterator?closest:iterator;repeat=false;}nr++;}else {repeat=false;}}break;case"weekly":var nrByDay={};var sortedDays=[];var fromDate=getDateOnly(from);var fromFirstWeekDay=getFirstDayOfWeek(from,{firstDay:weekStart});var fromWeekDay_1=fromFirstWeekDay.getDay();var startFirstWeekDay=getFirstDayOfWeek(start,{firstDay:weekStart});for(var _i=0,weekDays_1=weekDays;_i<weekDays_1.length;_i++){var weekDay=weekDays_1[_i];sortedDays.push(WEEK_DAYS[weekDay.toUpperCase()]);}sortedDays.sort((function(a,b){a=a-fromWeekDay_1;a=a<0?a+7:a;b=b-fromWeekDay_1;b=b<0?b+7:b;return a-b}));if(occurredBefore&&count===UNDEFINED){var daysNr=floor(getDayDiff(fromFirstWeekDay,startFirstWeekDay));for(var _a=0,sortedDays_1=sortedDays;_a<sortedDays_1.length;_a++){var weekDay=sortedDays_1[_a];var temp=floor(daysNr/(7*interval));if(weekDay<from.getDay()){temp--;}if(weekDay<start.getDay()){temp++;}nrByDay[weekDay]=temp;nr+=temp;}}while(repeat){for(var _b=0,sortedDays_2=sortedDays;_b<sortedDays_2.length;_b++){var weekDay=sortedDays_2[_b];first=addDays(fromFirstWeekDay,weekDay<weekStart?weekDay-weekStart+7:weekDay-weekStart);iterator=getDate(getYear(first),getMonth(first),getDay(first)+((nrByDay[weekDay]||0)+i)*7*interval);exceptionDateMap=getExceptionDateMap(iterator,iterator,addDays(iterator,1),s,exception,exceptionRule);if(iterator<rangeEnd&&nr<countOrInfinity){if(iterator>=fromDate){if(iterator>=start&&!exceptionDateMap[getDateStr(iterator)]){closest=closest&&closest<iterator?closest:iterator;repeat=false;}nr++;}}else {repeat=false;}}i++;}break;case"monthly":while(repeat){var maxDays=getMaxDays(getYear(from),getMonth(from)+i*interval);iterator=getDate(getYear(from),getMonth(from)+i*interval,day<0?maxDays+day+1:day);exceptionDateMap=getExceptionDateMap(iterator,iterator,addDays(iterator,1),s,exception,exceptionRule);if(iterator<rangeEnd&&nr<countOrInfinity){if(maxDays>=day){if(iterator>=rangeStart&&iterator>=start&&!exceptionDateMap[getDateStr(iterator)]){closest=closest&&closest<iterator?closest:iterator;repeat=false;}nr++;}}else {repeat=false;}i++;}break;case"yearly":while(repeat){var maxDays=getMaxDays(getYear(from)+i*interval,month-1);iterator=getDate(getYear(from)+i*interval,month-1,day<0?maxDays+day+1:day);exceptionDateMap=getExceptionDateMap(iterator,iterator,addDays(iterator,1),s,exception,exceptionRule);if(iterator<rangeEnd&&nr<countOrInfinity){if(maxDays>=day){if(iterator>=rangeStart&&iterator>=start&&!exceptionDateMap[getDateStr(iterator)]){closest=closest&&closest<iterator?closest:iterator;repeat=false;}nr++;}}else {repeat=false;}i++;}break}}else if(item.start&&item.end){var st=makeDate(item.start,s,displayFormat);var nd=makeDate(item.end,s,displayFormat);if(nd>start){if(st<=start){closest=start;}else {closest=closest&&closest<st?closest:st;}}}}index++;};while(index<list.length){_loop_1();}return closest}function getExceptionList(exception){if(exception){if(isArray(exception)){return exception}if(isString(exception)){return exception.split(",")}return [exception]}return []}function getOccurrences(rule,dtStart,start,end,s,exception,exceptionRule){if(isString(rule)){rule=parseRule(rule);}var getYear=s.getYear;var getMonth=s.getMonth;var getDay=s.getDay;var getDate=s.getDate;var getMaxDays=s.getMaxDayOfMonth;var freq=(rule.repeat||"").toLowerCase();var interval=rule.interval||1;var count=rule.count;var occurences=[];var from=rule.from?makeDate(rule.from):dtStart||(interval!==1||count!==UNDEFINED?new Date:start);var until=rule.until?makeDate(rule.until):Infinity;var occurredBefore=from<start;var rangeStart=occurredBefore?start:getDateOnly(from);var rangeEnd=until<end?until:end;var countOrInfinity=count===UNDEFINED?Infinity:count;var weekDays=(rule.weekDays||"").split(",");var weekStart=WEEK_DAYS[(rule.weekStart||"MO").trim().toUpperCase()];var day=+(rule.day||getDay(from));var month=+(rule.month||getMonth(from));var exceptionDateMap=getExceptionDateMap(dtStart,start,end,s,exception,exceptionRule);var first;var iterator;var repeat=true;var i=0;var nr=0;switch(freq){case"daily":nr=count&&occurredBefore?floor(getDayDiff(from,start)/interval):0;while(repeat){iterator=getDate(getYear(from),getMonth(from),getDay(from)+nr*interval);if(iterator<rangeEnd&&nr<countOrInfinity){if(!exceptionDateMap[getDateStr(iterator)]){occurences.push({d:iterator,i:nr});}nr++;}else {repeat=false;}}break;case"weekly":var nrByDay={};var sortedDays=[];var fromDate=getDateOnly(from);var fromFirstWeekDay=getFirstDayOfWeek(from,{firstDay:weekStart});var fromWeekDay_2=fromFirstWeekDay.getDay();var startFirstWeekDay=getFirstDayOfWeek(start,{firstDay:weekStart});for(var _i=0,weekDays_2=weekDays;_i<weekDays_2.length;_i++){var weekDay=weekDays_2[_i];sortedDays.push(WEEK_DAYS[weekDay.trim().toUpperCase()]);}sortedDays.sort((function(a,b){a=a-fromWeekDay_2;a=a<0?a+7:a;b=b-fromWeekDay_2;b=b<0?b+7:b;return a-b}));if(occurredBefore&&count===UNDEFINED){var daysNr=floor(getDayDiff(fromFirstWeekDay,startFirstWeekDay));for(var _a=0,sortedDays_3=sortedDays;_a<sortedDays_3.length;_a++){var weekDay=sortedDays_3[_a];var temp=floor(daysNr/(7*interval));if(weekDay<from.getDay()){temp--;}if(weekDay<start.getDay()){temp++;}nrByDay[weekDay]=temp;nr+=temp;}}while(repeat){for(var _b=0,sortedDays_4=sortedDays;_b<sortedDays_4.length;_b++){var weekDay=sortedDays_4[_b];first=addDays(fromFirstWeekDay,weekDay<weekStart?weekDay-weekStart+7:weekDay-weekStart);iterator=getDate(getYear(first),getMonth(first),getDay(first)+((nrByDay[weekDay]||0)+i)*7*interval);if(iterator<rangeEnd&&nr<countOrInfinity){if(iterator>=fromDate){if(!exceptionDateMap[getDateStr(iterator)]){occurences.push({d:iterator,i:nr});}nr++;}}else {repeat=false;}}i++;}break;case"monthly":while(repeat){var maxDays=getMaxDays(getYear(from),getMonth(from)+i*interval);iterator=getDate(getYear(from),getMonth(from)+i*interval,day<0?maxDays+day+1:day);if(iterator<rangeEnd&&nr<countOrInfinity){if(maxDays>=day){if(iterator>=rangeStart&&!exceptionDateMap[getDateStr(iterator)]){occurences.push({d:iterator,i:nr});}nr++;}}else {repeat=false;}i++;}break;case"yearly":while(repeat){var maxDays=getMaxDays(getYear(from)+i*interval,month-1);iterator=getDate(getYear(from)+i*interval,month-1,day<0?maxDays+day+1:day);if(iterator<rangeEnd&&nr<countOrInfinity){if(maxDays>=day){if(iterator>=rangeStart&&!exceptionDateMap[getDateStr(iterator)]){occurences.push({d:iterator,i:nr});}nr++;}}else {repeat=false;}i++;}break}return occurences}function getEventMap(list,start,end,s,overwrite){var obj={};var tz=s.timezonePlugin;var dataTimezone=s.dataTimezone||s.displayTimezone;var tzOpt=tz?{displayTimezone:dataTimezone,timezonePlugin:tz}:s;if(!list){return}for(var _i=0,list_1=list;_i<list_1.length;_i++){var item=list_1[_i];var d=isString(item)||item.getTime||item.toDate?item:item.start||item.date;var dt=makeDate(d,item.allDay?UNDEFINED:s);if(item.recurring){var dtStart=ISO_8601_TIME.test(d)?null:makeDate(d);var from=addDays(start,-1);var until=addDays(end,1);var dates=getOccurrences(item.recurring,dtStart,from,until,s,item.recurringException,item.recurringExceptionRule);var origStart=createDate(item.allDay?UNDEFINED:tzOpt,dt);var duration=item.end?+makeDate(item.end,item.allDay?UNDEFINED:s)-+origStart:0;for(var _a=0,dates_1=dates;_a<dates_1.length;_a++){var occurrence=dates_1[_a];var date=occurrence.d;var clone=__assign({},item);if(item.start){clone.start=createDate(item.allDay?UNDEFINED:tzOpt,date.getFullYear(),date.getMonth(),date.getDate(),origStart.getHours(),origStart.getMinutes(),origStart.getSeconds());}else {clone.allDay=true;clone.start=createDate(UNDEFINED,date.getFullYear(),date.getMonth(),date.getDate());}if(item.end){clone.end=createDate(item.allDay?UNDEFINED:tzOpt,+clone.start+duration);}clone.nr=occurrence.i;clone.original=item;if(clone.start&&clone.end){addMultiDayEvent(obj,clone,s,overwrite);}else {addToList(obj,date,clone);}}}else if(item.start&&item.end){addMultiDayEvent(obj,item,s,overwrite);}else if(dt){addToList(obj,dt,item);}}return obj}var markup='<div class="mbsc-resize"><div class="mbsc-resize-i mbsc-resize-x"></div></div>'+'<div class="mbsc-resize"><div class="mbsc-resize-i mbsc-resize-y"></div></div>';var observer;var count=0;function resizeObserver(el,callback,zone){var expand;var expandChild;var helper;var hiddenRafId;var rafId;var shrink;var stopCheck;var lastCheck=0;function reset(){expandChild.style.width="100000px";expandChild.style.height="100000px";expand.scrollLeft=1e5;expand.scrollTop=1e5;shrink.scrollLeft=1e5;shrink.scrollTop=1e5;}function checkHidden(){var now=+new Date;hiddenRafId=0;if(!stopCheck){if(now-lastCheck>200&&!expand.scrollTop&&!expand.scrollLeft){lastCheck=now;reset();}if(!hiddenRafId){hiddenRafId=raf(checkHidden);}}}function onScroll(){if(!rafId){rafId=raf(onResize);}}function onResize(){rafId=0;reset();callback();}if(win&&win.ResizeObserver){if(!observer){observer=new win.ResizeObserver((function(entries){if(!rafId){rafId=raf((function(){for(var _i=0,entries_1=entries;_i<entries_1.length;_i++){var entry=entries_1[_i];if(entry.target.__mbscResize){entry.target.__mbscResize();}}rafId=0;}));}}));}count++;el.__mbscResize=function(){if(zone){zone.run(callback);}else {callback();}};observer.observe(el);}else {helper=doc&&doc.createElement("div");}if(helper){helper.innerHTML=markup;helper.dir="ltr";shrink=helper.childNodes[1];expand=helper.childNodes[0];expandChild=expand.childNodes[0];el.appendChild(helper);listen(expand,"scroll",onScroll);listen(shrink,"scroll",onScroll);if(zone){zone.runOutsideAngular((function(){raf(checkHidden);}));}else {raf(checkHidden);}}return {detach:function(){if(observer){count--;delete el.__mbscResize;observer.unobserve(el);if(!count){observer=UNDEFINED;}}else {if(helper){unlisten(expand,"scroll",onScroll);unlisten(shrink,"scroll",onScroll);el.removeChild(helper);rafc(rafId);helper=UNDEFINED;}stopCheck=true;}}}}var REF_DATE=new Date(1970,0,1);var MONTH_VIEW="month";var YEAR_VIEW="year";var MULTI_YEAR_VIEW="multi-year";var PAGE_WIDTH=296;var labelGuid=1;var calendarViewDefaults=__assign({},dateTimeLocale,{dateText:"Date",eventText:"event",eventsText:"events",moreEventsText:"{count} more",nextText:"Next",prevText:"Previous",showEventTooltip:true,showToday:true,timeText:"Time"});function getFirstPageDay(pageIndex,s){var refDate=s.refDate?makeDate(s.refDate):REF_DATE;var pageSize=s.eventRangeSize||1;var isWeekView=s.calendarType==="week";var showCalendar=s.showCalendar;var getDate=s.getDate;var ref=showCalendar&&!isWeekView||!showCalendar&&s.eventRange!=="week"?refDate:getFirstDayOfWeek(refDate,s);var year=s.getYear(ref);var month=s.getMonth(ref);var day=s.getDay(ref);if(showCalendar){return isWeekView?getDate(year,month,day+7*s.weeks*pageIndex):getDate(year,month+pageIndex*s.size,1)}switch(s.eventRange){case"year":return getDate(year+pageIndex*pageSize,month,1);case"week":return getDate(year,month,day+7*pageSize*pageIndex);case"day":return getDate(year,month,day+pageSize*pageIndex);default:return getDate(year,month+pageIndex*pageSize,1)}}function getPageIndex(d,s){var refDate=s.refDate?makeDate(s.refDate):REF_DATE;var getYear=s.getYear;var getMonth=s.getMonth;var isWeekView=s.calendarType==="week";var pageSize=s.eventRangeSize||1;if(s.showCalendar){return isWeekView?floor(getDayDiff(getFirstDayOfWeek(refDate,s),getFirstDayOfWeek(d,s))/(7*s.weeks)):floor((getMonth(d)-getMonth(refDate)+(getYear(d)-getYear(refDate))*12)/s.size)}var diff;switch(s.eventRange){case"year":diff=getYear(d)-getYear(refDate);break;case"week":diff=getDayDiff(getFirstDayOfWeek(refDate,s),getFirstDayOfWeek(d,s))/7;break;case"day":diff=getDayDiff(refDate,d);break;case"month":diff=getMonth(d)-getMonth(refDate)+(getYear(d)-getYear(refDate))*12;break;default:return}return floor(diff/pageSize)}function getYearsIndex(d,s){var refDate=s.refDate?makeDate(s.refDate):REF_DATE;return floor((s.getYear(d)-s.getYear(refDate))/12)}function getYearIndex(d,s){var refDate=s.refDate?makeDate(s.refDate):REF_DATE;return s.getYear(d)-s.getYear(refDate)}function compareEvents(a,b){var start1=makeDate(a.start||a.date);var start2=makeDate(b.start||a.date);var text1=a.title||a.text;var text2=b.title||b.text;var weight1=!start1?0:+start1*(a.allDay?1:10);var weight2=!start2?0:+start2*(b.allDay?1:10);if(weight1===weight2){return text1>text2?1:-1}return weight1-weight2}function getPageNr(pages,width){return pages==="auto"?Math.max(1,Math.min(3,Math.floor(width?width/PAGE_WIDTH:1))):pages?+pages:1}function getLabels(s,labelsObj,start,end,maxLabels,days,allDayOnly,firstWeekDay,isMultiRow,eventOrder,noOuterDays,showLabelCount,moreEventsText,moreEventsPluralText){labelsObj=labelsObj||{};var dayLabels={};var eventRows={};var day=start;var uid=0;var max=maxLabels;var rowEnd=end;var _loop_1=function(){var dateKey=getDateStr(day);var weekDay=day.getDay();var monthDay=s.getDay(day);var lastDayOfMonth=noOuterDays&&s.getDate(s.getYear(day),s.getMonth(day)+1,0);var isRowStart=isMultiRow&&(weekDay===firstWeekDay||monthDay===1&&noOuterDays)||+day===+start;var events=sortEvents(labelsObj[dateKey]||[],eventOrder);var prevEvent;var prevIndex;var row=0;var displayed=0;var i=0;if(isRowStart){eventRows={};rowEnd=isMultiRow?addDays(day,days):end;}if(allDayOnly){events=events.filter((function(ev){return ev.allDay}));}if(maxLabels===-1){max=events.length+1;}var eventsNr=events.length;var data=[];if(showLabelCount){data.push({id:"count_"+ +day,count:eventsNr,placeholder:eventsNr===0});row=max;}var _loop_2=function(){prevEvent=null;events.forEach((function(ev,j){if(eventRows[row]===ev){prevEvent=ev;prevIndex=j;}}));if(row===max-1&&(displayed<eventsNr-1||i===eventsNr&&!prevEvent)&&maxLabels!==-1){var nr=eventsNr-displayed;var moreText_1=moreEventsText||"";var text=(nr>1?moreEventsPluralText||moreText_1:moreText_1).replace(/{count}/,nr);if(nr){data.push({id:"more_"+ ++uid,more:text});}if(prevEvent){eventRows[row]=null;prevEvent._days.forEach((function(d){dayLabels[getDateStr(d)].data[row]={id:"more_"+ ++uid,more:moreText_1.replace(/{count}/,"1")};}));}displayed++;row++;}else if(prevEvent){if(prevIndex===i){i++;}if(isSameDay(day,makeDate(prevEvent.end,prevEvent.allDay?UNDEFINED:s))){eventRows[row]=null;}data.push({id:prevEvent.id+(prevEvent.recurring?"_"+prevEvent.nr:""),event:prevEvent});row++;displayed++;prevEvent._days.push(day);}else if(i<eventsNr){var event_1=events[i];var allDay=event_1.allDay;var startTime=event_1.start&&makeDate(event_1.start,allDay?UNDEFINED:s);if(!startTime||isSameDay(day,startTime)||isRowStart){var eventEnd=event_1.end&&makeDate(event_1.end,allDay?UNDEFINED:s);var endTime=getEndDate(s,true,startTime,eventEnd);var multiDay=endTime&&!isSameDay(startTime,endTime);var labelEnd=lastDayOfMonth&&lastDayOfMonth<endTime?lastDayOfMonth:endTime;if(event_1.id===UNDEFINED){event_1.id="mbsc_"+labelGuid++;}if(multiDay){eventRows[row]=event_1;}event_1._days=[day];data.push({event:event_1,id:event_1.id+(event_1.recurring?"_"+event_1.nr:""),lastDay:lastDayOfMonth?addDays(lastDayOfMonth,1):UNDEFINED,multiDay:multiDay,showText:true,width:multiDay?Math.min(getDayDiff(day,labelEnd)+1,getDayDiff(day,rowEnd))*100:100});row++;displayed++;}i++;}else {if(displayed<eventsNr){data.push({id:"ph_"+ ++uid,placeholder:true});}row++;}};while(eventsNr&&row<max){_loop_2();}dayLabels[dateKey]={data:data,events:events};day=getDateOnly(addDays(day,1));};while(day<end){_loop_1();}return dayLabels}function sortEvents(events,eventOrder){return events&&events.slice(0).sort(eventOrder||compareEvents)}var CalendarViewBase=function(_super){__extends(CalendarViewBase,_super);function CalendarViewBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.state={height:"sm",maxLabels:0,pageSize:0,pickerSize:0,width:"sm"};_this._dim={};_this._months=[1,2,3];_this._title=[];_this.MONTH_VIEW=MONTH_VIEW;_this.YEAR_VIEW=YEAR_VIEW;_this.MULTI_YEAR_VIEW=MULTI_YEAR_VIEW;_this.nextPage=function(){_this._prevDocClick();switch(_this._view){case MULTI_YEAR_VIEW:_this._activeYearsChange(1);break;case YEAR_VIEW:_this._activeYearChange(1);break;default:_this._activeChange(1);}};_this.prevPage=function(){_this._prevDocClick();switch(_this._view){case MULTI_YEAR_VIEW:_this._activeYearsChange(-1);break;case YEAR_VIEW:_this._activeYearChange(-1);break;default:_this._activeChange(-1);}};_this._changeView=function(newView){var view=_this._view;var hasPicker=_this._hasPicker;var selectView=_this.s.selectView;if(!newView){switch(view){case MONTH_VIEW:newView=MULTI_YEAR_VIEW;break;case MULTI_YEAR_VIEW:newView=YEAR_VIEW;break;default:newView=hasPicker||selectView===YEAR_VIEW?MULTI_YEAR_VIEW:MONTH_VIEW;}if(view===MULTI_YEAR_VIEW&&+_this.s.size===12){newView=MONTH_VIEW;}}var skipAnimation=hasPicker&&newView===selectView;_this.setState({view:newView,viewClosing:skipAnimation?UNDEFINED:view,viewOpening:skipAnimation?UNDEFINED:newView});};_this._onDayHoverIn=function(ev){if(!_this._disableHover){_this._hook("onDayHoverIn",ev);_this._hoverTimer=setTimeout((function(){var key=getDateStr(ev.date);if(_this._labels){ev.labels=_this._labels[key];}if(_this._marked){ev.marked=_this._marked[key];}_this._isHover=true;_this._hook("onCellHoverIn",ev);}),150);}};_this._onDayHoverOut=function(ev){if(!_this._disableHover){_this._hook("onDayHoverOut",ev);clearTimeout(_this._hoverTimer);if(_this._isHover){var key=getDateStr(ev.date);if(_this._labels){ev.labels=_this._labels[key];}if(_this._marked){ev.marked=_this._marked[key];}_this._isHover=false;_this._hook("onCellHoverOut",ev);}}};_this._onLabelClick=function(args){_this._isLabelClick=true;_this._hook("onLabelClick",args);};_this._onDayClick=function(args){_this._shouldFocus=!_this._isLabelClick;_this._prevAnim=false;_this._prevPageChange=_this.s.noOuterChange;_this._isLabelClick=false;_this._hook("onDayClick",args);};_this._onTodayClick=function(args){_this._prevAnim=false;_this._hook("onActiveChange",{date:+new Date,today:true});_this._hook("onTodayClick",{});};_this._onMonthClick=function(args){var d=args.date;var s=_this.s;if(s.selectView===YEAR_VIEW){_this._hook("onDayClick",args);}else {var newIndex=getPageIndex(d,s)-_this._offset;_this._changeView(MONTH_VIEW);_this._shouldFocus=true;_this._prevAnim=!_this._hasPicker;_this._hook("onActiveChange",{date:+d,nav:true,pageChange:newIndex!==_this._pageIndex});}};_this._onYearClick=function(args){var s=_this.s;var view=s.selectView;if(view===MULTI_YEAR_VIEW||+s.size===12){_this._hook("onDayClick",args);}if(view!==MULTI_YEAR_VIEW){_this._shouldFocus=true;_this._prevAnim=view===YEAR_VIEW;_this._activeMonth=+args.date;_this._changeView();}};_this._onPageChange=function(args){_this._isSwipeChange=true;_this._activeChange(args.diff);};_this._onYearPageChange=function(args){_this._activeYearChange(args.diff);};_this._onYearsPageChange=function(args){_this._activeYearsChange(args.diff);};_this._onAnimationEnd=function(args){_this._disableHover=false;if(_this._isIndexChange){_this._pageLoaded();_this._isIndexChange=false;}};_this._onStart=function(){clearTimeout(_this._hoverTimer);};_this._onGestureStart=function(args){_this._disableHover=true;_this._hook("onGestureStart",args);};_this._onGestureEnd=function(args){_this._prevDocClick();};_this._onPickerClose=function(){_this.setState({view:MONTH_VIEW});};_this._onPickerOpen=function(){var pageHeight=_this._pickerCont.clientHeight;var pageWidth=_this._pickerCont.clientWidth;_this.setState({pickerSize:_this._isVertical?pageHeight:pageWidth});};_this._onPickerBtnClick=function(ev){if(_this._view===MONTH_VIEW){_this._pickerBtn=ev.currentTarget;}_this._prevDocClick();_this._changeView();};_this._onDocClick=function(ev){var view=_this.s.selectView;if(!_this._prevClick&&!_this._hasPicker&&_this._view!==view&&_this._pickerCont&&!_this._pickerCont.contains(ev.target)){_this._changeView(view);}};_this._onViewAnimationEnd=function(){if(_this.state.viewOpening===UNDEFINED){_this.setState({viewClosing:UNDEFINED});}else {_this.setState({viewOpening:UNDEFINED});}};_this._onResize=function(){if(!_this._body||!isBrowser){return}var s=_this.s;var state=_this.state;var showCalendar=s.showCalendar;var body=showCalendar?_this._body.querySelector(".mbsc-calendar-body-inner"):_this._body;var totalHeight=_this._el.offsetHeight;var pageHeight=body.clientHeight;var pageWidth=body.clientWidth;var pageSize=_this._isVertical?pageHeight:pageWidth;var pickerSize=_this._hasPicker?state.pickerSize:pageSize;var width="sm";var height="sm";var maxLabels=0;if(s.responsiveStyle&&!_this._isGrid){if(pageHeight>300){height="md";}if(pageWidth>767){width="md";}}if(width!==state.width||height!==state.height){_this._shouldCheckSize=true;_this.setState({width:width,height:height});}else {var cellSizes=[];if(_this._labels&&showCalendar){var placeholder=body.querySelector(".mbsc-calendar-text");var cell=body.querySelector(".mbsc-calendar-day-inner");var labelsCont=cell.querySelector(".mbsc-calendar-labels");var txtMargin=placeholder?getDimension(placeholder,"marginBottom"):2;var txtHeight=placeholder?placeholder.offsetHeight:18;var availableHeight=cell.clientHeight-labelsCont.offsetTop;maxLabels=Math.max(1,floor(availableHeight/(txtHeight+txtMargin)));var firstRow=body.querySelector(".mbsc-calendar-row");var cells=firstRow.querySelectorAll(".mbsc-calendar-cell");for(var i=0;i<cells.length;i++){if(i||!s.showWeekNumbers){var w=cells[i].getBoundingClientRect().width;cellSizes.push(w);}}}_this._hook("onResize",{height:totalHeight,target:_this._el,width:pageWidth});_this.setState({cellSizes:cellSizes,pageSize:pageSize,pickerSize:pickerSize,maxLabels:maxLabels});}};_this._onKeyDown=function(ev){var s=_this.s;var view=_this._view;var active=view===MONTH_VIEW?_this._active:_this._activeMonth;var activeDate=new Date(active);var year=s.getYear(activeDate);var month=s.getMonth(activeDate);var day=s.getDay(activeDate);var getDate=s.getDate;var weeks=s.weeks;var isMonthView=s.calendarType==="month";var newDate;if(view===MULTI_YEAR_VIEW){var newYear=void 0;switch(ev.keyCode){case LEFT_ARROW:newYear=year-1*_this._rtlNr;break;case RIGHT_ARROW:newYear=year+1*_this._rtlNr;break;case UP_ARROW:newYear=year-3;break;case DOWN_ARROW:newYear=year+3;break;case HOME:newYear=_this._getPageYears(_this._yearsIndex);break;case END:newYear=_this._getPageYears(_this._yearsIndex)+11;break;case PAGE_UP:newYear=year-12;break;case PAGE_DOWN:newYear=year+12;break}if(newYear&&_this._minYears<=newYear&&_this._maxYears>=newYear){ev.preventDefault();_this._shouldFocus=true;_this._prevAnim=false;_this._activeMonth=+getDate(newYear,0,1);_this.forceUpdate();}}else if(view===YEAR_VIEW){switch(ev.keyCode){case LEFT_ARROW:newDate=getDate(year,month-1*_this._rtlNr,1);break;case RIGHT_ARROW:newDate=getDate(year,month+1*_this._rtlNr,1);break;case UP_ARROW:newDate=getDate(year,month-3,1);break;case DOWN_ARROW:newDate=getDate(year,month+3,1);break;case HOME:newDate=getDate(year,0,1);break;case END:newDate=getDate(year,11,1);break;case PAGE_UP:newDate=getDate(year-1,month,1);break;case PAGE_DOWN:newDate=getDate(year+1,month,1);break}if(newDate&&_this._minYear<=newDate&&_this._maxYear>=newDate){ev.preventDefault();_this._shouldFocus=true;_this._prevAnim=false;_this._activeMonth=+newDate;_this.forceUpdate();}}else if(view===MONTH_VIEW){switch(ev.keyCode){case LEFT_ARROW:newDate=getDate(year,month,day-1*_this._rtlNr);break;case RIGHT_ARROW:newDate=getDate(year,month,day+1*_this._rtlNr);break;case UP_ARROW:newDate=getDate(year,month,day-7);break;case DOWN_ARROW:newDate=getDate(year,month,day+7);break;case HOME:newDate=getDate(year,month,1);break;case END:newDate=getDate(year,month+1,0);break;case PAGE_UP:newDate=ev.altKey?getDate(year-1,month,day):isMonthView?getDate(year,month-1,day):getDate(year,month,day-weeks*7);break;case PAGE_DOWN:newDate=ev.altKey?getDate(year+1,month,day):isMonthView?getDate(year,month+1,day):getDate(year,month,day+weeks*7);break}if(newDate&&_this._minDate<=newDate&&_this._maxDate>=newDate){ev.preventDefault();var newIndex=getPageIndex(newDate,s)-_this._offset;_this._shouldFocus=true;_this._prevAnim=false;_this._pageChange=s.noOuterChange&&newIndex!==_this._pageIndex;_this._hook("onActiveChange",{date:+newDate,pageChange:_this._pageChange});}}};return _this}CalendarViewBase.prototype._getPageDay=function(pageIndex){return +getFirstPageDay(pageIndex+this._offset,this.s)};CalendarViewBase.prototype._getPageStyle=function(index,offset,pageNr){var _a;return _a={},_a[(jsPrefix?jsPrefix+"T":"t")+"ransform"]="translate"+this._axis+"("+(index-offset)*100*this._rtlNr+"%)",_a.width=100/(pageNr||1)+"%",_a};CalendarViewBase.prototype._getPageYear=function(pageIndex){var s=this.s;var refDate=s.refDate?makeDate(s.refDate):REF_DATE;var year=s.getYear(refDate);return year+pageIndex+this._yearOffset};CalendarViewBase.prototype._getPageYears=function(pageIndex){var s=this.s;var refDate=s.refDate?makeDate(s.refDate):REF_DATE;var year=s.getYear(refDate);return year+(pageIndex+this._yearsOffset)*12};CalendarViewBase.prototype._getPickerClass=function(view){var animName;var pickerName=view===this.s.selectView?" mbsc-calendar-picker-main":"";var baseName="mbsc-calendar-picker";var hasPicker=this._hasPicker;var _a=this.state,viewClosing=_a.viewClosing,viewOpening=_a.viewOpening;switch(view){case MONTH_VIEW:animName=hasPicker?"":(viewOpening===MONTH_VIEW?"in-down":"")+(viewClosing===MONTH_VIEW?"out-down":"");break;case MULTI_YEAR_VIEW:animName=hasPicker&&viewClosing===MONTH_VIEW?"":(viewOpening===MULTI_YEAR_VIEW?"in-up":"")+(viewClosing===MULTI_YEAR_VIEW?"out-up":"");break;default:animName=hasPicker&&viewOpening===MONTH_VIEW?"":(viewOpening===YEAR_VIEW?viewClosing===MULTI_YEAR_VIEW?"in-down":"in-up":"")+(viewClosing===YEAR_VIEW?viewOpening===MULTI_YEAR_VIEW?"out-down":"out-up":"");}return baseName+pickerName+(hasAnimation&&animName?" "+baseName+"-"+animName:"")};CalendarViewBase.prototype._isNextDisabled=function(isModalPicker){if(!this._hasPicker||isModalPicker){var view=this._view;if(view===MULTI_YEAR_VIEW){return this._yearsIndex+1>this._maxYearsIndex}if(view===YEAR_VIEW){return this._yearIndex+1>this._maxYearIndex}}return this._pageIndex+1>this._maxIndex};CalendarViewBase.prototype._isPrevDisabled=function(isModalPicker){if(!this._hasPicker||isModalPicker){var view=this._view;if(view===MULTI_YEAR_VIEW){return this._yearsIndex-1<this._minYearsIndex}if(view===YEAR_VIEW){return this._yearIndex-1<this._minYearIndex}}return this._pageIndex-1<this._minIndex};CalendarViewBase.prototype._render=function(s,state){var getDate=s.getDate;var getYear=s.getYear;var getMonth=s.getMonth;var showCalendar=s.showCalendar;var isMonthView=s.calendarType==="month";var isYearView=s.calendarType==="year";var size=isYearView?12:s.size||1;var isGrid=size>1&&(isMonthView||isYearView);var weeks=showCalendar?isMonthView||isYearView?6:s.weeks:0;var active=s.activeDate||this._active||+new Date;var activeChanged=active!==this._active;var d=new Date(active);var prevProps=this._prevS;var dateFormat=s.dateFormat;var monthNames=s.monthNames;var yearSuffix=s.yearSuffix;s.size=size;var viewChanged=s.calendarType!==prevProps.calendarType||s.eventRange!==prevProps.eventRange||s.eventRangeSize!==prevProps.eventRangeSize||s.refDate!==prevProps.refDate||s.showCalendar!==prevProps.showCalendar||s.weeks!==prevProps.weeks||s.firstDay!==prevProps.firstDay;var pageIndex=this._pageChange||this._pageIndex===UNDEFINED||viewChanged||!this._prevPageChange&&activeChanged&&(active<+this._firstDay||active>=+this._lastDay)?getPageIndex(d,s):this._pageIndex+this._offset;if(weeks!==this._weeks||this._pageIndex===UNDEFINED){this._offset=pageIndex;}if(activeChanged){this._activeMonth=active;}var yearsPageIndex=getYearsIndex(new Date(this._activeMonth),s);var yearPageIndex=getYearIndex(new Date(this._activeMonth),s);if(activeChanged){this._yearsOffset=yearsPageIndex;this._yearOffset=yearPageIndex;}this._view=state.view||s.selectView;this._yearsIndex=yearsPageIndex-this._yearsOffset;this._yearIndex=yearPageIndex-this._yearOffset;if(this._view===YEAR_VIEW){this._viewTitle=this._getPageYear(this._yearIndex)+"";}else if(this._view===MULTI_YEAR_VIEW){var startYear=this._getPageYears(this._yearsIndex);this._viewTitle=startYear+" - "+(startYear+11);}var pageOffset=0;var pageBuffer=1;var pageNr=getPageNr(s.pages,state.pageSize);var isVertical=s.calendarScroll==="vertical"&&s.pages!=="auto"&&(s.pages===UNDEFINED||s.pages===1);var showOuter=s.showOuterDays!==UNDEFINED?s.showOuterDays:!isVertical&&pageNr<2&&(!isMonthView||!size||size<2);var firstDay=getFirstPageDay(pageIndex,s);var lastDay=getFirstPageDay(pageIndex+pageNr,s);if(!showCalendar&&s.eventRange==="week"&&s.eventRangeSize===1&&s.startDay!==UNDEFINED&&s.endDay!==UNDEFINED){firstDay=addDays(firstDay,s.startDay-s.firstDay+(s.startDay<s.firstDay?7:0));lastDay=addDays(firstDay,s.endDay-s.startDay+1+(s.endDay<s.startDay?7:0));}var firstPageDay=showCalendar&&showOuter?getFirstDayOfWeek(firstDay,s):firstDay;var lastPage=getFirstPageDay(pageIndex+pageNr-1,s);var lastPageDay=showCalendar&&showOuter?addDays(getFirstDayOfWeek(lastPage,s),weeks*7):lastDay;var start=showCalendar?getFirstDayOfWeek(getFirstPageDay(pageIndex-pageOffset-pageBuffer,s),s):firstDay;var last=showCalendar?getFirstDayOfWeek(getFirstPageDay(pageIndex-pageOffset+pageNr+pageBuffer-1,s),s):lastDay;var end=showCalendar?addDays(last,weeks*7):lastDay;var monthIndex=dateFormat.search(/m/i);var yearIndex=dateFormat.search(/y/i);if(!isEmpty(s.min)){if(prevProps.min!==s.min||s.getDate!==prevProps.getDate){var min=makeDate(s.min);this._minDate=getDateOnly(min);this._minYear=getDate(getYear(min),getMonth(min),1);this._minYears=getYear(min);}this._minIndex=getPageIndex(this._minDate,s)-this._offset;this._minYearIndex=getYearIndex(this._minDate,s)-this._yearOffset;this._minYearsIndex=getYearsIndex(this._minDate,s)-this._yearsOffset;}else {this._minDate=-Infinity;this._minIndex=-Infinity;this._minYears=-Infinity;this._minYearsIndex=-Infinity;this._minYear=-Infinity;this._minYearIndex=-Infinity;}if(!isEmpty(s.max)){if(prevProps.max!==s.max||s.getDate!==prevProps.getDate){var max=makeDate(s.max);this._maxDate=max;this._maxYear=getDate(getYear(max),getMonth(max)+1,1);this._maxYears=getYear(this._maxDate);}this._maxIndex=getPageIndex(this._maxDate,s)-this._offset;this._maxYearIndex=getYearIndex(this._maxDate,s)-this._yearOffset;this._maxYearsIndex=getYearsIndex(this._maxDate,s)-this._yearsOffset;}else {this._maxDate=Infinity;this._maxIndex=Infinity;this._maxYears=Infinity;this._maxYearsIndex=Infinity;this._maxYear=Infinity;this._maxYearIndex=Infinity;}if(isGrid){this._monthsMulti=[];if(pageIndex!==UNDEFINED){var columns=floor(state.pageSize/PAGE_WIDTH)||1;while(size%columns){columns--;}for(var i=0;i<size/columns;++i){var rowItems=[];for(var j=0;j<columns;++j){rowItems.push(+getDate(getYear(firstDay),getMonth(firstDay)+i*columns+j,1));}this._monthsMulti.push(rowItems);}}}if(s.theme!==prevProps.theme||s.calendarScroll!==prevProps.calendarScroll||s.calendarType!==prevProps.calendarType||s.hasContent!==prevProps.hasContent||s.showWeekNumbers!==prevProps.showWeekNumbers||s.weeks!==prevProps.weeks){this._shouldCheckSize=true;}if(prevProps.width!==s.width||prevProps.height!==s.height){this._dim={height:addPixel(s.height),width:addPixel(s.width)};}this._cssClass="mbsc-calendar mbsc-font"+this._theme+this._rtl+(state.pageSize?"":" mbsc-calendar-hidden")+(isGrid?" mbsc-calendar-grid-view":" mbsc-calendar-height-"+state.height+" mbsc-calendar-width-"+state.width)+" "+s.cssClass;this._dayNames=state.width==="sm"||isGrid?s.dayNamesMin:s.dayNamesShort;this._isSwipeChange=false;this._firstDay=firstDay;this._firstPageDay=firstPageDay;this._lastDay=lastDay;this._lastPageDay=lastPageDay;this._yearFirst=yearIndex<monthIndex;this._pageNr=pageNr;var forcePageLoad=s.pageLoad!==prevProps.pageLoad;var pageChanged=+start!==+this._viewStart||+end!==+this._viewEnd;if(this._pageIndex!==UNDEFINED&&pageChanged){this._isIndexChange=!this._isSwipeChange&&!viewChanged;this._hook("onPageChange",{firstDay:firstPageDay,lastDay:lastPageDay,month:isMonthView?firstDay:UNDEFINED,viewEnd:end,viewStart:start});}if(pageIndex!==UNDEFINED){this._pageIndex=pageIndex-this._offset;}if(pageIndex!==UNDEFINED&&(s.marked!==prevProps.marked||s.colors!==prevProps.colors||s.labels!==prevProps.labels||s.invalid!==prevProps.invalid||s.valid!==prevProps.valid||state.maxLabels!==this._maxLabels||pageChanged||forcePageLoad)){if(pageChanged||forcePageLoad){this._marksMap=UNDEFINED;this._labelsMap=UNDEFINED;this._hook("onPageLoading",{firstDay:firstPageDay,lastDay:lastPageDay,month:isMonthView?firstDay:UNDEFINED,viewChanged:pageChanged,viewEnd:end,viewStart:start});}this._maxLabels=state.maxLabels;this._viewStart=start;this._viewEnd=end;var labelsMap=this._labelsMap||getEventMap(s.labels,start,end,s);var labels=labelsMap&&getLabels(s,labelsMap,start,end,state.maxLabels,7,false,s.firstDay,true,s.eventOrder,!showOuter,s.showLabelCount,s.moreEventsText,s.moreEventsPluralText);if(labels&&!this._labels){this._shouldCheckSize=true;}if(labels&&state.maxLabels||!labels){this._shouldPageLoad=!this._isIndexChange||this._prevAnim||!showCalendar||forcePageLoad;}this._labelsLayout=labels;this._labels=labelsMap;this._marked=!labelsMap&&(this._marksMap||getEventMap(s.marked,start,end,s));this._colors=getEventMap(s.colors,start,end,s);this._valid=getEventMap(s.valid,start,end,s,true);this._invalid=getEventMap(s.invalid,start,end,s,true);}if(pageChanged||activeChanged||s.monthNames!==prevProps.monthNames||s.eventRange!==prevProps.eventRange||s.eventRangeSize!==prevProps.eventRangeSize){this._title=[];var lDay=addDays(lastDay,-1);var titleDate=pageIndex===UNDEFINED?d:firstDay;if(s.calendarType==="week"){for(var _i=0,_a=Object.keys(s.selectedDates);_i<_a.length;_i++){var key=_a[_i];if(+key>=+firstDay&&+key<+lastDay){titleDate=new Date(+key);break}}}if(this._pageNr>1){for(var i=0;i<pageNr;i++){var dt=getDate(getYear(firstDay),getMonth(firstDay)+i,1);var yt=getYear(dt)+yearSuffix;var mt=monthNames[getMonth(dt)];this._title.push({yearTitle:yt,monthTitle:mt});}}else {var eventRangeSize=s.eventRangeSize||1;var titleObj={yearTitle:getYear(titleDate)+yearSuffix,monthTitle:monthNames[getMonth(titleDate)]};var titleType=s.showSchedule&&eventRangeSize===1?"month":showCalendar?s.calendarType:s.eventRange;var agendaOnly=s.eventRange&&!showCalendar&&(!s.showSchedule||eventRangeSize>1);switch(titleType){case"year":{titleObj.title=getYear(firstDay)+yearSuffix;if(eventRangeSize>1){titleObj.title+=" - "+(getYear(lDay)+yearSuffix);}break}case"month":{if(eventRangeSize>1&&!showCalendar){var monthStart=monthNames[getMonth(firstDay)];var yearStart=getYear(firstDay)+yearSuffix;var titleStart=this._yearFirst?yearStart+" "+monthStart:monthStart+" "+yearStart;var monthEnd=monthNames[getMonth(lDay)];var yearEnd=getYear(lDay)+yearSuffix;var titleEnd=this._yearFirst?yearEnd+" "+monthEnd:monthEnd+" "+yearEnd;titleObj.title=titleStart+" - "+titleEnd;}else if(isGrid){titleObj.title=getYear(firstDay)+yearSuffix;}break}case"day":case"week":{if(agendaOnly){var dayIndex=dateFormat.search(/d/i);var shortDateFormat=dayIndex<monthIndex?"D MMM, YYYY":"MMM D, YYYY";titleObj.title=formatDate(shortDateFormat,firstDay,s);if(titleType==="week"||eventRangeSize>1){titleObj.title+=" - "+formatDate(shortDateFormat,lDay,s);}}break}}this._title.push(titleObj);}}this._active=active;this._activeMonth=constrain(this._activeMonth,+this._minDate,+this._maxDate);this._hasPicker=s.hasPicker||isGrid||!isMonthView||!showCalendar||state.width==="md"&&s.hasPicker!==false;this._axis=isVertical?"Y":"X";this._rtlNr=!isVertical&&s.rtl?-1:1;this._weeks=weeks;this._nextIcon=isVertical?s.nextIconV:s.rtl?s.prevIconH:s.nextIconH;this._prevIcon=isVertical?s.prevIconV:s.rtl?s.nextIconH:s.prevIconH;this._mousewheel=s.mousewheel===UNDEFINED?isVertical:s.mousewheel;this._isGrid=isGrid;this._isVertical=isVertical;this._showOuter=showOuter;};CalendarViewBase.prototype._mounted=function(){this._observer=resizeObserver(this._el,this._onResize,this._zone);this._doc=getDocument(this._el);listen(this._doc,CLICK,this._onDocClick);};CalendarViewBase.prototype._updated=function(){var _this=this;if(this._shouldCheckSize){setTimeout((function(){_this._onResize();}));this._shouldCheckSize=false;}else if(this._shouldPageLoad){this._pageLoaded();this._shouldPageLoad=false;}if(this._shouldFocus){setTimeout((function(){_this._focusActive();_this._shouldFocus=false;}));}if(this.s.instanceService!==UNDEFINED){this.s.instanceService.onComponentChange.next({});}this._pageChange=false;this._prevPageChange=false;};CalendarViewBase.prototype._destroy=function(){if(this._observer){this._observer.detach();}unlisten(this._doc,CLICK,this._onDocClick);clearTimeout(this._hoverTimer);};CalendarViewBase.prototype._getActiveCell=function(){var view=this._view;var cont=view===MONTH_VIEW?this._body:this._pickerCont;var cell=view===MULTI_YEAR_VIEW?"year":view===YEAR_VIEW?"month":"cell";return cont&&cont.querySelector(".mbsc-calendar-"+cell+'[tabindex="0"]')};CalendarViewBase.prototype._focusActive=function(){var cell=this._getActiveCell();if(cell){cell.focus();}};CalendarViewBase.prototype._pageLoaded=function(){this._hook("onPageLoaded",{activeElm:this._getActiveCell(),firstDay:this._firstPageDay,lastDay:this._lastPageDay,month:this.s.calendarType==="month"?this._firstDay:UNDEFINED,viewEnd:this._viewEnd,viewStart:this._viewStart});};CalendarViewBase.prototype._activeChange=function(diff){var nextIndex=this._pageIndex+diff;if(this._minIndex<=nextIndex&&this._maxIndex>=nextIndex){this._prevAnim=false;this._pageChange=true;this._hook("onActiveChange",{date:this._getPageDay(nextIndex),dir:diff,pageChange:true});}};CalendarViewBase.prototype._activeYearsChange=function(diff){var nextIndex=this._yearsIndex+diff;if(this._minYearsIndex<=nextIndex&&this._maxYearsIndex>=nextIndex){var newYear=this._getPageYears(nextIndex);this._prevAnim=false;this._activeMonth=+this.s.getDate(newYear,0,1);this.forceUpdate();}};CalendarViewBase.prototype._activeYearChange=function(diff){var nextIndex=this._yearIndex+diff;if(this._minYearIndex<=nextIndex&&this._maxYearIndex>=nextIndex){var newYear=this._getPageYear(nextIndex);this._prevAnim=false;this._activeMonth=+this.s.getDate(newYear,0,1);this.forceUpdate();}};CalendarViewBase.prototype._prevDocClick=function(){var _this=this;this._prevClick=true;setTimeout((function(){_this._prevClick=false;}));};CalendarViewBase=__decorate([core.Directive({selector:"[mbsc-calview-b]"})],CalendarViewBase);return CalendarViewBase}(BaseComponent);function isInvalid(d,invalids,valids,min,max){var key=getDateStr(d);if(min&&+d<min||max&&+d>max){return true}if(valids&&valids[key]){return false}var invalidsForDay=invalids&&invalids[key];if(invalidsForDay){for(var _i=0,invalidsForDay_1=invalidsForDay;_i<invalidsForDay_1.length;_i++){var invalid=invalidsForDay_1[_i];if(!(invalid.start&&invalid.end&&isSameDay(invalid.start,invalid.end))){return invalid}}}return false}function getClosestValidDate(d,s,min,max,invalids,valids,dir){var next;var prev;var nextInvalid=true;var prevInvalid=true;var up=0;var down=0;if(+d<min){d=new Date(min);}if(+d>max){d=new Date(max);}if(!invalids){var year=s.getYear(d);var month=s.getMonth(d);var start=s.getDate(year,month-1,1);var end=s.getDate(year,month+2,1);valids=getEventMap(s.valid,start,end,s,true);invalids=getEventMap(s.invalid,start,end,s,true);}if(!isInvalid(d,invalids,valids,min,max)){return d}next=d;prev=d;while(nextInvalid&&+next<max&&up<100){next=addDays(next,1);nextInvalid=isInvalid(next,invalids,valids,min,max);up++;}while(prevInvalid&&+prev>min&&down<100){prev=addDays(prev,-1);prevInvalid=isInvalid(prev,invalids,valids,min,max);down++;}if(dir===1&&!nextInvalid){return next}if(dir===-1&&!prevInvalid){return prev}if(isSameMonth(d,next,s)){return next}if(isSameMonth(d,prev,s)){return prev}return down>=up&&!nextInvalid?next:prev}var tapped=0;var allowQuick;function getCoord(ev,axis,page){var prop=(page?"page":"client")+axis;if(ev.targetTouches&&ev.targetTouches[0]){return ev.targetTouches[0][prop]}if(ev.changedTouches&&ev.changedTouches[0]){return ev.changedTouches[0][prop]}return ev[prop]}function preventClick(){tapped++;setTimeout((function(){tapped--;}),500);}function triggerClick(ev,control){if(control.mbscClick){return}var touch=(ev.originalEvent||ev).changedTouches[0];var evt=document.createEvent("MouseEvents");evt.initMouseEvent("click",true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);evt.isMbscTap=true;evt.isIonicTap=true;allowQuick=true;control.mbscChange=true;control.mbscClick=true;control.dispatchEvent(evt);allowQuick=false;preventClick();setTimeout((function(){delete control.mbscClick;}));}function bustClick(ev){if(tapped&&!allowQuick&&!ev.isMbscTap&&!(ev.target.nodeName==="TEXTAREA"&&ev.type===MOUSE_DOWN)){ev.stopPropagation();ev.preventDefault();}}if(isBrowser){[MOUSE_OVER,MOUSE_ENTER,MOUSE_DOWN,MOUSE_UP,CLICK].forEach((function(ev){doc.addEventListener(ev,bustClick,true);}));if(exports.ɵj==="android"&&exports.ɵk<5){doc.addEventListener(CHANGE,(function(ev){var target=ev.target;if(tapped&&target.type==="checkbox"&&!target.mbscChange){ev.stopPropagation();ev.preventDefault();}delete target.mbscChange;}),true);}}var wasTouched;function setFocusInvisible(ev){var win=getWindow(ev.target);win.__mbscFocusVisible=false;}function setFocusVisible(ev){var win=getWindow(ev.target);win.__mbscFocusVisible=true;}function onTouchMove(ev){var document=getDocument(ev.target);document.__mbscMoveObs.next(ev);}function addRipple(elm,x,y){var rect=elm.getBoundingClientRect();var left=x-rect.left;var top=y-rect.top;var width=Math.max(left,elm.offsetWidth-left);var height=Math.max(top,elm.offsetHeight-top);var size=2*Math.sqrt(Math.pow(width,2)+Math.pow(height,2));var ripple=doc.createElement("span");ripple.classList.add("mbsc-ripple");var style=ripple.style;style.backgroundColor=getComputedStyle(elm).color;style.width=size+"px";style.height=size+"px";style.top=y-rect.top-size/2+"px";style.left=x-rect.left-size/2+"px";elm.appendChild(ripple);setTimeout((function(){style.opacity=".2";style.transform="scale(1)";style.transition="opacity linear .1s, transform cubic-bezier(0, 0, 0.2, 1) .4s";}),30);return ripple}function removeRipple(r){if(r){setTimeout((function(){r.style.opacity="0";r.style.transition="opacity linear .4s";setTimeout((function(){if(r&&r.parentNode){r.parentNode.removeChild(r);}}),400);}),200);}}function gestureListener(elm,options){var args={};var win=getWindow(elm);var document=getDocument(elm);var active;var activeable;var activeTimer;var ripple;var hasFocus;var hasHover;var hasRipple;var moved;var moveId;var startX;var startY;var endX;var endY;var deltaX;var deltaY;var started;function skipMouseEvent(ev){if(ev.type===TOUCH_START){wasTouched=true;}else if(wasTouched){if(ev.type===MOUSE_DOWN){wasTouched=false;}return true}return false}function activate(){if(hasRipple){removeRipple(ripple);ripple=addRipple(elm,endX,endY);}options.onPress();active=true;}function deactivate(r,time){activeable=false;removeRipple(r);clearTimeout(activeTimer);activeTimer=setTimeout((function(){if(active){options.onRelease();active=false;}}),time);}function onStart(ev){if(skipMouseEvent(ev)){return}if(ev.type===MOUSE_DOWN&&(ev.button!==0||ev.ctrlKey)){return}startX=getCoord(ev,"X");startY=getCoord(ev,"Y");endX=startX;endY=startY;active=false;activeable=false;moved=false;started=true;args.moved=moved;args.startX=startX;args.startY=startY;args.endX=endX;args.endY=endY;args.deltaX=0;args.deltaY=0;args.domEvent=ev;args.isTouch=wasTouched;removeRipple(ripple);if(options.onStart){var ret=options.onStart(args);hasRipple=ret&&ret.ripple;}if(options.onPress){activeable=true;clearTimeout(activeTimer);activeTimer=setTimeout(activate,50);}if(ev.type===MOUSE_DOWN){listen(document,MOUSE_MOVE,onMove);listen(document,MOUSE_UP,onEnd);}listen(document,CONTEXTMENU,onContextMenu);}function onMove(ev){if(!started){return}endX=getCoord(ev,"X");endY=getCoord(ev,"Y");deltaX=endX-startX;deltaY=endY-startY;if(!moved&&(Math.abs(deltaX)>9||Math.abs(deltaY)>9)){moved=true;deactivate(ripple);}args.moved=moved;args.endX=endX;args.endY=endY;args.deltaX=deltaX;args.deltaY=deltaY;args.domEvent=ev;args.isTouch=ev.type===TOUCH_MOVE;if(options.onMove){options.onMove(args);}}function onEnd(ev){if(!started){return}if(activeable&&!active){clearTimeout(activeTimer);activate();}args.domEvent=ev;args.isTouch=ev.type===TOUCH_END;if(options.onEnd){options.onEnd(args);}deactivate(ripple,75);started=false;if(ev.type===TOUCH_END&&options.click&&hasGhostClick&&!moved){triggerClick(ev,ev.target);}if(ev.type===MOUSE_UP){unlisten(document,MOUSE_MOVE,onMove);unlisten(document,MOUSE_UP,onEnd);}unlisten(document,CONTEXTMENU,onContextMenu);}function onHoverIn(ev){if(skipMouseEvent(ev)){return}hasHover=true;options.onHoverIn(ev);}function onHoverOut(ev){if(hasHover){options.onHoverOut(ev);}hasHover=false;}function onKeyDown(ev){options.onKeyDown(ev);}function onFocus(ev){if(options.keepFocus||win.__mbscFocusVisible){hasFocus=true;options.onFocus(ev);}}function onBlur(ev){if(hasFocus){options.onBlur(ev);}hasFocus=false;}function onChange(ev){options.onChange(ev);}function onDoubleClick(ev){args.domEvent=ev;if(!wasTouched){options.onDoubleClick(args);}}function onContextMenu(ev){if(wasTouched){ev.preventDefault();}}listen(elm,TOUCH_START,onStart,{passive:true});listen(elm,MOUSE_DOWN,onStart);listen(elm,TOUCH_END,onEnd);listen(elm,TOUCH_CANCEL,onEnd);if(document){var moveCount=document.__mbscMoveCount||0;var moveListener=document.__mbscMoveObs||new Observable;if(moveCount===0){listen(document,TOUCH_MOVE,onTouchMove,{passive:false});}document.__mbscMoveObs=moveListener;document.__mbscMoveCount=++moveCount;moveId=moveListener.subscribe(onMove);}if(options.onChange){listen(elm,CHANGE,onChange);}if(options.onHoverIn){listen(elm,MOUSE_ENTER,onHoverIn);}if(options.onHoverOut){listen(elm,MOUSE_LEAVE,onHoverOut);}if(options.onKeyDown){listen(elm,KEY_DOWN,onKeyDown);}if(options.onFocus&&win){listen(elm,FOCUS,onFocus);if(!options.keepFocus){var focusCount=win.__mbscFocusCount||0;if(focusCount===0){listen(win,MOUSE_DOWN,setFocusInvisible,true);listen(win,KEY_DOWN,setFocusVisible,true);}win.__mbscFocusCount=++focusCount;}}if(options.onBlur){listen(elm,BLUR,onBlur);}if(options.onDoubleClick){listen(elm,DOUBLE_CLICK,onDoubleClick);}return function(){clearTimeout(activeTimer);if(options.onFocus&&win&&!options.keepFocus){var focusCount=win.__mbscFocusCount||0;win.__mbscFocusCount=--focusCount;if(focusCount<=0){unlisten(win,MOUSE_DOWN,setFocusInvisible);unlisten(win,KEY_DOWN,setFocusVisible);}}if(document){var moveCount=document.__mbscMoveCount||0;document.__mbscMoveCount=--moveCount;if(document.__mbscMoveObs){document.__mbscMoveObs.unsubscribe(moveId);}if(moveCount<=0){delete document.__mbscMoveCount;delete document.__mbscMoveObs;unlisten(document,TOUCH_MOVE,onTouchMove,{passive:false});}}unlisten(elm,MOUSE_DOWN,onStart,{passive:true});unlisten(elm,TOUCH_END,onEnd);unlisten(elm,TOUCH_CANCEL,onEnd);unlisten(document,MOUSE_MOVE,onMove);unlisten(document,MOUSE_UP,onEnd);unlisten(document,CONTEXTMENU,onContextMenu);unlisten(elm,CHANGE,onChange);unlisten(elm,MOUSE_ENTER,onHoverIn);unlisten(elm,MOUSE_LEAVE,onHoverOut);unlisten(elm,KEY_DOWN,onKeyDown);unlisten(elm,TOUCH_START,onStart);unlisten(elm,FOCUS,onFocus);unlisten(elm,BLUR,onBlur);unlisten(elm,DOUBLE_CLICK,onDoubleClick);}}var dragObservable=new Observable;function subscribeExternalDrag(handler){return dragObservable.subscribe(handler)}function unsubscribeExternalDrag(key){dragObservable.unsubscribe(key);}var DraggableBase=function(_super){__extends(DraggableBase,_super);function DraggableBase(){return _super!==null&&_super.apply(this,arguments)||this}DraggableBase.prototype._render=function(s){if(s.dragData!==this._prevS.dragData){this._dragData=isString(s.dragData)?JSON.parse(s.dragData.toString()):s.dragData;}};DraggableBase.prototype._updated=function(){var _this=this;var el=this.s.element||this._el;if(this._unlisten===UNDEFINED&&el){el.classList.add("mbsc-draggable");var clone_1;var isDrag_1;var touchTimer_1;var body_1=getDocument(el).body;var moveClone_1=function(ev){clone_1.style.left=ev.endX+"px";clone_1.style.top=ev.endY+"px";};this._unlisten=gestureListener(el,{onEnd:function(ev){if(isDrag_1){var args=__assign({},ev);args.domEvent.preventDefault();args.action="externalDrop";args.event=_this._dragData;args.create=true;args.eventName="onDragEnd";dragObservable.next(args);isDrag_1=false;body_1.removeChild(clone_1);}clearTimeout(touchTimer_1);},onMove:function(ev){var args=__assign({},ev);args.event=_this._dragData;args.clone=clone_1;args.create=true;args.external=true;if(isDrag_1||!args.isTouch){args.domEvent.preventDefault();}if(isDrag_1){moveClone_1(ev);args.eventName="onDragMove";dragObservable.next(args);}else if(Math.abs(args.deltaX)>7||Math.abs(args.deltaY)>7){clearTimeout(touchTimer_1);if(!args.isTouch){moveClone_1(ev);body_1.appendChild(clone_1);args.eventName="onDragStart";dragObservable.next(args);isDrag_1=true;}}},onStart:function(ev){var args=__assign({},ev);if(!isDrag_1){clone_1=el.cloneNode(true);clone_1.classList.add("mbsc-drag-clone");args.event=_this._dragData;args.create=true;args.external=true;if(args.isTouch){touchTimer_1=setTimeout((function(){moveClone_1(ev);body_1.appendChild(clone_1);args.clone=clone_1;args.eventName="onDragModeOn";dragObservable.next(args);args.eventName="onDragStart";dragObservable.next(args);isDrag_1=true;}),350);}}}});}};DraggableBase.prototype._destroy=function(){if(this._unlisten){this._unlisten();}};DraggableBase=__decorate([core.Directive({selector:"[mbsc-drag]"})],DraggableBase);return DraggableBase}(BaseComponent);var id=0;function jsonp(url,callback){if(win){var script_1=doc.createElement("script");var unique_1="mbscjsonp"+ ++id;win[unique_1]=function(data){script_1.parentNode.removeChild(script_1);delete win[unique_1];if(!data){return}callback(data);};script_1.src=url+(url.indexOf("?")>=0?"&":"?")+"callback="+unique_1;doc.body.appendChild(script_1);}}function ajaxGet(url,callback){var request=new XMLHttpRequest;request.open("GET",url,true);request.onload=function(){if(request.status>=200&&request.status<400){callback(JSON.parse(request.response));}};request.onerror=function(){};request.send();}function getJson(url,callback,type){if(type==="jsonp"){jsonp(url,callback);}else {ajaxGet(url,callback);}}var http={getJson:getJson};util.http=http;var localTimezone;function normTimezone(timezone){if(!localTimezone){localTimezone=luxonTimezone.luxon.DateTime.local().zoneName;}return !timezone||timezone==="local"?localTimezone:timezone}var LDate=function(){function LDate(value,timezone){if(timezone===void 0){timezone="utc";}this._mbsc=true;timezone=normTimezone(timezone);var DT=luxonTimezone.luxon.DateTime;var zoneOpt={zone:timezone};this.zone=timezone;if(isUndefined(value)){this.dt=DT.utc().setZone(timezone);}else if(isDate(value)||isNumber(value)){this.dt=DT.fromMillis(+value,zoneOpt);}else if(isString(value)){this.dt=DT.fromISO(value,zoneOpt);}else if(isArray(value)){var keys=["year","month","day","hour","minute","second","millisecond"];var valueObj={};for(var i=0;i<value.length&&i<7;i++){valueObj[keys[i]]=value[i]+(i===1?1:0);}if(DT.fromObject.length===1){this.dt=DT.fromObject(__assign({},valueObj,zoneOpt));}else {this.dt=DT.fromObject(valueObj,zoneOpt);}}}LDate.prototype.clone=function(){return new LDate(this,this.zone)};LDate.prototype.createDate=function(year,month,date,h,min,sec,ms){return luxonTimezone.createDate({displayTimezone:this.zone},year,month,date,h,min,sec,ms)};LDate.prototype[Symbol.toPrimitive]=function(hint){return this.dt.toJSDate()[Symbol.toPrimitive](hint)};LDate.prototype.toDateString=function(){return this.dt.toFormat("ccc MMM dd yyyy")};LDate.prototype.toISOString=function(){return this.dt.toISO()};LDate.prototype.toJSON=function(){return this.dt.toISO()};LDate.prototype.valueOf=function(){return this.dt.valueOf()};LDate.prototype.getDate=function(){return this.dt.day};LDate.prototype.getDay=function(){return this.dt.weekday%7};LDate.prototype.getFullYear=function(){return this.dt.year};LDate.prototype.getHours=function(){return this.dt.hour};LDate.prototype.getMilliseconds=function(){return this.dt.millisecond};LDate.prototype.getMinutes=function(){return this.dt.minute};LDate.prototype.getMonth=function(){return this.dt.month-1};LDate.prototype.getSeconds=function(){return this.dt.second};LDate.prototype.getTime=function(){return this.valueOf()};LDate.prototype.getTimezoneOffset=function(){return -this.dt.offset};LDate.prototype.getUTCDate=function(){return this.dt.toUTC().day};LDate.prototype.getUTCDay=function(){return this.dt.toUTC().weekday%7};LDate.prototype.getUTCFullYear=function(){return this.dt.toUTC().year};LDate.prototype.getUTCHours=function(){return this.dt.toUTC().hour};LDate.prototype.getUTCMilliseconds=function(){return this.dt.toUTC().millisecond};LDate.prototype.getUTCMinutes=function(){return this.dt.toUTC().minute};LDate.prototype.getUTCMonth=function(){return this.dt.toUTC().month-1};LDate.prototype.getUTCSeconds=function(){return this.dt.toUTC().second};LDate.prototype.setMilliseconds=function(millisecond){return this.setter({millisecond:millisecond}).millisecond};LDate.prototype.setSeconds=function(second,millisecond){return this.setter({second:second,millisecond:millisecond}).second};LDate.prototype.setMinutes=function(minute,second,millisecond){return this.setter({minute:minute,second:second,millisecond:millisecond}).minute};LDate.prototype.setHours=function(hour,minute,second,millisecond){return this.setter({hour:hour,minute:minute,second:second,millisecond:millisecond}).hour};LDate.prototype.setDate=function(day){return this.setter({day:day}).day};LDate.prototype.setMonth=function(month,day){month++;return this.setter({month:month,day:day}).month-1};LDate.prototype.setFullYear=function(year,month,day){return this.setter({year:year,month:month,day:day}).year};LDate.prototype.setTime=function(time){this.dt=luxonTimezone.luxon.DateTime.fromMillis(time);return this.dt.valueOf()};LDate.prototype.setTimezone=function(timezone){timezone=normTimezone(timezone);this.zone=timezone;this.dt=this.dt.setZone(timezone);};LDate.prototype.setUTCMilliseconds=function(ms){return 0};LDate.prototype.setUTCSeconds=function(sec,ms){return 0};LDate.prototype.setUTCMinutes=function(min,sec,ms){return 0};LDate.prototype.setUTCHours=function(hours,min,sec,ms){return 0};LDate.prototype.setUTCDate=function(date){return 0};LDate.prototype.setUTCMonth=function(month,date){return 0};LDate.prototype.setUTCFullYear=function(year,month,date){return 0};LDate.prototype.toUTCString=function(){return ""};LDate.prototype.toTimeString=function(){return ""};LDate.prototype.toLocaleDateString=function(){return ""};LDate.prototype.toLocaleTimeString=function(){return ""};LDate.prototype.setter=function(obj){this.dt=this.dt.set(obj);return this.dt};return LDate}();var luxonTimezone={luxon:UNDEFINED,parse:function(date,s){return new LDate(date,s.dataTimezone||s.displayTimezone)},createDate:function(s,year,month,day,hour,minute,second,millisecond){var displayTimezone=s.displayTimezone;if(isObject(year)||isString(year)||isUndefined(month)){return new LDate(year,displayTimezone)}return new LDate([year||1970,month||0,day||1,hour||0,minute||0,second||0,millisecond||0],displayTimezone)}};function normTimezone$1(timezone){return !timezone||timezone==="local"?momentTimezone.moment.tz.guess():timezone}var MDate=function(){function MDate(value,timezone){this._mbsc=true;this.timezone=normTimezone$1(timezone);this.init(value);}MDate.prototype.clone=function(){return new MDate(this,this.timezone)};MDate.prototype.createDate=function(year,month,date,h,min,sec,ms){return momentTimezone.createDate({displayTimezone:this.timezone},year,month,date,h,min,sec,ms)};MDate.prototype[Symbol.toPrimitive]=function(hint){return this.m.toDate()[Symbol.toPrimitive](hint)};MDate.prototype.toDateString=function(){return this.m.format("ddd MMM DD YYYY")};MDate.prototype.toISOString=function(){return this.m.toISOString()};MDate.prototype.toJSON=function(){return this.m.toISOString()};MDate.prototype.valueOf=function(){return this.m.valueOf()};MDate.prototype.getDate=function(){return this.m.date()};MDate.prototype.getDay=function(){return this.m.day()};MDate.prototype.getFullYear=function(){return this.m.year()};MDate.prototype.getHours=function(){return this.m.hours()};MDate.prototype.getMilliseconds=function(){return this.m.milliseconds()};MDate.prototype.getMinutes=function(){return this.m.minutes()};MDate.prototype.getMonth=function(){return this.m.month()};MDate.prototype.getSeconds=function(){return this.m.seconds()};MDate.prototype.getTime=function(){return this.m.valueOf()};MDate.prototype.getTimezoneOffset=function(){return -this.m.utcOffset()};MDate.prototype.getUTCDate=function(){return this.utc().date()};MDate.prototype.getUTCDay=function(){return this.utc().day()};MDate.prototype.getUTCFullYear=function(){return this.utc().year()};MDate.prototype.getUTCHours=function(){return this.utc().hours()};MDate.prototype.getUTCMilliseconds=function(){return this.utc().milliseconds()};MDate.prototype.getUTCMinutes=function(){return this.utc().minutes()};MDate.prototype.getUTCMonth=function(){return this.utc().month()};MDate.prototype.getUTCSeconds=function(){return this.utc().seconds()};MDate.prototype.setMilliseconds=function(ms){return this.m.set({millisecond:ms}).milliseconds()};MDate.prototype.setSeconds=function(sec,ms){return this.m.set({seconds:sec,milliseconds:ms}).seconds()};MDate.prototype.setMinutes=function(min,sec,ms){return this.m.set({minutes:min,seconds:sec,milliseconds:ms}).minutes()};MDate.prototype.setHours=function(hours,min,sec,ms){return this.m.set({hours:hours,minutes:min,seconds:sec,milliseconds:ms}).hours()};MDate.prototype.setDate=function(date){return this.m.set({date:date}).date()};MDate.prototype.setMonth=function(month,date){return this.m.set({month:month,date:date}).month()};MDate.prototype.setFullYear=function(year,month,date){return this.m.set({year:year,month:month,date:date}).year()};MDate.prototype.setTime=function(time){this.init(time);return this.m.valueOf()};MDate.prototype.setTimezone=function(timezone){this.timezone=normTimezone$1(timezone);this.m.tz(this.timezone);};MDate.prototype.setUTCMilliseconds=function(ms){return 0};MDate.prototype.setUTCSeconds=function(sec,ms){return 0};MDate.prototype.setUTCMinutes=function(min,sec,ms){return 0};MDate.prototype.setUTCHours=function(hours,min,sec,ms){return 0};MDate.prototype.setUTCDate=function(date){return 0};MDate.prototype.setUTCMonth=function(month,date){return 0};MDate.prototype.setUTCFullYear=function(year,month,date){return 0};MDate.prototype.toUTCString=function(){return ""};MDate.prototype.toTimeString=function(){return ""};MDate.prototype.toLocaleDateString=function(){return ""};MDate.prototype.toLocaleTimeString=function(){return ""};MDate.prototype.init=function(input){var tz=momentTimezone.moment.tz;var normInput=isUndefined(input)||isString(input)||isNumber(input)||isArray(input)?input:+input;var isTime=isString(input)&&ISO_8601_TIME.test(input);this.m=isTime?tz(normInput,"HH:mm:ss",this.timezone):tz(normInput,this.timezone);};MDate.prototype.utc=function(){return this.m.clone().utc()};return MDate}();var momentTimezone={moment:UNDEFINED,parse:function(date,s){return new MDate(date,s.dataTimezone||s.displayTimezone)},createDate:function(s,year,month,date,h,min,sec,ms){var displayTimezone=s.displayTimezone;if(isObject(year)||isString(year)||isUndefined(month)){return new MDate(year,displayTimezone)}return new MDate([year||1970,month||0,date||1,h||0,min||0,sec||0,ms||0],displayTimezone)}};var uid=1;function getDataInRange(data,s,firstDay,lastDay,start,end){var startDate=firstDay;var endDate=lastDay;var map=new Map;var dataInRange=[];if(start){startDate=makeDate(start,s);}if(end){endDate=makeDate(end,s);}else if(start){endDate=addDays(startDate,1);}var events=getEventMap(data,startDate,endDate,s);for(var date in events){if(date){for(var _i=0,_a=events[date];_i<_a.length;_i++){var event_1=_a[_i];var eventStart=makeDate(event_1.start,s);var eventEnd=makeDate(event_1.end,s);if(!event_1.start){dataInRange.push(event_1);}else if(!map.has(event_1)&&checkDateRangeOverlap(startDate,endDate,eventStart,eventEnd)){var eventCopy=__assign({},event_1);if(s.dataTimezone||s.displayTimezone){eventCopy.start=eventStart.toISOString();eventCopy.end=eventEnd.toISOString();}map.set(event_1,true);dataInRange.push(eventCopy);}}}}return dataInRange}function getEventId(){return "mbsc_"+uid++}function getEventData(s,event,eventDay,colorEvent,timeFormat,allDayText,toText,resource,isList,isTimeline){var color=event.color||resource&&resource.color;var day=new Date(eventDay);var st=event.start||event.date;var origStart=event.recurring?event.original.start:event.start;var allDay=event.allDay||!origStart;var start=st?makeDate(st,allDay?UNDEFINED:s):null;var end=event.end?makeDate(event.end,allDay?UNDEFINED:s):null;var endDate=getEndDate(s,isList?true:event.allDay,start,end);var isMultiDay=start&&endDate&&!isSameDay(start,endDate);var isFirstDay=isMultiDay?isSameDay(start,day):true;var isLastDay=isMultiDay?isSameDay(endDate,day):true;var fillsAllDay=allDay||!isTimeline&&isMultiDay&&!isFirstDay&&!isLastDay;var eventStart=!fillsAllDay&&(isFirstDay||isTimeline)&&start?formatDate(timeFormat,start):"";var eventEnd=!fillsAllDay&&(isLastDay||isTimeline)&&end?formatDate(timeFormat,end):"";var html=event.title||event.text||"";var title=htmlToText(html);var tooltip=title+(fillsAllDay?"":", "+eventStart+" - "+eventEnd);return {allDay:allDay,allDayText:fillsAllDay?allDayText:"",color:color,currentResource:resource,end:eventEnd,endDate:end?end:start?new Date(start):null,html:html,id:event.id,isMultiDay:isMultiDay,lastDay:!fillsAllDay&&isMultiDay&&isLastDay?toText:"",original:event,position:{},resource:event.resource,slot:event.slot,start:eventStart,startDate:start,style:{background:color,color:colorEvent&&color?getTextColor(color):""},title:title,tooltip:s.showEventTooltip?event.tooltip||tooltip:UNDEFINED,uid:event.id+(event.recurring?"_"+event.nr:"")}}function prepareEvents(events){var data=[];if(events){for(var _i=0,events_1=events;_i<events_1.length;_i++){var event_2=events_1[_i];if(event_2.id===UNDEFINED){event_2.id=getEventId();}data.push(event_2);}}return data}function checkInvalidCollision(invalids,valids,start,end,min,max,invalidateEvent,exclusiveEndDates){if(invalidateEvent==="start-end"){var invalidStart=isInvalid(start,invalids,valids,min,max);var invalidEnd=isInvalid(end,invalids,valids,min,max);if(invalidStart){return invalidStart}if(invalidEnd){return invalidEnd}}else {var until=exclusiveEndDates?end:getDateOnly(addDays(end,1));for(var d=getDateOnly(start);d<until;d.setDate(d.getDate()+1)){var invalid=isInvalid(d,invalids,valids,min,max);if(invalid){return invalid}}}return false}var EventcalendarBase=function(_super){__extends(EventcalendarBase,_super);function EventcalendarBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.state={activeDate:UNDEFINED,eventList:[],popoverList:[],selectedDate:UNDEFINED};_this.print=noop;_this._pageLoad=0;_this._selectedDates={};_this._shouldScrollSchedule=0;_this._update=0;_this._onScroll=throttle((function(){if(!_this._isListScrolling&&!_this._viewChanged){for(var timestamp in _this._listDays){if(_this._listDays[timestamp]){var day=_this._listDays[timestamp];var bottom=day.offsetTop+day.offsetHeight-_this._list.scrollTop;if(bottom>0){if(+timestamp!==_this._selected){_this._shouldSkipScroll=true;_this.setState({selectedDate:+timestamp});_this._selectedChange(new Date(+timestamp));}break}}}}}));_this._isListScrolling=0;_this._onWeekDayClick=function(d){if(d!==_this._selected){_this._skipScheduleScroll=true;_this.setState({selectedDate:d});_this._selectedChange(new Date(d));}};_this._onDayClick=function(args){var d=+args.date;var key=getDateStr(args.date);var state=_this.state;var events=sortEvents(_this._eventMap[key],_this.s.eventOrder);var showEventPopover=_this._showEventPopover;var computed=showEventPopover===UNDEFINED?!_this._showEventLabels&&!_this._showEventList&&!_this._showSchedule:showEventPopover;var showMore=showEventPopover!==false&&_this._moreLabelClicked;var showPopover=(computed||showMore)&&(!state.showPopover||state.showPopover&&d!==state.popoverDate)&&events&&events.length>0;args.events=events;_this._hook("onCellClick",args);_this._moreLabelClicked=false;if(!args.disabled){_this.setState({selectedDate:d});if(d!==_this._selected){_this._skipScheduleScroll=true;_this._selectedChange(args.date);}}if(showPopover){setTimeout((function(){_this._anchor=args.target;_this._popoverClass=_this._popoverClass.replace(" mbsc-popover-hidden","");_this.setState({popoverDate:d,popoverList:events.map((function(event){return _this._getEventData(event,d)})),showPopover:true});}));}};_this._onActiveChange=function(args){var d=_this._getValidDay(args.date,args.dir);var newState={activeDate:d};_this._active=d;_this._update++;_this._skipScheduleScroll=args.pageChange&&!args.nav;if(args.pageChange||args.today){newState.selectedDate=d;_this._selectedChange(new Date(d));}_this.setState(newState);};_this._onGestureStart=function(args){_this._hidePopover();};_this._onDayDoubleClick=function(args){_this._dayClick("onCellDoubleClick",args);};_this._onDayRightClick=function(args){_this._dayClick("onCellRightClick",args);};_this._onCellHoverIn=function(args){args.events=_this._eventMap[getDateStr(args.date)];_this._hook("onCellHoverIn",args);};_this._onCellHoverOut=function(args){args.events=_this._eventMap[getDateStr(args.date)];_this._hook("onCellHoverOut",args);};_this._onEventHoverIn=function(args){_this._hoverTimer=setTimeout((function(){_this._isHover=true;_this._eventClick("onEventHoverIn",args);}),150);};_this._onEventHoverOut=function(args){clearTimeout(_this._hoverTimer);if(_this._isHover){_this._isHover=false;_this._eventClick("onEventHoverOut",args);}};_this._onEventClick=function(args){var close=_this._eventClick("onEventClick",args);if(close!==false){_this._hidePopover();}};_this._onEventDoubleClick=function(args){_this._eventClick("onEventDoubleClick",args);};_this._onEventRightClick=function(args){_this._eventClick("onEventRightClick",args);};_this._onLabelHoverIn=function(args){_this._hoverTimer=setTimeout((function(){_this._isHover=true;_this._labelClick("onEventHoverIn",args);}),150);};_this._onLabelHoverOut=function(args){clearTimeout(_this._hoverTimer);if(_this._isHover){_this._isHover=false;_this._labelClick("onEventHoverOut",args);}};_this._onLabelClick=function(args){_this._hook("onLabelClick",args);_this._labelClick("onEventClick",args);if(!args.label){_this._moreLabelClicked=true;}};_this._onLabelDoubleClick=function(args){_this._labelClick("onEventDoubleClick",args);};_this._onLabelRightClick=function(args){_this._labelClick("onEventRightClick",args);};_this._onCellClick=function(args){_this._cellClick("onCellClick",args);};_this._onCellDoubleClick=function(args){_this._cellClick("onCellDoubleClick",args);};_this._onCellRightClick=function(args){_this._cellClick("onCellRightClick",args);};_this._onPageChange=function(args){setTimeout((function(){_this._hidePopover();}));_this._isPageChange=true;_this._hook("onPageChange",args);};_this._onPageLoading=function(args){var s=_this.s;var eventMap=getEventMap(_this._events,args.viewStart,args.viewEnd,s);_this._colorsMap=getEventMap(s.colors,args.viewStart,args.viewEnd,s);_this._invalidsMap=getEventMap(s.invalid,args.viewStart,args.viewEnd,s,true);_this._validsMap=getEventMap(s.valid,args.viewStart,args.viewEnd,s,true);_this._eventMap=eventMap;_this._firstDay=getFirstDayOfWeek(args.firstDay,s,_this._firstWeekDay);_this._lastDay=args.lastDay;if(!s.labels&&(_this._showEventLabels||_this._showEventCount)){args.inst._labelsMap=eventMap;}else if(!s.marked){args.inst._marksMap=eventMap;}if(args.viewChanged){_this._hook("onPageLoading",args);}};_this._onPageLoaded=function(args){_this._shouldAnimateScroll=_this._isPageChange;_this._isPageChange=false;var setEvents=_this._showEventList||_this._showSchedule||_this._showTimeline;var viewType=_this._showSchedule?_this._scheduleType:_this._showTimeline?_this._timelineType:_this._eventListType;if(setEvents&&!(_this._showCalendar&&viewType==="day")){var s=_this.s;var month=args.month;var isMonthList=_this._showEventList&&month&&viewType==="month";var firstDay=isMonthList?month:args.firstDay;var lastDay=isMonthList?s.getDate(s.getYear(month),s.getMonth(month)+_this._eventListSize,1):args.lastDay;_this._setEventList(firstDay,lastDay);}_this._hook("onPageLoaded",args);};_this._onPopoverClose=function(){_this._hidePopover();};_this._onResize=function(ev){var isListScrollable;if(_this._showEventList&&isBrowser){var cal=ev.target;var height=cal.offsetHeight;var calTop=cal.getBoundingClientRect().top;var listTop=_this._list.getBoundingClientRect().top;isListScrollable=height-listTop+calTop>170;}_this.setState({height:ev.height,isListScrollable:isListScrollable,width:ev.width});};_this._getDragDates=function(start,end,event){var draggedDates={};var firstWeekDay=_this._firstWeekDay;var endDate=getEndDate(_this.s,true,start,end);var until=getDateOnly(addDays(endDate,1));for(var d=getDateOnly(start);d<until;d.setDate(d.getDate()+1)){var weekDay=d.getDay();var offset=firstWeekDay-weekDay>0?7:0;if(isSameDay(start,d)||weekDay===firstWeekDay){draggedDates[getDateStr(d)]={event:event,width:Math.min(getDayDiff(d,endDate)+1,7+firstWeekDay-weekDay-offset)*100};}else {draggedDates[getDateStr(d)]={};}}return draggedDates};_this._onLabelUpdateModeOn=function(args){var event=args.create?_this._tempEvent:args.data;if(event){var start=makeDate(event.start);var end=makeDate(event.end||start);_this.setState({isTouchDrag:true,labelDragData:{draggedEvent:event,originDates:args.external?UNDEFINED:_this._getDragDates(start,end,event)}});}};_this._onLabelUpdateModeOff=function(args){_this.setState({isTouchDrag:false,labelDragData:UNDEFINED});};_this._onLabelUpdateStart=function(args){var s=_this.s;var el=_this._el;var weekNumWidth=_this._showWeekNumbers?el.querySelector(".mbsc-calendar-week-nr").getBoundingClientRect().width:0;var slideRect=el.querySelectorAll(".mbsc-calendar-slide")[1].getBoundingClientRect();var weeksRect=el.querySelector(".mbsc-calendar-week-days").getBoundingClientRect();_this._areaTop=weeksRect.top+weeksRect.height;_this._areaLeft=slideRect.left+(s.rtl?0:weekNumWidth);_this._areaBottom=slideRect.top+slideRect.height;_this._areaRight=_this._areaLeft+slideRect.width-(s.rtl?weekNumWidth:0);_this._calCellHeight=(_this._areaBottom-_this._areaTop)/(_this._calendarType==="month"?6:_this._calendarSize);_this._calCellWidth=(_this._areaRight-_this._areaLeft)/7;var tzOpt=args.create?UNDEFINED:s;var newDay=floor((s.rtl?_this._areaRight-args.endX:args.endX-_this._areaLeft)/_this._calCellWidth);var newWeek=floor((args.endY-_this._areaTop)/_this._calCellHeight);var newStartDay=addDays(_this._firstDay,newWeek*7+newDay);var newStart=createDate(tzOpt,newStartDay.getFullYear(),newStartDay.getMonth(),newStartDay.getDate());var nextDay=addDays(newStart,1);var newEnd=s.exclusiveEndDates?nextDay:createDate(tzOpt,+nextDay-1);if(args.create){var eventData=s.extendDefaultEvent?s.extendDefaultEvent({start:newStart}):UNDEFINED;_this._tempEvent=__assign({allDay:true,end:newEnd,id:getEventId(),start:newStart,title:s.newEventText},args.event,eventData);}};_this._onLabelUpdateMove=function(args){var s=_this.s;var event=args.create?_this._tempEvent:args.data;var tzOpt=event.allDay?UNDEFINED:s;if(args.endY>_this._areaTop&&args.endY<_this._areaBottom&&args.endX>_this._areaLeft&&args.endX<_this._areaRight){var labelDragData=_this.state.labelDragData;var newDay=floor((s.rtl?_this._areaRight-args.endX:args.endX-_this._areaLeft)/_this._calCellWidth);var oldDay=floor((s.rtl?_this._areaRight-args.startX:args.startX-_this._areaLeft)/_this._calCellWidth);var newWeek=floor((args.endY-_this._areaTop)/_this._calCellHeight);var oldWeek=floor((args.startY-_this._areaTop)/_this._calCellHeight);var dayDelta=(newWeek-oldWeek)*7+(newDay-oldDay);if(newDay!==_this._tempDay||newWeek!==_this._tempWeek){var start=makeDate(event.start,tzOpt);var end=makeDate(event.end,tzOpt)||start;var draggedEvent=__assign({},event);var newStart=start;var newEnd=end;if(args.external){var ms=getDayMilliseconds(start);var duration=+end-+start;newStart=createDate(s,+addDays(_this._firstDay,newWeek*7+newDay)+ms);newEnd=createDate(s,+newStart+duration);}else if(args.drag){newStart=addDays(start,dayDelta);newEnd=addDays(end,dayDelta);}else {var rtl=s.rtl?-1:1;var endResize=args.create?newWeek===oldWeek?args.deltaX*rtl>0:dayDelta>0:args.direction==="end";var days=getDayDiff(start,end);if(endResize){newEnd=addDays(end,Math.max(-days,dayDelta));}else {newStart=addDays(start,Math.min(days,dayDelta));}if(newEnd<newStart){if(endResize){newEnd=createDate(tzOpt,newStart);}else {newStart=createDate(tzOpt,newEnd);}}}draggedEvent.start=newStart;draggedEvent.end=newEnd;if(!/mbsc-popover-hidden/.test(_this._popoverClass)){_this._popoverClass=_this._popoverClass+" mbsc-popover-hidden";}_this.setState({labelDragData:{draggedDates:_this._getDragDates(newStart,newEnd,draggedEvent),draggedEvent:draggedEvent,originDates:labelDragData&&labelDragData.originDates}});_this._tempDay=newDay;_this._tempWeek=newWeek;}}};_this._onLabelUpdateEnd=function(args){var state=_this.state;var isCreating=args.create;var dragData=state.labelDragData||{};var event=isCreating?_this._tempEvent:args.data;var draggedEvent=dragData.draggedEvent||event;var origStart=makeDate(event.start);var origEnd=makeDate(event.end);var newStart=makeDate(draggedEvent.start);var newEnd=makeDate(draggedEvent.end);var changed=isCreating||+origStart!==+newStart||+origEnd!==+newEnd;var draggedEventData={allDay:event.allDay,endDate:newEnd,original:event,startDate:newStart};var allowUpdate=changed?_this._onEventDragEnd({action:args.action||(state.labelDragData?"drag":"click"),collision:checkInvalidCollision(_this._invalidsMap,_this._validsMap,newStart,newEnd,_this._minDate,_this._maxDate,_this.s.invalidateEvent,_this.s.exclusiveEndDates),create:isCreating,domEvent:args.domEvent,event:draggedEventData,source:"calendar"}):true;var keepDragMode=state.isTouchDrag&&(!isCreating||allowUpdate);_this.setState({isTouchDrag:keepDragMode,labelDragData:keepDragMode?{draggedEvent:draggedEvent,originDates:allowUpdate?_this._getDragDates(newStart,newEnd,draggedEventData.original):dragData.originDates}:{}});if(args.drag){_this._hidePopover();}_this._tempWeek=-1;_this._tempDay=-1;};_this._onEventDragEnd=function(args){var s=_this.s;var action=args.action;var resource=args.resource;var slot=args.slot;var invalidCollision=args.collision;var isCreating=args.create;var source=args.source;var draggedEvent=args.event;var event=draggedEvent.original;var originalEvent=event.recurring?event.original:event;var oldEvent=__assign({},originalEvent);var eventCopy=__assign({},originalEvent);var origStart=convertTimezone(event.start,s);var start=convertTimezone(draggedEvent.startDate,s);var end=convertTimezone(draggedEvent.endDate,s);var allDay=draggedEvent.allDay;var isRecurring=eventCopy.recurring;if(isRecurring){eventCopy.recurringException=getExceptionList(eventCopy.recurringException).concat([origStart]);}else {eventCopy.allDay=allDay;eventCopy.start=start;eventCopy.end=end;if(resource!==UNDEFINED){eventCopy.resource=resource;}if(slot!==UNDEFINED){eventCopy.slot=slot;}}var allowUpdate=false;var newEvent=isRecurring?__assign({},originalEvent):originalEvent;if(isCreating||isRecurring){if(isRecurring){delete newEvent.recurring;}if(isRecurring||newEvent.id===UNDEFINED){newEvent.id=getEventId();}if(resource!==UNDEFINED){newEvent.resource=resource;}if(slot!==UNDEFINED){newEvent.slot=slot;}newEvent.start=start;newEvent.end=end;newEvent.allDay=allDay;allowUpdate=_this._hook("onEventCreate",{action:action,domEvent:args.domEvent,event:newEvent,source:source})!==false;if(invalidCollision!==false){allowUpdate=false;_this._hook("onEventCreateFailed",{action:action,event:newEvent,invalid:invalidCollision,source:source});}}if(!isCreating||isRecurring){allowUpdate=_this._hook("onEventUpdate",{domEvent:args.domEvent,event:eventCopy,oldEvent:oldEvent,source:source})!==false;if(invalidCollision!==false){allowUpdate=false;_this._hook("onEventUpdateFailed",{event:eventCopy,invalid:invalidCollision,oldEvent:oldEvent,source:source});}}if(allowUpdate){if(isCreating||isRecurring){_this._events.push(newEvent);_this._triggerCreated={action:action,event:newEvent,source:source};}if(!isCreating||isRecurring){if(isRecurring){draggedEvent.id=newEvent.id;draggedEvent.original=newEvent;originalEvent.recurringException=eventCopy.recurringException;}else {originalEvent.start=start;originalEvent.end=end;originalEvent.allDay=allDay;if(resource!==UNDEFINED){originalEvent.resource=resource;}if(slot!==UNDEFINED){originalEvent.slot=slot;}}_this._triggerUpdated={event:originalEvent,oldEvent:oldEvent,source:source};}_this._refresh=true;if(source!=="calendar"){var firstDay=void 0;var lastDay=void 0;if(_this._showCalendar&&_this._scheduleType==="day"){firstDay=new Date(_this._selected);lastDay=getDateOnly(addDays(firstDay,1));}else {firstDay=_this._firstDay;lastDay=_this._lastDay;}_this._eventMap=getEventMap(_this._events,firstDay,lastDay,s);_this.forceUpdate();}}return allowUpdate};_this._onExternalDrag=function(args){if(_this.s.externalDrop&&_this._showCalendar){switch(args.eventName){case"onDragModeOff":_this._onLabelUpdateModeOff(args);break;case"onDragModeOn":_this._onLabelUpdateModeOn(args);break;case"onDragStart":_this._onLabelUpdateStart(args);break;case"onDragMove":var clone=args.clone;if(args.endY>_this._areaTop&&args.endY<_this._areaBottom&&args.endX>_this._areaLeft&&args.endX<_this._areaRight){clone.style.display="none";_this._onLabelUpdateMove(args);_this._onCalendar=true;}else if(_this._onCalendar){clone.style.display="table";_this.setState({labelDragData:{}});_this._tempWeek=-1;_this._tempDay=-1;_this._onCalendar=false;}break;case"onDragEnd":if(!(args.endY>_this._areaTop&&args.endY<_this._areaBottom&&args.endX>_this._areaLeft&&args.endX<_this._areaRight)){_this.setState({labelDragData:UNDEFINED});}else {_this._onLabelUpdateEnd(args);}break}}};_this._onEventDelete=function(args){var event=args.event;if(!_this.s.dragToCreate&&!_this.s.clickToCreate){return}if(event.recurring){var originalEvent=event.original;var oldEvent=__assign({},originalEvent);var eventCopy=__assign({},originalEvent);var origStart=convertTimezone(event.start,_this.s);eventCopy.recurringException=getExceptionList(eventCopy.recurringException).concat([origStart]);var allowUpdate=_this._hook("onEventUpdate",{domEvent:args.domEvent,event:eventCopy,oldEvent:oldEvent})!==false;if(allowUpdate){originalEvent.recurringException=eventCopy.recurringException;_this._triggerUpdated={event:originalEvent,oldEvent:oldEvent,source:args.source};}_this.refresh();}else {var allowDelete=_this._hook("onEventDelete",{domEvent:args.domEvent,event:event})!==false;if(allowDelete){_this._events=_this._events.filter((function(ev){return ev.id!==event.id}));_this._triggerDeleted={event:event,source:args.source};_this.refresh();}}};return _this}EventcalendarBase.prototype.addEvent=function(events){var eventsToAdd=isArray(events)?events:[events];var ids=[];var data=prepareEvents(eventsToAdd);for(var _i=0,data_1=data;_i<data_1.length;_i++){var event_3=data_1[_i];ids.push(""+event_3.id);this._events.push(event_3);}this.refresh();return ids};EventcalendarBase.prototype.getEvents=function(start,end){return getDataInRange(this._events,this.s,this._firstDay,this._lastDay,start,end)};EventcalendarBase.prototype.getInvalids=function(start,end){return getDataInRange(this.s.invalid,this.s,this._firstDay,this._lastDay,start,end)};EventcalendarBase.prototype.setEvents=function(events){var ids=[];var data=prepareEvents(events);for(var _i=0,data_2=data;_i<data_2.length;_i++){var event_4=data_2[_i];ids.push(""+event_4.id);}this._events=data;this.refresh();return ids};EventcalendarBase.prototype.removeEvent=function(events){var eventsToRemove=isArray(events)?events:[events];var data=this._events;var len=data.length;for(var _i=0,eventsToRemove_1=eventsToRemove;_i<eventsToRemove_1.length;_i++){var eventToRemove=eventsToRemove_1[_i];var found=false;var i=0;while(!found&&i<len){var event_5=data[i];if(event_5.id===eventToRemove||event_5.id===eventToRemove.id){found=true;data.splice(i,1);}i++;}}this.refresh();};EventcalendarBase.prototype.navigate=function(date,animate){var d=+makeDate(date);var changed=d!==this._selectedDateTime;if(changed){this._shouldAnimateScroll=!!animate;}if(this.s.selectedDate===UNDEFINED){if((this._showSchedule||this._showTimeline)&&!changed){this._shouldScrollSchedule++;this.forceUpdate();}else {this.setState({selectedDate:d});}}else if(changed){this._selectedChange(date);}};EventcalendarBase.prototype.updateEvent=function(events){var eventsToUpdate=isArray(events)?events:[events];var data=this._events;var len=data.length;for(var _i=0,eventsToUpdate_1=eventsToUpdate;_i<eventsToUpdate_1.length;_i++){var eventToUpdate=eventsToUpdate_1[_i];var found=false;var i=0;while(!found&&i<len){var event_6=data[i];if(event_6.id===eventToUpdate.id){found=true;data.splice(i,1,__assign({},eventToUpdate));}i++;}}this.refresh();};EventcalendarBase.prototype.refresh=function(){this._refresh=true;this.forceUpdate();};EventcalendarBase.prototype._isToday=function(d){return isSameDay(new Date(d),new Date)};EventcalendarBase.prototype._render=function(s,state){var _this=this;var prevProps=this._prevS;var showDate=this._showDate;var timezonesChanged=s.displayTimezone!==prevProps.displayTimezone||s.dataTimezone!==prevProps.dataTimezone;var renderList=false;var selected;var selectedDateTime;var selectedDate;this._colorEventList=s.eventTemplate!==UNDEFINED||s.renderEvent!==UNDEFINED?false:s.colorEventList;if(s.exclusiveEndDates===UNDEFINED){s.exclusiveEndDates=!!s.displayTimezone;}if(!isEmpty(s.min)){if(prevProps.min!==s.min){this._minDate=+makeDate(s.min);}}else {this._minDate=-Infinity;}if(!isEmpty(s.max)){if(prevProps.max!==s.max){this._maxDate=+makeDate(s.max);}}else {this._maxDate=Infinity;}if(s.selectedDate!==UNDEFINED){selectedDateTime=+makeDate(s.selectedDate);}else {if(!this._defaultDate){this._defaultDate=+(s.defaultSelectedDate!==UNDEFINED?makeDate(s.defaultSelectedDate):new Date);}selectedDateTime=state.selectedDate||this._defaultDate;}this.eventList=state.eventList;if(s.data!==prevProps.data){this._events=prepareEvents(s.data);this._refresh=true;}if(s.invalid!==prevProps.invalid||s.colors!==prevProps.colors||timezonesChanged){this._refresh=true;}if(s.view!==prevProps.view||s.firstDay!==prevProps.firstDay){var firstDay=s.firstDay;var view=s.view||{};var agenda=view.agenda||{};var calendar=view.calendar||{};var schedule=view.schedule||{};var timeline=view.timeline||{};var eventListSize=+(agenda.size||1);var eventListType=agenda.type||"month";var scheduleSize=+(schedule.size||1);var scheduleType=schedule.type||"week";var scheduleStartDay=schedule.startDay!==UNDEFINED?schedule.startDay:firstDay;var scheduleEndDay=schedule.endDay!==UNDEFINED?schedule.endDay:(firstDay+6)%7;var scheduleStartTime=schedule.startTime;var scheduleEndTime=schedule.endTime;var scheduleTimeCellStep=schedule.timeCellStep||60;var scheduleTimeLabelStep=schedule.timeLabelStep||60;var showCalendar=!!view.calendar;var showEventCount=calendar.count;var showEventList=!!view.agenda;var showSchedule=!!view.schedule;var showScheduleDays=schedule.days!==UNDEFINED?schedule.days:!showCalendar&&showSchedule&&!(scheduleType==="day"&&s.resources&&s.resources.length>1&&scheduleSize<2);var showTimeline=!!view.timeline;var timelineStartDay=timeline.startDay!==UNDEFINED?timeline.startDay:firstDay;var timelineEndDay=timeline.endDay!==UNDEFINED?timeline.endDay:(firstDay+6)%7;var timelineStartTime=timeline.startTime;var timelineEndTime=timeline.endTime;var hasSlots=showTimeline&&!!s.slots&&s.slots.length>0;var timelineListing=timeline.eventList||hasSlots;var timelineSize=+(timeline.size||1);var timelineType=timeline.type||"week";var timelineStep=timelineType==="month"||timelineListing?1440:60;var timelineTimeCellStep=hasSlots?timelineStep:timeline.timeCellStep||timelineStep;var timelineTimeLabelStep=hasSlots?timelineStep:timeline.timeLabelStep||timelineStep;var calendarType=calendar.type||"month";var showEventLabels=calendar.labels!==UNDEFINED?calendar.labels:!showEventList&&!showSchedule&&!showTimeline&&!s.marked&&!(calendarType==="year"||calendarType==="month"&&calendar.size);this._calendarScroll=calendar.scroll;this._calendarSize=calendar.size||1;this._calendarType=calendarType;this._showEventPopover=calendar.popover;this._showOuterDays=calendar.outerDays;this._showWeekNumbers=calendar.weekNumbers;this._popoverClass=calendar.popoverClass||"";this._showScheduleAllDay=schedule.allDay!==UNDEFINED?schedule.allDay:true;if(eventListSize!==this._eventListSize||eventListType!==this._eventListType||showCalendar!==this._showCalendar||showEventCount!==this._showEventCount||showEventLabels!==this._showEventLabels||showEventList!==this._showEventList||scheduleSize!==this._scheduleSize||scheduleType!==this._scheduleType||showSchedule!==this._showSchedule||showScheduleDays!==this._showScheduleDays||scheduleStartDay!==this._scheduleStartDay||scheduleEndDay!==this._scheduleEndDay||scheduleStartTime!==this._scheduleStartTime||scheduleEndTime!==this._scheduleEndTime||scheduleTimeCellStep!==this._scheduleTimeCellStep||scheduleTimeLabelStep!==this._scheduleTimeLabelStep||showTimeline!==this._showTimeline||scheduleStartDay!==this._scheduleStartDay||timelineEndDay!==this._timelineEndDay||timelineStartTime!==this._timelineStartTime||timelineEndTime!==this._timelineEndTime||timelineSize!==this._timelineSize||timelineType!==this._timelineType||timelineTimeCellStep!==this._timelineTimeCellStep||timelineTimeLabelStep!==this._timelineTimeLabelStep||timelineListing!==this._timelineListing){this._refresh=true;}this._eventListSize=eventListSize;this._eventListType=eventListType;this._scheduleType=scheduleType;this._showCalendar=showCalendar;this._showEventCount=showEventCount;this._showEventLabels=showEventLabels;this._showEventList=showEventList;this._showSchedule=showSchedule;this._showScheduleDays=showScheduleDays;this._scheduleStartDay=scheduleStartDay;this._scheduleEndDay=scheduleEndDay;this._scheduleStartTime=scheduleStartTime;this._scheduleEndTime=scheduleEndTime;this._scheduleSize=scheduleSize;this._scheduleTimeCellStep=scheduleTimeCellStep;this._scheduleTimeLabelStep=scheduleTimeLabelStep;this._showTimeline=showTimeline;this._timelineSize=timelineSize;this._timelineType=timelineType;this._timelineStartDay=timelineStartDay;this._timelineEndDay=timelineEndDay;this._timelineListing=timelineListing;this._timelineStartTime=timelineStartTime;this._timelineEndTime=timelineEndTime;this._timelineTimeCellStep=timelineTimeCellStep;this._timelineTimeLabelStep=timelineTimeLabelStep;this._timelineRowHeight=timeline.rowHeight;this._rangeType=showSchedule?scheduleType:showTimeline?timelineType:eventListType;this._rangeStartDay=showSchedule?scheduleStartDay:showTimeline?timelineStartDay:UNDEFINED;this._rangeEndDay=showSchedule?scheduleEndDay:showTimeline?timelineEndDay:UNDEFINED;this._showDate=showSchedule&&scheduleType==="day"||showEventList&&eventListType==="day"&&eventListSize<2;this._firstWeekDay=showSchedule?scheduleStartDay:showTimeline?timelineStartDay:firstDay;this._viewChanged=true;}if(this._refresh||s.locale!==prevProps.locale||s.theme!==prevProps.theme){renderList=true;this._pageLoad++;}if(s.resources!==prevProps.resources){this._resourcesMap=(s.resources||[]).reduce((function(map,res){map[res.id]=res;return map}),{});}if(s.refDate!==prevProps.refDate){this._refDate=makeDate(s.refDate);}if(!this._refDate&&!this._showCalendar&&(this._showSchedule||this._showTimeline)){this._refDate=getDateOnly(new Date);}if(selectedDateTime!==this._selectedDateTime||this._viewChanged){var validated=this._showCalendar&&(this._showSchedule||this._showTimeline||this._showEventList)?+getClosestValidDate(new Date(selectedDateTime),s,this._minDate,this._maxDate,UNDEFINED,UNDEFINED,1):constrain(selectedDateTime,this._minDate,this._maxDate);validated=this._getValidDay(validated);if(selectedDateTime!==validated){selectedDateTime=validated;setTimeout((function(){_this._selectedChange(new Date(selectedDateTime));}));}if(!this._skipScheduleScroll&&selectedDateTime!==this._selectedDateTime){this._shouldScrollSchedule++;}this._selectedDateTime=selectedDateTime;}selectedDate=getDateOnly(new Date(selectedDateTime));selected=+selectedDate;if(selected!==this._selected||showDate!==this._showDate||s.locale!==prevProps.locale||prevProps.dateFormatLong!==s.dateFormatLong){this._selectedDateHeader=this._showDate?formatDate(s.dateFormatLong,selectedDate,s):"";}if(selected!==this._selected){this._shouldScroll=!this._isPageChange&&!this._shouldSkipScroll;this._shouldAnimateScroll=this._shouldAnimateScroll!==UNDEFINED?this._shouldAnimateScroll:this._selected!==UNDEFINED;this._selected=selected;this._selectedDates={};this._selectedDates[selected]=true;this._active=selected;renderList=true;}if(renderList&&this._showCalendar&&(this._eventListType==="day"||this._scheduleType==="day"||this._timelineType==="day")){this._setEventList(selectedDate,addDays(selectedDate,1));}this._refresh=false;this._cssClass=this._className+" mbsc-eventcalendar"+(this._showEventList?" mbsc-eventcalendar-agenda":"")+(this._showSchedule?" mbsc-eventcalendar-schedule":"")+(this._showTimeline?" mbsc-eventcalendar-timeline":"");};EventcalendarBase.prototype._mounted=function(){this._unsubscribe=subscribeExternalDrag(this._onExternalDrag);};EventcalendarBase.prototype._updated=function(){var _this=this;if(this._shouldScroll&&this.state.isListScrollable){this._scrollToDay();this._shouldScroll=false;this._shouldAnimateScroll=UNDEFINED;}if(this._shouldLoadDays){this._shouldLoadDays=false;forEach(this._list.querySelectorAll("[mbsc-timestamp]"),(function(listItem){_this._listDays[listItem.getAttribute("mbsc-timestamp")]=listItem;}));}if(this._shouldEnhance){this._shouldEnhance=this._shouldEnhance==="popover"?this._popoverList:this._list;}if(this._triggerCreated){var created=this._triggerCreated;var target=created.source==="calendar"?this._calendarView._body.querySelector('.mbsc-calendar-table-active .mbsc-calendar-text[data-id="'+created.event.id+'"]'):this._el.querySelector('.mbsc-schedule-event[data-id="'+created.event.id+'"]');this._hook("onEventCreated",__assign({},this._triggerCreated,{target:target}));this._triggerCreated=null;}if(this._triggerUpdated){var updated=this._triggerUpdated;var target=updated.source==="calendar"?this._calendarView._body.querySelector('.mbsc-calendar-table-active .mbsc-calendar-text[data-id="'+updated.event.id+'"]'):this._el.querySelector('.mbsc-schedule-event[data-id="'+updated.event.id+'"]');this._hook("onEventUpdated",__assign({},this._triggerUpdated,{target:target}));this._triggerUpdated=null;}if(this._triggerDeleted){this._hook("onEventDeleted",__assign({},this._triggerDeleted));this._triggerDeleted=null;}if(this._viewChanged){setTimeout((function(){_this._viewChanged=false;}),10);}this._shouldSkipScroll=false;this._skipScheduleScroll=false;};EventcalendarBase.prototype._destroy=function(){unsubscribeExternalDrag(this._unsubscribe);};EventcalendarBase.prototype._getAgendaEvents=function(firstDay,lastDay,eventMap){var _this=this;var events=[];var s=this.s;if(eventMap&&this._showEventList){var _loop_1=function(d){var eventsForDay=eventMap[getDateStr(d)];if(eventsForDay&&eventsForDay.length){var sorted=sortEvents(eventsForDay,s.eventOrder);events.push({date:formatDate(s.dateFormatLong,d,s),events:sorted.map((function(event){return _this._getEventData(event,+d)})),timestamp:+d});}};for(var d=getDateOnly(firstDay);d<lastDay;d.setDate(d.getDate()+1)){_loop_1(d);}}return events};EventcalendarBase.prototype._getEventData=function(event,d){var s=this.s;var res;if(!event.color&&event.resource){var resItem=isArray(event.resource)?event.resource:[event.resource];res=(this._resourcesMap||{})[resItem[0]];}var ev=getEventData(s,event,d,this._colorEventList,s.timeFormat,s.allDayText,s.toText,res,true);ev.html=this._safeHtml(ev.html);return ev};EventcalendarBase.prototype._getValidDay=function(timestamp,dir){if(dir===void 0){dir=1;}var startDay=this._rangeStartDay;var endDay=this._rangeEndDay;if(!this._showCalendar&&this._rangeType==="day"&&startDay!==UNDEFINED&&endDay!==UNDEFINED){var date=new Date(timestamp);var day=date.getDay();var diff=0;if(endDay<startDay?day>endDay&&day<startDay:day>endDay||day<startDay){diff=dir<0?endDay-day:startDay-day;}if(diff){diff+=dir<0?diff>0?-7:0:diff<0?7:0;return +addDays(date,diff)}}return timestamp};EventcalendarBase.prototype._setEventList=function(firstDay,lastDay){var _this=this;setTimeout((function(){_this._eventListHTML=UNDEFINED;_this._shouldScroll=true;_this._listDays=null;_this._scrollToDay(0);_this.setState({eventList:_this._getAgendaEvents(firstDay,lastDay,_this._eventMap)});}));};EventcalendarBase.prototype._hidePopover=function(){this.setState({showPopover:false});};EventcalendarBase.prototype._scrollToDay=function(pos){var _this=this;if(this._list){var to=pos;var animate=void 0;if(pos===UNDEFINED&&this._listDays){var day=this._listDays[this._selected];if(day){to=day.offsetTop;animate=this._shouldAnimateScroll;}}if(to!==UNDEFINED){this._isListScrolling++;smoothScroll(this._list,to,animate,false,false,(function(){setTimeout((function(){_this._isListScrolling--;}),150);}));}}};EventcalendarBase.prototype._selectedChange=function(d){this._emit("selectedDateChange",d);this._hook("onSelectedDateChange",{date:d});};EventcalendarBase.prototype._cellClick=function(name,args){this._hook(name,__assign({target:args.domEvent.currentTarget},args));};EventcalendarBase.prototype._dayClick=function(name,args){var d=getDateStr(args.date);var events=sortEvents(this._eventMap[d],this.s.eventOrder);args.events=events;this._hook(name,args);};EventcalendarBase.prototype._labelClick=function(name,args){if(args.label){this._hook(name,{date:args.date,domEvent:args.domEvent,event:args.label,source:"calendar"});}};EventcalendarBase.prototype._eventClick=function(name,args){args.date=new Date(args.date);return this._hook(name,args)};EventcalendarBase.defaults=__assign({},calendarViewDefaults,{actionableEvents:true,allDayText:"All-day",data:[],dragTimeStep:15,newEventText:"New event",noEventsText:"No events",showControls:true,showEventTooltip:true,toText:"End",view:{calendar:{type:"month"}}});EventcalendarBase._name="Eventcalendar";EventcalendarBase=__decorate([core.Directive({selector:"[mbsc-ec-b]"})],EventcalendarBase);return EventcalendarBase}(BaseComponent);var DEF_ID="mbsc-def";function checkInvalidCollision$1(invalids,start,end,allDay,invalidateEvent,exclusiveEndDates){var onlyStartEnd=invalidateEvent==="start-end";var until=exclusiveEndDates?end:getDateOnly(addDays(end,1));for(var _i=0,_a=Object.keys(invalids);_i<_a.length;_i++){var r=_a[_i];var invalidMap=invalids[r];for(var d=getDateOnly(start);d<until;d.setDate(d.getDate()+1)){var invalidsForDay=invalidMap[getDateStr(d)];if(invalidsForDay){if(invalidsForDay.allDay&&(!onlyStartEnd||isSameDay(d,start)||isSameDay(d,end))){return invalidsForDay.allDay}if(!allDay){for(var _b=0,_c=invalidsForDay.invalids;_b<_c.length;_b++){var inv=_c[_b];if(onlyStartEnd){if(checkDateRangeOverlap(inv.startDate,inv.endDate,start,start,true)){return inv.original}if(checkDateRangeOverlap(inv.startDate,inv.endDate,end,end)){return inv.original}}else if(checkDateRangeOverlap(inv.startDate,inv.endDate,start,end)){return inv.original}}}}}}return false}function calcLayout(s,groups,event,next){var eventAllDay=event.allDay;var eStart=event.startDate;var eEnd=eventAllDay?getEndDate(s,eventAllDay,eStart,event.endDate):event.endDate;var eventStart=eventAllDay?createDate(s,eStart.getFullYear(),eStart.getMonth(),eStart.getDate()):eStart;var eventEnd=eventAllDay?createDate(s,eEnd.getFullYear(),eEnd.getMonth(),eEnd.getDate(),23,59,59,999):eEnd;var pushed=false;for(var _i=0,groups_1=groups;_i<groups_1.length;_i++){var group=groups_1[_i];var i=0;var groupOverlap=false;var groupLevel=void 0;for(var _a=0,group_1=group;_a<group_1.length;_a++){var level=group_1[_a];var overlap=false;for(var _b=0,level_1=level;_b<level_1.length;_b++){var item=level_1[_b];var itemAllDay=item.allDay;var iStart=item.startDate;var iEnd=itemAllDay?getEndDate(s,itemAllDay,iStart,item.endDate):item.endDate;var itemStart=itemAllDay?createDate(s,iStart.getFullYear(),iStart.getMonth(),iStart.getDate()):iStart;var itemEnd=itemAllDay?createDate(s,iEnd.getFullYear(),iEnd.getMonth(),iEnd.getDate(),23,59,59,999):iEnd;if(checkDateRangeOverlap(itemStart,itemEnd,eventStart,eventEnd,true)){overlap=true;groupOverlap=true;if(groupLevel){next[event.uid]=next[event.uid]||i;}else {next[item.uid]=i+1;}}}if(!overlap&&!groupLevel){groupLevel=level;}i++;}if(groupOverlap){if(groupLevel){groupLevel.push(event);}else {group.push([event]);}pushed=true;}}if(!pushed){next[event.uid]=0;groups.push([[event]]);}}function roundStep(v){v=Math.abs(round(v));if(v>60){return round(v/60)*60}if(60%v===0){return v}return [6,10,12,15,20,30].reduce((function(a,b){return Math.abs(b-v)<Math.abs(a-v)?b:a}))}function getEventDimension(startDate,endDate,displayedTime,startTime,endTime){var start=getDayMilliseconds(startDate);var end=getDayMilliseconds(endDate);if(startTime>start){start=startTime;}if(endTime<end){end=endTime;}return (end-start)*100/displayedTime}function getEventTimelineDimension(startDate,endDate,displayedTime,viewStart,viewEnd,startTime,endTime){var start=new Date(startDate);var end=new Date(endDate);var startHour=floor(startTime/ONE_HOUR);var startMin=floor(startTime/ONE_MIN)%60;var endHour=floor(endTime/ONE_HOUR);var endMin=floor(endTime/ONE_MIN)%60;if(+startDate<+viewStart){start=viewStart;}if(+endDate>+viewEnd){end=viewEnd;}if(startTime>getDayMilliseconds(start)){start.setHours(startHour,startMin);}if(endTime<getDayMilliseconds(end)){end.setHours(endHour,endMin);}if(!isSameDay(start,end)){if(getDayMilliseconds(start)>endTime){start.setHours(endHour,endMin);}if(getDayMilliseconds(end)<startTime){end.setHours(startHour,startMin);}}return (+end-+start-(end.getTimezoneOffset()-start.getTimezoneOffset())*6e4-Math.max(getDayDiff(start,end),0)*(ONE_DAY-displayedTime))*100/displayedTime}function getEventStart(startDate,startTime,displayedTime,viewStart){if(viewStart&&viewStart>startDate){startDate=viewStart;}var start=getDayMilliseconds(startDate);if(startTime>start){start=startTime;}return (start-startTime)*100/displayedTime}function getResourceMap(eventsMap,resources,slots,hasResources,hasSlots){eventsMap=eventsMap||{};var eventKeys=Object.keys(eventsMap);var resourceMap={};var resourceIds=resources.map((function(resource){return resource.id}));var slotIds=slots.map((function(s){return s.id}));resourceIds.forEach((function(rid){resourceMap[rid]={};slotIds.forEach((function(sid){resourceMap[rid][sid]={};}));}));var _loop_1=function(timestamp){var events=eventsMap[timestamp];var _loop_2=function(event_1){var eventResource=event_1.resource;var eventSlot=event_1.slot;var res=eventResource===UNDEFINED||!hasResources?resourceIds:isArray(eventResource)?eventResource:[eventResource];var slot=eventSlot===UNDEFINED||!hasSlots?slotIds:[eventSlot];res.forEach((function(rid){var map=resourceMap[rid];if(map){slot.forEach((function(sid){var slotMap=map[sid];if(slotMap){if(!slotMap[timestamp]){slotMap[timestamp]=[];}slotMap[timestamp].push(event_1);}}));}}));};for(var _i=0,events_1=events;_i<events_1.length;_i++){var event_1=events_1[_i];_loop_2(event_1);}};for(var _i=0,eventKeys_1=eventKeys;_i<eventKeys_1.length;_i++){var timestamp=eventKeys_1[_i];_loop_1(timestamp);}return resourceMap}function getCellDate(timestamp,ms){return new Date(+new Date(timestamp)+ms)}var STBase=function(_super){__extends(STBase,_super);function STBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onScroll=function(){};_this._onEventDragModeOn=function(args){var event=args.create?_this._tempEvent:args.event;var resource=args.create?_this._tempResource:args.resource;var slot=args.create?_this._tempSlot:args.slot;_this.setState({dragData:{draggedEvent:event,originDates:args.external?UNDEFINED:_this._getDragDates(event,resource,slot),resource:resource},isTouchDrag:true});};_this._onEventDragModeOff=function(){_this.setState({dragData:UNDEFINED,isTouchDrag:false});};_this._calcGridDimensions=function(){var s=_this.s;var resources=_this._resources;var isTimeline=_this._isTimeline;var daysNr=_this._days*(isTimeline?1:resources.length);var grid=_this._gridCont;var scrollCont=_this._scrollCont;var rect=grid.getBoundingClientRect();var gridRect=scrollCont.getBoundingClientRect();_this._gridLeft=s.rtl?rect.right-grid.scrollWidth:rect.left;_this._gridRight=s.rtl?rect.right:rect.left+grid.scrollWidth;_this._gridTop=rect.top;_this._gridContTop=gridRect.top;_this._gridContBottom=gridRect.bottom;_this._gridContLeft=gridRect.left;_this._gridContRight=gridRect.right;_this._allDayTop=_this._gridContTop;_this._colWidth=grid.scrollWidth/daysNr;_this._colHeight=isTimeline?grid.scrollHeight:rect.height;};_this._onEventDragStart=function(args){var s=_this.s;var isListing=s.eventList;var isTimeline=_this._isTimeline;var resources=_this._resources;var slots=_this._slots;var timeStep=s.dragTimeStep;var grid=_this._gridCont;var startX=args.startX;var startY=args.startY;var groupByResource=_this._groupByResource;var groupCount=groupByResource?_this._days:_this._hasSlots?_this._slots.length:resources.length;_this._resWidth=_this._resCont?_this._resCont.offsetWidth:0;_this._scrollY=0;_this._scrollX=0;_this._calcGridDimensions();var posX=s.rtl?_this._gridRight-startX:startX-_this._gridLeft;var posY=constrain(startY-_this._gridTop,8,_this._colHeight-9);var colIndex=floor(posX/_this._colWidth);var resourceIndex=0;var dayIndex=colIndex;var slotIndex=0;if(!isTimeline){var allDayCont=_this._el.querySelector(".mbsc-schedule-all-day-wrapper");var allDayRect=allDayCont&&allDayCont.getBoundingClientRect();_this._allDayTop=allDayRect?allDayRect.top:_this._gridContTop;resourceIndex=groupByResource?floor(colIndex/groupCount):colIndex%groupCount;dayIndex=groupByResource?colIndex%groupCount:floor(colIndex/groupCount);}else {var rows=grid.querySelectorAll(".mbsc-timeline-row");_this._rowTops=[];slotIndex=floor(posX/(_this._colWidth/slots.length))%slots.length;rows.forEach((function(r,i){var rowTop=r.getBoundingClientRect().top-_this._gridTop;_this._rowTops.push(rowTop);if(posY>rowTop){resourceIndex=i;}}));}if(args.create){var isClick=args.click;var allDay=!isTimeline&&s.showAllDay&&args.endY<_this._gridContTop;var eventDay=addDays(_this._firstDay,dayIndex);var eventLength=!isListing&&(args.external||isClick)?_this._stepCell:timeStep*ONE_MIN;var gridTime=_this._getGridTime(eventDay,posX,posY,dayIndex,isClick?_this._stepCell/ONE_MIN:timeStep);var newStart=allDay||isListing?eventDay:gridTime;var newEnd=roundTime(createDate(allDay?UNDEFINED:s,+newStart+eventLength),isClick?1:timeStep);var resource=args.external?UNDEFINED:resources[resourceIndex];var resourceId=resource?resource.id:UNDEFINED;var slot=args.external?UNDEFINED:slots[slotIndex];var slotId=slot?slot.id:UNDEFINED;var eventData=s.extendDefaultEvent?s.extendDefaultEvent({resource:resourceId,slot:slotId,start:newStart}):UNDEFINED;var newEvent=__assign({allDay:allDay,end:newEnd,id:getEventId(),resource:resource&&resourceId!==DEF_ID?resourceId:UNDEFINED,slot:slot&&slotId!==DEF_ID?slotId:UNDEFINED,start:newStart,title:s.newEventText},eventData,args.event);var ev=_this._getEventData(newEvent,+eventDay,resource);if(args.event){var eventDuration=+ev.endDate-+ev.startDate;ev.startDate=eventDay;ev.endDate=new Date(+eventDay+eventDuration);}_this._tempEvent=ev;_this._tempResource=resourceId;_this._tempSlot=slotId;}};_this._onEventDragMove=function(args){clearTimeout(_this._scrollTimer);var s=_this.s;var rtl=s.rtl;var rtlNr=rtl?-1:1;var slots=_this._slots;var groupByResource=_this._groupByResource;var isTimeline=_this._isTimeline;var dragData=_this.state.dragData;var timeStep=s.dragTimeStep;var timeFormat=s.timeFormat;var isListing=s.eventList;var startX=args.startX;var endX=constrain(args.endX,_this._gridContLeft,_this._gridContRight-1);var endY=constrain(args.endY,_this._gridContTop,_this._gridContBottom-1);var deltaY=endY-args.startY+_this._scrollY;var deltaX=rtl?startX-endX+_this._scrollX:endX-startX+_this._scrollX;var delta=isTimeline?deltaX:deltaY;var daySize=isTimeline?_this._colWidth:_this._colHeight-16;var posX=constrain(rtl?_this._gridRight+_this._scrollX-endX:endX-_this._gridLeft+_this._scrollX,0,_this._gridRight-_this._gridLeft-1);var posY=constrain(endY-_this._gridTop+_this._scrollY,8,_this._colHeight-9);var oldIndex=floor((rtl?_this._gridRight-startX:startX-_this._gridLeft)/_this._colWidth);var newIndex=floor(posX/_this._colWidth);var inAllDay=s.showAllDay&&args.endY<_this._gridContTop;var scrollCont=_this._scrollCont;var oldDayIndex=oldIndex;var newDayIndex=newIndex;var resourceIndex=0;var slotIndex=0;var hasScroll=false;var distBottom=_this._gridContBottom-args.endY;var distTop=args.endY-_this._gridContTop;var distLeft=args.endX-_this._gridContLeft;var distRight=_this._gridContRight-args.endX;var maxScrollH=(scrollCont.scrollWidth-scrollCont.clientWidth)*rtlNr;var rightLimit=rtl?0:maxScrollH;var leftLimit=rtl?maxScrollH:0;if(distBottom<30&&scrollCont.scrollTop<scrollCont.scrollHeight-scrollCont.clientHeight){scrollCont.scrollTop+=5;_this._scrollY+=5;hasScroll=true;}if(distTop<30&&!inAllDay&&scrollCont.scrollTop>0){scrollCont.scrollTop-=5;_this._scrollY-=5;hasScroll=true;}if(distLeft<30+(rtl?0:_this._resWidth)&&scrollCont.scrollLeft>leftLimit){scrollCont.scrollLeft-=5;_this._scrollX-=5*rtlNr;hasScroll=true;}if(distRight<30+(rtl?_this._resWidth:0)&&scrollCont.scrollLeft<rightLimit){scrollCont.scrollLeft+=5;_this._scrollX+=5*rtlNr;hasScroll=true;}if(hasScroll){_this._scrollTimer=setTimeout((function(){_this._onEventDragMove(args);}),20);}if(!isTimeline){var groupCount=groupByResource?_this._days:_this._resources.length;oldDayIndex=groupByResource?oldIndex%groupCount:floor(oldIndex/groupCount);newDayIndex=groupByResource?newIndex%groupCount:floor(newIndex/groupCount);resourceIndex=groupByResource?floor(newIndex/groupCount):newIndex%groupCount;}else {slotIndex=floor(posX/(_this._colWidth/slots.length))%slots.length;_this._rowTops.forEach((function(rowTop,i){if(posY>rowTop){resourceIndex=i;}}));}var event=args.create?_this._tempEvent:args.event;var start=event.startDate;var end=event.endDate;var milliSeconds=_this._time;var timeDelta=floor(milliSeconds*delta/daySize);var slotId=slots[slotIndex].id;var resourceId=_this._resources[resourceIndex].id;var allDay=event.allDay;var tzOpt=allDay?UNDEFINED:s;var addDayOnly=allDay||isListing;var duration=+end-+start;var newStart=start;var newEnd=end;var newDate;var dayDelta=newDayIndex-oldDayIndex;if(args.drag||args.external){allDay=inAllDay||isTimeline&&event.allDay;addDayOnly=inAllDay||isListing||isTimeline&&event.allDay;tzOpt=allDay?UNDEFINED:s;if(event.allDay&&!isTimeline&&!inAllDay||args.external&&!inAllDay){var day=getDateOnly(addDays(start,dayDelta));newStart=_this._getGridTime(day,posX,posY,newDayIndex,timeStep);}else {if(isTimeline&&!addDayOnly){newStart=roundTime(createDate(s,+start+timeDelta+(ONE_DAY-milliSeconds)*dayDelta),timeStep);}else {newStart=roundTime(createDate(tzOpt,+addDays(start,dayDelta)+(addDayOnly?0:timeDelta)),timeStep);}}if(end.getMilliseconds()===999){duration+=1;}newEnd=createDate(tzOpt,+newStart+duration);}else {var gridDelta=isTimeline?0:newIndex-oldIndex;var endResize=args.create?gridDelta?gridDelta>0:delta>0:args.direction==="end";var days=getDayDiff(start,end);var startResource=args.create?_this._tempResource:args.resource;if(!isTimeline&&groupByResource&&startResource!==resourceId&&dragData&&dragData.draggedEvent){dayDelta=getDayDiff(dragData.draggedEvent.startDate,dragData.draggedEvent.endDate)*(endResize?1:-1);}if(endResize){if(isTimeline&&!addDayOnly){newEnd=roundTime(createDate(s,+end+timeDelta+dayDelta*(ONE_DAY-milliSeconds)),timeStep);}else {newDate=addDays(end,Math.max(-days,dayDelta));newEnd=roundTime(createDate(tzOpt,+newDate+(addDayOnly?0:timeDelta)),timeStep);if(!addDayOnly&&(getDayMilliseconds(newEnd)>_this._endTime+1||newEnd>=addDays(getDateOnly(newDate),1))){newEnd=createDate(s,+getDateOnly(newDate)+_this._endTime+1);}}}else {if(isTimeline&&!addDayOnly){newStart=roundTime(createDate(s,+start+timeDelta+dayDelta*(ONE_DAY-milliSeconds)),timeStep);}else {newDate=addDays(start,Math.min(days,dayDelta));newStart=roundTime(createDate(tzOpt,+newDate+(addDayOnly?0:timeDelta)),timeStep);if(!addDayOnly&&(getDayMilliseconds(newStart)<_this._startTime||newStart<getDateOnly(newDate))){newStart=createDate(s,+getDateOnly(newDate)+_this._startTime);}}}resourceId=startResource;if(addDayOnly&&newEnd<newStart){if(endResize){newEnd=createDate(s,newStart);}else {newStart=createDate(s,newEnd);}}if(!addDayOnly&&(newEnd<newStart||Math.abs(+newEnd-+newStart)<timeStep*ONE_MIN)){if(endResize){newEnd=createDate(s,+newStart+timeStep*ONE_MIN);}else {newStart=createDate(s,+newEnd-timeStep*ONE_MIN);}}}if(_this._tempStart!==+newStart||_this._tempEnd!==+newEnd||_this._tempAllDay!==allDay||_this._tempResource!==resourceId||_this._tempSlot!==slotId){var draggedEvent=__assign({},event);draggedEvent.startDate=newStart;draggedEvent.endDate=newEnd;draggedEvent.start=formatDate(timeFormat,newStart);draggedEvent.end=formatDate(timeFormat,newEnd);draggedEvent.allDay=allDay;_this._tempStart=+newStart;_this._tempEnd=+newEnd;_this._tempAllDay=allDay;_this._tempResource=resourceId;_this._tempSlot=slotId;_this.setState({dragData:{draggedDates:_this._getDragDates(draggedEvent,resourceId,slotId),draggedEvent:draggedEvent,originDates:dragData&&dragData.originDates,resource:resourceId,slot:slotId}});}};_this._onEventDragEnd=function(args){clearTimeout(_this._scrollTimer);var s=_this.s;var isCreating=args.create;var state=_this.state;var dragData=state.dragData;if(isCreating&&!dragData){dragData={};dragData.draggedEvent=_this._tempEvent;}if(dragData&&dragData.draggedEvent){var event_2=args.event;var draggedEvent=dragData.draggedEvent;var newStart=draggedEvent.startDate;var newEnd=draggedEvent.endDate;var allDay=draggedEvent.allDay;var origEvent=draggedEvent.original;var oldResource=args.resource;var newResource_1=dragData.resource===UNDEFINED?oldResource:dragData.resource;var eventResource=origEvent.resource===UNDEFINED?newResource_1:origEvent.resource;var oldSlot=isCreating?_this._tempSlot:args.slot;var newSlot=dragData.slot===UNDEFINED?oldSlot:dragData.slot;var invalids={};var changed=isCreating||+newStart!==+event_2.startDate||+newEnd!==+event_2.endDate||allDay!==event_2.allDay||oldResource!==newResource_1||oldSlot!==newSlot;var updatedResource=eventResource;var invalidResources=void 0;if(oldResource!==newResource_1&&!isCreating&&!_this._isSingleResource){if(isArray(eventResource)&&eventResource.length&&newResource_1){var indx=eventResource.indexOf(oldResource);if(eventResource.indexOf(newResource_1)===-1){updatedResource=eventResource.slice();updatedResource.splice(indx,1,newResource_1);}}else {updatedResource=newResource_1;}}if(!updatedResource||!s.resources){invalidResources=_this._resources.map((function(r){return r.id}));}else {invalidResources=isArray(updatedResource)?updatedResource:[updatedResource];}for(var _i=0,invalidResources_1=invalidResources;_i<invalidResources_1.length;_i++){var r=invalidResources_1[_i];if(_this._invalids[r]){invalids[r]=_this._invalids[r][newSlot];}}var allowUpdate=changed?s.onEventDragEnd({action:args.action||(state.dragData?"drag":"click"),collision:checkInvalidCollision$1(invalids,newStart,newEnd,allDay,s.invalidateEvent,s.exclusiveEndDates),create:isCreating,domEvent:args.domEvent,event:draggedEvent,resource:updatedResource!==DEF_ID?updatedResource:UNDEFINED,slot:newSlot!==DEF_ID?newSlot:UNDEFINED,source:_this._isTimeline?"timeline":"schedule"}):true;var keepDragMode=state.isTouchDrag&&(!isCreating||allowUpdate);if(allowUpdate&&keepDragMode&&oldResource!==newResource_1&&!origEvent.color){var newRes=find(_this._resources,(function(r){return r.id===newResource_1}));var resColor=newRes&&newRes.color;if(resColor){draggedEvent.color=resColor;draggedEvent.style.background=resColor;draggedEvent.style.color=getTextColor(resColor);}else {draggedEvent.color=UNDEFINED;draggedEvent.style={};}}_this.setState({dragData:keepDragMode?{draggedEvent:draggedEvent,originDates:allowUpdate?_this._getDragDates(draggedEvent,newResource_1,newSlot):dragData.originDates}:UNDEFINED,isTouchDrag:keepDragMode});_this._tempStart=0;_this._tempEnd=0;_this._tempAllDay=UNDEFINED;}};_this._onExternalDrag=function(args){if(_this.s.externalDrop){var isInArea=args.endY<_this._gridContBottom&&args.endY>_this._allDayTop&&args.endX>_this._gridContLeft&&args.endX<_this._gridContRight;switch(args.eventName){case"onDragModeOff":_this._onEventDragModeOff();break;case"onDragModeOn":_this._onEventDragModeOn(args);break;case"onDragStart":_this._onEventDragStart(args);break;case"onDragMove":var clone=args.clone;if(isInArea){clone.style.display="none";_this._onEventDragMove(args);_this._onCalendar=true;}else if(_this._onCalendar){clearTimeout(_this._scrollTimer);clone.style.display="table";_this.setState({dragData:{}});_this._tempStart=0;_this._tempEnd=0;_this._tempAllDay=UNDEFINED;_this._onCalendar=false;}break;case"onDragEnd":if(isInArea){_this._onEventDragEnd(args);}else {_this.setState({dragData:UNDEFINED,isTouchDrag:false});}break}}};return _this}STBase.prototype._isToday=function(d){return isSameDay(new Date(d),new Date)};STBase.prototype._formatTime=function(v){var format=this.s.timeFormat;var timeFormat=/a/i.test(format)&&this._stepLabel===ONE_HOUR&&v%ONE_HOUR===0?format.replace(/.[m]+/i,""):format;return formatDate(timeFormat,new Date(+new Date(0,0,1)+v))};STBase.prototype._getEventPos=function(event,day){var s=this.s;var tzOpt=event.allDay?UNDEFINED:s;var d=createDate(tzOpt,day.getFullYear(),day.getMonth(),day.getDate());var first=this._firstDay;var last=this._lastDay;var isTimeline=this._isTimeline;var groupByDate=!isTimeline&&!this._groupByResource;var isAllDay=event.allDay;var startTime=this._startTime;var endTime=this._endTime;var start=event.start;var startDate=event.startDate;var end=event.end;var endDate=getEndDate(s,isAllDay,startDate,event.endDate);var adjust=+startDate===+endDate?1:0;if(isAllDay||isTimeline){if(isSameDay(d,startDate)||isSameDay(d,first)||this._hasSlots||groupByDate){var isMultiDay=!isSameDay(startDate,endDate);if(isTimeline&&isMultiDay&&getDayMilliseconds(startDate)>endTime){startDate=new Date(startDate);startDate.setHours(floor(endTime/ONE_HOUR),floor(endTime/ONE_MIN)%60);}var leftPos=getEventStart(startDate,startTime,this._time,first)+"%";var isListing=s.eventList;var firstDay=createDate(tzOpt,first.getFullYear(),first.getMonth(),first.getDate());var lastDay=createDate(tzOpt,last.getFullYear(),last.getMonth(),last.getDate());var width=Math.min(getDayDiff(d,endDate)+1,getDayDiff(d,lastDay))*100;var position=isTimeline?isListing||isAllDay?{left:s.rtl?"":"0",right:s.rtl?"0":"",width:(this._hasSlots?100:width)+"%"}:{height:this._setRowHeight?"":"100%",left:s.rtl?"":leftPos,right:s.rtl?leftPos:"",top:"0",width:getEventTimelineDimension(startDate,endDate,this._time,firstDay,lastDay,startTime,endTime)+"%"}:{width:(isMultiDay&&!groupByDate?width:100)+"%"};var isStartInView=getDayMilliseconds(startDate)<endTime&&endDate>firstDay;var isEndInView=getDayMilliseconds(endDate)+adjust>startTime;if(isAllDay||isListing||isMultiDay&&(isStartInView||isEndInView)||isStartInView&&isEndInView){return {end:end,endDate:endDate,position:position,start:start,startDate:startDate}}}}else {if(startDate<d){start="";startDate=createDate(s,d);}if(endDate>=getDateOnly(addDays(d,1))){end="";endDate=createDate(s,d);endDate.setHours(23,59,59,999);}if(getDayMilliseconds(startDate)<endTime&&getDayMilliseconds(endDate)+adjust>startTime&&endDate>=startDate){var eventHeight=getEventDimension(startDate,endDate,this._time,startTime,endTime);return {cssClass:eventHeight<2?" mbsc-schedule-event-small-height":"",end:end,endDate:endDate,position:{height:eventHeight+"%",top:getEventStart(startDate,startTime,this._time)+"%",width:"100%"},start:start,startDate:startDate}}}return};STBase.prototype._getEventData=function(event,d,resource){var s=this.s;var ev=getEventData(s,event,d,true,s.timeFormat,s.allDayText,"",resource,false,this._isTimeline);ev.html=this._safeHtml(ev.html);if(event.allDay&&+ev.endDate===+ev.startDate){var nextDay=getDateOnly(addDays(ev.startDate,1));ev.endDate=s.exclusiveEndDates?nextDay:createDate(s,+nextDay-1);}return ev};STBase.prototype._getEvents=function(firstDay,lastDay,eventMap){var _this=this;var s=this.s;var days=this._days;var resources=this._resources;var slots=this._slots;var groupByResource=this._groupByResource;var isTimeline=this._isTimeline;var isListing=s.eventList;var scheduleEvents=[];var eventGroupMap={};var eventMaps=getResourceMap(eventMap,resources,slots,!!s.resources,!!s.slots);var eventsForRange={};var eventLabels={};var eventNr;var eventGroup=[];var _loop_3=function(resource){var resourceId=resource.id;var eventRows=0;eventsForRange[resourceId]=[];if(groupByResource||isTimeline){eventGroup=[];scheduleEvents.push(eventGroup);if(!isTimeline||isListing){for(var _i=0,slots_1=slots;_i<slots_1.length;_i++){var slot=slots_1[_i];var slotId=slot.id;var events=eventMaps[resourceId][slotId];eventLabels[slotId]=getLabels(s,events,firstDay,lastDay,-1,days,!isListing,s.startDay,false,s.eventOrder);}}}var _loop_4=function(d){var dstamp=+getDateOnly(d);var dStr=getDateStr(d);if(!groupByResource&&!isTimeline){if(eventGroupMap[dStr]){eventGroup=eventGroupMap[dStr];}else {eventGroup=[];eventGroupMap[dStr]=eventGroup;scheduleEvents.push(eventGroup);}var events=eventMaps[resourceId][DEF_ID];eventLabels[DEF_ID]=getLabels(s,events,d,addDays(d,1),-1,days,true,s.startDay,false,s.eventOrder);}var dailyEvents={allDay:[],day:s.getDay(d),events:{},key:dStr,lastDay:groupByResource||isTimeline?+lastDay:+addDays(d,1),resource:resourceId,timestamp:dstamp};if(!isTimeline||isListing){var _loop_6=function(slot){var slotId=slot.id;dailyEvents.events[slotId]=[];eventNr=0;eventLabels[slotId][dStr].data.forEach((function(_a){var event=_a.event,showText=_a.showText,width=_a.width;if(event){var events=isListing?dailyEvents.events[slotId]:dailyEvents.allDay;var ev=_this._getEventData(event,dstamp,resource);ev.position=isTimeline?{width:(_this._hasSlots?100:width)+"%"}:{width:width+"%"};eventNr++;events.push({event:ev,showText:showText});}}));if(isListing&&eventRows<eventNr){eventRows=eventNr;}};for(var _i=0,slots_2=slots;_i<slots_2.length;_i++){var slot=slots_2[_i];_loop_6(slot);}}var groups=[];var next={};if(!isListing){var eventsForDay=sortEvents(eventMaps[resourceId][DEF_ID][dStr])||[];dailyEvents.events[DEF_ID]=[];for(var _a=0,eventsForDay_1=eventsForDay;_a<eventsForDay_1.length;_a++){var ev=eventsForDay_1[_a];if(!ev.allDay||isTimeline){var event_3=this_1._getEventData(ev,dstamp,resource);var pos=this_1._getEventPos(event_3,d);if(pos){event_3.cssClass=pos.cssClass;event_3.position=pos.position;if(!isTimeline){calcLayout(s,groups,event_3,next);}dailyEvents.events[DEF_ID].push({event:event_3,showText:true});eventsForRange[resourceId].push(event_3);}}}}if(!isTimeline){var _loop_7=function(group){var nr=group.length;group.forEach((function(level,i){for(var _i=0,level_2=level;_i<level_2.length;_i++){var event_4=level_2[_i];var dimension=((next[event_4.uid]||nr)-i)/nr*100;event_4.position.width=dimension+"%";event_4.position[s.rtl?"right":"left"]=i*100/nr+"%";event_4.position[s.rtl?"left":"right"]="auto";}}));};for(var _b=0,groups_3=groups;_b<groups_3.length;_b++){var group=groups_3[_b];_loop_7(group);}}eventGroup.push(dailyEvents);};for(var d=getDateOnly(firstDay);d<lastDay;d.setDate(d.getDate()+1)){_loop_4(d);}if(isTimeline&&!isListing){var groups=[];var next_1={};var variableRow_1=this_1._setRowHeight;for(var _a=0,_b=eventsForRange[resourceId];_a<_b.length;_a++){var event_5=_b[_a];calcLayout(s,groups,event_5,next_1);}var _loop_5=function(group){var nr=group.length;if(variableRow_1&&nr>eventRows){eventRows=nr;}group.forEach((function(level,i){for(var _i=0,level_3=level;_i<level_3.length;_i++){var event_6=level_3[_i];var dimension=((next_1[event_6.uid]||nr)-i)/nr*100;event_6.position.height=variableRow_1?"":dimension+"%";event_6.position.top=variableRow_1?i:i*100/nr+"%";}}));};for(var _c=0,groups_2=groups;_c<groups_2.length;_c++){var group=groups_2[_c];_loop_5(group);}}this_1._eventRows[resourceId]=eventRows||1;};var this_1=this;for(var _i=0,resources_1=resources;_i<resources_1.length;_i++){var resource=resources_1[_i];_loop_3(resource);}return scheduleEvents};STBase.prototype._getInvalids=function(firstDay,lastDay,invalidMap){var s=this.s;var isListing=s.eventList;var invalids={};var invalidMaps=getResourceMap(invalidMap,this._resources,this._slots,!!s.resources,!!s.slots);var minDate=isListing?getDateOnly(new Date(s.minDate)):new Date(s.minDate);var maxDate=isListing?getDateOnly(addDays(new Date(s.maxDate),1)):new Date(s.maxDate);for(var _i=0,_a=this._resources;_i<_a.length;_i++){var resource=_a[_i];var resourceId=resource.id;for(var d=getDateOnly(firstDay);d<lastDay;d.setDate(d.getDate()+1)){var dateKey=getDateStr(d);for(var _b=0,_c=this._slots;_b<_c.length;_b++){var slot=_c[_b];var slotId=slot.id;var invalidsForDay=invalidMaps[resourceId][slotId][dateKey]||[];var dailyInvalids={invalids:[]};if(d<minDate){invalidsForDay.push({end:minDate,start:new Date(d)});}if(d>=getDateOnly(maxDate)){invalidsForDay.push({end:new Date(lastDay),start:maxDate});}for(var _d=0,invalidsForDay_1=invalidsForDay;_d<invalidsForDay_1.length;_d++){var inv=invalidsForDay_1[_d];if(isString(inv)||isDate(inv)){var start=makeDate(inv);var end=new Date(start);inv={allDay:true,end:end,start:start};}var invalidData=this._getEventData(inv,+d,resource);invalidData.cssClass="";invalidData.position=UNDEFINED;if(!invalidData.allDay){var pos=this._getEventPos(invalidData,d);if(pos){if(!this._isTimeline&&getDayMilliseconds(pos.startDate)===0&&new Date(+pos.endDate+1)>=addDays(d,1)){invalidData.allDay=true;}else {invalidData.position=pos.position;if(getDayMilliseconds(pos.startDate)<=this._startTime){invalidData.cssClass+=" mbsc-schedule-invalid-start";}if(getDayMilliseconds(pos.endDate)>=this._endTime){invalidData.cssClass+=" mbsc-schedule-invalid-end";}}}dailyInvalids.invalids.push(invalidData);}if(invalidData.allDay){invalidData.position={};dailyInvalids.allDay=invalidData;dailyInvalids.invalids=[invalidData];break}}if(!invalids[resourceId]){invalids[resourceId]={};}if(!invalids[resourceId][slotId]){invalids[resourceId][slotId]={};}invalids[resourceId][slotId][dateKey]=dailyInvalids;}}}return invalids};STBase.prototype._getColors=function(firstDay,lastDay,colorMap){var s=this.s;var colors={};var colorMaps=getResourceMap(colorMap,this._resources,this._slots,!!s.resources,!!s.slots);for(var _i=0,_a=this._resources;_i<_a.length;_i++){var resource=_a[_i];var resourceId=resource.id;for(var _b=0,_c=this._slots;_b<_c.length;_b++){var slot=_c[_b];var slotId=slot.id;for(var d=getDateOnly(firstDay);d<lastDay;d.setDate(d.getDate()+1)){var dstamp=+getDateOnly(d);var dateKey=getDateStr(d);var colorsForDay=colorMaps[resourceId][slotId][dateKey]||[];var dailyColors={colors:[]};for(var _d=0,colorsForDay_1=colorsForDay;_d<colorsForDay_1.length;_d++){var color=colorsForDay_1[_d];var colorData=this._getEventData(color,dstamp,resource);if(colorData.allDay&&!this._isTimeline){dailyColors.allDay=colorData;}else {var pos=this._getEventPos(colorData,d);if(pos){colorData.position=pos.position;colorData.cssClass="";if(getDayMilliseconds(pos.startDate)<=this._startTime){colorData.cssClass+=" mbsc-schedule-color-start";}if(getDayMilliseconds(pos.endDate)>=this._endTime){colorData.cssClass+=" mbsc-schedule-color-end";}dailyColors.colors.push(colorData);}}colorData.position.background=color.background;colorData.position.color=color.textColor?color.textColor:getTextColor(color.background);}if(!colors[resourceId]){colors[resourceId]={};}if(!colors[resourceId][slotId]){colors[resourceId][slotId]={};}colors[resourceId][slotId][dateKey]=dailyColors;}}}return colors};STBase.prototype._render=function(s,state){var prevS=this._prevS;var isTimeline=this._isTimeline;var selected=new Date(s.selected);var size=+s.size;var stepLabel=roundStep(s.timeLabelStep);var stepCell=roundStep(s.timeCellStep);var firstDay=s.firstDay;var startDay=s.startDay;var endDay=s.endDay;var resources=s.resources;var slots=s.slots;var resourceChange=s.groupBy!==prevS.groupBy||resources!==prevS.resources||this._hierarchyChange;var reloadData=s.rtl!==prevS.rtl||resourceChange;var startTime=this._startTime;var endTime=this._endTime;if(s.startTime!==prevS.startTime||s.endTime!==prevS.endTime||s.timeLabelStep!==prevS.timeLabelStep||s.timeCellStep!==prevS.timeCellStep||this._startTime===UNDEFINED||this._endTime===UNDEFINED){var start=makeDate(s.startTime||"00:00");var end=new Date(+makeDate(s.endTime||"00:00")-1);this._startTime=startTime=getDayMilliseconds(start);this._endTime=endTime=getDayMilliseconds(end);this._time=endTime-startTime+1;this._timesBetween=getArray(floor(stepCell/stepLabel)-1);this._times=[];var timeStep=stepCell*ONE_MIN;var timesFrom=floor(startTime/timeStep)*timeStep;for(var d=timesFrom;d<=endTime;d+=timeStep){this._times.push(d);}reloadData=true;}if(resourceChange||startDay!==prevS.startDay||endDay!==prevS.endDay||slots!==prevS.slots||s.dayNames!==prevS.dayNames||s.eventList!==prevS.eventList||s.getDay!==prevS.getDay||s.refDate!==prevS.refDate||s.rowHeight!==prevS.rowHeight||s.selected!==prevS.selected||s.size!==prevS.size||s.showDays!==prevS.showDays||s.type!==prevS.type){var isDaily=s.type==="day";var isMonthly=s.type==="month";var firstGridDay=void 0;var lastGridDay=void 0;var firstHeaderDay=void 0;var lastHeaderDay=void 0;if(size>1){var opt={eventRange:s.type,eventRangeSize:size,firstDay:s.firstDay,getDate:s.getDate,getDay:s.getDay,getMonth:s.getMonth,getYear:s.getYear,refDate:s.refDate};var pageIndex=getPageIndex(selected,opt);firstGridDay=getFirstPageDay(pageIndex,opt);lastGridDay=getFirstPageDay(pageIndex+1,opt);firstHeaderDay=firstGridDay;lastHeaderDay=lastGridDay;}else {var firstWeekDay=getFirstDayOfWeek(selected,s);firstHeaderDay=addDays(firstWeekDay,startDay-firstDay+(startDay<firstDay?7:0));lastHeaderDay=addDays(firstHeaderDay,endDay-startDay+1+(endDay<startDay?7:0));firstGridDay=isDaily?getDateOnly(selected):isMonthly?new Date(selected.getFullYear(),selected.getMonth(),1):firstHeaderDay;lastGridDay=isDaily?addDays(firstGridDay,1):isMonthly?new Date(selected.getFullYear(),selected.getMonth()+1,1):lastHeaderDay;}this._dayRefs=[];this._isMulti=size>1;this._hasHierarchy=false;this._resources=resources&&resources.length?this._flattenResources(resources,[]):[{id:DEF_ID}];this._hasSlots=isTimeline&&(!!slots&&slots.length>0);this._slots=slots&&slots.length?slots:[{id:DEF_ID}];this._isSingleResource=this._resources.length===1;this._groupByResource=s.groupBy!=="date"&&!(isDaily&&size<2)||this._isSingleResource;this._days=getDayDiff(firstGridDay,lastGridDay);this._firstDay=firstGridDay;this._lastDay=lastGridDay;this._selectedDay=+getDateOnly(selected);this._setRowHeight=s.eventList||s.rowHeight!=="equal";this._shouldAnimateScroll=prevS.selected!==UNDEFINED;this._showTimeIndicator=!isMonthly&&!s.eventList&&(isDaily?isSameDay(new Date,selected):firstGridDay<=new Date&&lastGridDay>=new Date);if(s.showDays||isTimeline){this._weekDays=[];var monthIndex=s.dateFormat.search(/m/i);var yearIndex=s.dateFormat.search(/y/i);var yearFirst=yearIndex<monthIndex;var i=0;var month=-1;var monthNr=-1;var monthDays=0;var first=firstHeaderDay;var last=lastHeaderDay;if(isTimeline&&(isDaily||isMonthly)){first=firstGridDay;last=lastGridDay;}for(var d=getDateOnly(first);d<getDateOnly(last);d.setDate(d.getDate()+1)){var monthTitle="";if(isTimeline&&month!==s.getMonth(d)){if(monthNr!==-1){this._dayRefs[monthNr].monthDays=monthDays;}monthDays=0;monthNr=i;month=s.getMonth(d);var year=s.getYear(d);var monthName=s.monthNames[month];monthTitle=yearFirst?year+" "+monthName:monthName+" "+year;if(i>0){this._weekDays[i-1].last=true;}}this._dayRefs.push({monthIndex:monthNr});this._weekDays.push({date:formatDate(isMonthly||this._isMulti?"D DDD":s.dateFormatLong,d,s),dateKey:getDateStr(d),dateObj:new Date(d),day:s.getDay(d),month:monthTitle,timestamp:+getDateOnly(d)});monthDays++;i++;}if(monthNr!==-1){this._dayRefs[monthNr].monthDays=monthDays;}}reloadData=true;}if(s.colorsMap!==prevS.colorsMap||reloadData){this._colors=this._getColors(this._firstDay,this._lastDay,s.colorsMap);}if(s.eventMap!==prevS.eventMap||reloadData||!this._events){this._eventRows={};this._events=this._getEvents(this._firstDay,this._lastDay,s.eventMap);}if(s.invalidsMap!==prevS.invalidsMap||reloadData){this._invalids=this._getInvalids(this._firstDay,this._lastDay,s.invalidsMap);}var checkEventHeight=isTimeline&&s.eventList&&s.eventMap!==prevS.eventMap;if(s.height!==prevS.height||s.width!==prevS.width||checkEventHeight||reloadData){this._shouldCheckSize=isBrowser&&!!s.height&&!!s.width;}if(s.scroll!==prevS.scroll){this._shouldScroll=true;}this._hasSticky=hasSticky&&!s.rtl;this._hierarchyChange=false;this._stepCell=stepCell*ONE_MIN;this._stepLabel=stepLabel*ONE_MIN;this._dayNames=state.dayNameWidth>49?s.dayNamesShort:s.dayNamesMin;this._displayTime=stepLabel<1440;this._eventHeight=s.eventList?(state.eventHeight||18)+2:state.eventHeight||42;this._headerClass=" mbsc-timeline-header-placeholder mbsc-timeline-header-row-"+(1+(this._isMulti?1:0)+(this._displayTime||this._hasSlots?1:0));};STBase.prototype._mounted=function(){var _this=this;var allowCreate;var allowStart;var validTarget;this._unlisten=gestureListener(this._el,{onDoubleClick:function(args){var s=_this.s;if(validTarget&&s.clickToCreate&&s.clickToCreate!=="single"){args.click=true;_this._onEventDragStart(args);_this._onEventDragEnd(args);}},onEnd:function(args){if(!allowCreate&&allowStart&&_this.s.clickToCreate==="single"){allowCreate=true;args.click=true;_this._onEventDragStart(args);}if(allowCreate){args.domEvent.preventDefault();_this._onEventDragEnd(args);}clearTimeout(_this._touchTimer);allowCreate=false;allowStart=false;},onMove:function(args){var s=_this.s;if(allowCreate&&s.dragToCreate){args.domEvent.preventDefault();_this._onEventDragMove(args);}else if(allowStart&&s.dragToCreate&&(Math.abs(args.deltaX)>7||Math.abs(args.deltaY)>7)){allowCreate=true;_this._onEventDragStart(args);}else {clearTimeout(_this._touchTimer);}},onStart:function(args){var s=_this.s;args.create=true;args.click=false;if(!allowCreate&&(s.dragToCreate||s.clickToCreate)){var targetClasses=args.domEvent.target&&args.domEvent.target.classList||[];validTarget=targetClasses.contains("mbsc-schedule-item")||targetClasses.contains("mbsc-schedule-all-day-item")||targetClasses.contains("mbsc-timeline-column");if(validTarget){if(args.isTouch&&s.dragToCreate){_this._touchTimer=setTimeout((function(){_this._onEventDragStart(args);_this._onEventDragModeOn(args);allowCreate=true;}),350);}else {allowStart=!args.isTouch;}}}}});this._unsubscribe=subscribeExternalDrag(this._onExternalDrag);};STBase.prototype._updated=function(){var _this=this;if(this._shouldScroll){setTimeout((function(){_this._scrollToTime(_this._shouldAnimateScroll);}));this._shouldScroll=false;}if(this._shouldCheckSize){var scrollCont_1=this._scrollCont;var cellHeight_1;var cellWidth_1;var dayNameWidth_1;var eventHeight_1=this.state.eventHeight;if(this._isTimeline){cellWidth_1=this._stepCell*this._gridCont.offsetWidth/(this._time*this._days);var scrollBarSizeH=scrollCont_1.offsetHeight-scrollCont_1.clientHeight;this._headerCont.parentNode.style.bottom=scrollBarSizeH+"px";if(!this._hasSticky&&this._resCont){this._resCont.style.bottom=scrollBarSizeH+"px";}if(this._setRowHeight){var event_7=scrollCont_1.querySelector(".mbsc-schedule-event");if(event_7){eventHeight_1=event_7.clientHeight;}}}else {var gridCol=this._el.querySelector(".mbsc-schedule-column-inner");var dayName=this._el.querySelector(".mbsc-schedule-header-item");cellHeight_1=this._stepCell*gridCol.offsetHeight/this._time;dayNameWidth_1=dayName?dayName.offsetWidth:0;}this._onScroll();this._shouldCheckSize=false;setTimeout((function(){_this.setState({cellHeight:cellHeight_1,cellWidth:cellWidth_1,dayNameWidth:dayNameWidth_1,eventHeight:eventHeight_1,hasScrollX:scrollCont_1.scrollWidth>scrollCont_1.clientWidth,hasScrollY:scrollCont_1.scrollHeight>scrollCont_1.clientHeight});}));}};STBase.prototype._destroy=function(){this._unlisten();unsubscribeExternalDrag(this._unsubscribe);};STBase.prototype._getDragDates=function(event,resourceId,slotId){var dates={};var start=event.startDate;var end=event.endDate;var duration=+end-+start;start=getDateOnly(start);end=this.s.exclusiveEndDates||!event.allDay?end:getDateOnly(addDays(end,1));while(start<end||!duration){var eventForDay=__assign({},event);var pos=this._getEventPos(event,start);if(pos){eventForDay.cssClass=pos.cssClass;eventForDay.start=pos.start;eventForDay.end=pos.end;eventForDay.position=pos.position;dates[resourceId+"__"+(this._isTimeline?slotId+"__":"")+getDateStr(start)]=eventForDay;}start=addDays(start,1);duration=1;}return dates};STBase.prototype._getGridTime=function(day,posX,posY,dayIndex,timeStep){var ms=step(this._isTimeline?floor(this._time*(posX-dayIndex*this._colWidth)/this._colWidth):floor(this._time*(posY-8)/(this._colHeight-16)),timeStep*ONE_MIN);var time=new Date(+new Date(1970,0,1)+this._startTime+ms);return createDate(this.s,day.getFullYear(),day.getMonth(),day.getDate(),time.getHours(),time.getMinutes())};STBase.prototype._scrollToTime=function(animate){var el=this._scrollCont;var isTimeline=this._isTimeline;if(el){var s=this.s;var targetDate=createDate(s,s.selected);targetDate.setHours(s.eventList?0:targetDate.getHours(),0);var eventStart=getEventStart(targetDate,this._startTime,this._time*(isTimeline?this._days:1));var newScrollPos=void 0;if(isTimeline){var left=getDayDiff(this._firstDay,targetDate)*100/this._days+eventStart;newScrollPos=this._gridCont.offsetWidth*left/100;}else {var gridCol=el.querySelector(".mbsc-schedule-column-inner");newScrollPos=gridCol.offsetHeight*eventStart/100;}smoothScroll(el,newScrollPos,animate,isTimeline,s.rtl);}};STBase.prototype._flattenResources=function(resources,flat){for(var _i=0,resources_2=resources;_i<resources_2.length;_i++){var r=resources_2[_i];flat.push(r);if(r.children){this._hasHierarchy=true;if(!r.collapsed){this._flattenResources(r.children,flat);}}}return flat};STBase=__decorate([core.Directive({selector:"[mbsc-st-b]"})],STBase);return STBase}(BaseComponent);var stateObservables={};var ScheduleEventBase=function(_super){__extends(ScheduleEventBase,_super);function ScheduleEventBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onClick=function(ev){_this._triggerClick("onClick",ev);};_this._onRightClick=function(ev){_this._triggerClick("onRightClick",ev);};_this._onDocTouch=function(ev){unlisten(_this._doc,TOUCH_START,_this._onDocTouch);unlisten(_this._doc,MOUSE_DOWN,_this._onDocTouch);_this._isDrag=false;_this._hook("onDragModeOff",{event:_this.s.event});};_this._updateState=function(args){_this.setState(args);};return _this}ScheduleEventBase.prototype._render=function(s,state){var day=new Date(s.timestamp);var event=s.event;var pos=event.position;var startDate=event.startDate;var endDate=getEndDate(s,event.allDay,startDate,event.endDate);var isTimeline=s.isTimeline;var isTimelineListing=s.isListing;var isAllDay=isTimelineListing||event.allDay;var isMultiDay=!isSameDay(startDate,endDate);var isMultiDayStart=isMultiDay&&isSameDay(startDate,day);var isMultiDayEnd=isMultiDay&&isSameDay(endDate,day);var allDayStyle=isAllDay&&(!isTimeline||isTimelineListing);var host=isTimeline?"timeline":"schedule";var gridStartTime=s.gridStartTime;var gridEndTime=s.gridEndTime;var startTime=getDayMilliseconds(startDate);var endTime=getDayMilliseconds(endDate);var hasSlots=isTimeline&&s.slot!==DEF_ID;var lastDay=new Date(s.lastDay);this._isStart=hasSlots||!isMultiDay||isMultiDayStart;this._isEnd=hasSlots||!isMultiDay||(isAllDay||isTimeline?endDate<lastDay:isMultiDayEnd);if(!hasSlots&&!isAllDay&&(gridStartTime>startTime||gridEndTime<startTime)){this._isStart=false;}if(!hasSlots&&!isAllDay&&(gridEndTime<endTime||gridStartTime>endTime)){this._isEnd=false;}this._html=this._content=UNDEFINED;this._isDrag=this._isDrag||s.isDrag;this._rangeText=event.start+" - "+event.end;this._isAllDay=allDayStyle;this._host=host;if(event.allDay||!isTimeline&&isMultiDay&&!isMultiDayStart&&!isMultiDayEnd){this._rangeText=event.allDayText;}this._cssClass="mbsc-schedule-event"+this._theme+this._rtl+(isTimeline?" mbsc-timeline-event":"")+(isTimelineListing?" mbsc-timeline-event-listing":"")+(this._isStart?" mbsc-"+host+"-event-start":"")+(this._isEnd?" mbsc-"+host+"-event-end":"")+(allDayStyle?" mbsc-schedule-event-all-day":"")+(state.hasFocus&&!s.inactive?" mbsc-schedule-event-active":"")+(state.hasHover&&!s.inactive&&!this._isDrag?" mbsc-schedule-event-hover":"")+(s.isDrag?" mbsc-schedule-event-dragging"+(isTimeline?" mbsc-timeline-event-dragging":""):"")+(s.hidden?" mbsc-schedule-event-hidden":"")+(s.inactive?" mbsc-schedule-event-inactive":"");this._style=__assign({},pos,{color:event.color,top:s.eventHeight?pos.top*s.eventHeight+"px":pos.top});var renderer=s.render||s.renderContent;if(renderer){var content=renderer(event);if(isString(content)){this._html=this._safeHtml(content);this._shouldEnhance=true;}else {this._content=content;}}else if(!s.contentTemplate){this._html=event.html;}};ScheduleEventBase.prototype._mounted=function(){var _this=this;var id=this.s.event.uid;var resizeDir;var observable=stateObservables[id];var touchTimer;if(!observable){observable=new Observable;stateObservables[id]=observable;}this._unsubscribe=observable.subscribe(this._updateState);this._doc=getDocument(this._el);this._unlisten=gestureListener(this._el,{keepFocus:true,onBlur:function(){observable.next({hasFocus:false});},onDoubleClick:function(ev){ev.domEvent.stopPropagation();_this._triggerClick("onDoubleClick",ev.domEvent);},onEnd:function(ev){if(_this._isDrag){var s=_this.s;var args=__assign({},ev);args.domEvent.preventDefault();args.event=s.event;args.resource=s.resource;args.slot=s.slot;if(s.resize&&resizeDir){args.resize=true;args.direction=resizeDir;}else if(s.drag){args.drag=true;}_this._hook("onDragEnd",args);if(!s.isDrag){_this._isDrag=false;}if(_this._el&&args.moved){_this._el.blur();}}clearTimeout(touchTimer);resizeDir=UNDEFINED;},onFocus:function(){observable.next({hasFocus:true});},onHoverIn:function(ev){observable.next({hasHover:true});_this._triggerClick("onHoverIn",ev);},onHoverOut:function(ev){observable.next({hasHover:false});_this._triggerClick("onHoverOut",ev);},onKeyDown:function(ev){var event=_this.s.event.original;switch(ev.keyCode){case ENTER:case SPACE:_this._el.click();ev.preventDefault();break;case BACKSPACE:case DELETE:if(_this.state.hasFocus&&event.editable!==false){_this._hook("onDelete",{domEvent:ev,event:event,source:_this._host});}break}},onMove:function(ev){var s=_this.s;var args=__assign({},ev);args.event=s.event;args.resource=s.resource;args.slot=s.slot;if(resizeDir){args.resize=true;args.direction=resizeDir;}else if(s.drag){args.drag=true;}else {return}if(s.event.original.editable===false){return}if(_this._isDrag||!args.isTouch){args.domEvent.preventDefault();}if(_this._isDrag){_this._hook("onDragMove",args);}else if(Math.abs(args.deltaX)>7||Math.abs(args.deltaY)>7){clearTimeout(touchTimer);if(!args.isTouch){_this._isDrag=true;_this._hook("onDragStart",args);}}},onStart:function(ev){var s=_this.s;var args=__assign({},ev);var target=args.domEvent.target;args.event=s.event;args.resource=s.resource;args.slot=s.slot;if(s.resize&&target.classList.contains("mbsc-schedule-event-resize")){resizeDir=target.classList.contains("mbsc-schedule-event-resize-start")?"start":"end";args.resize=true;args.direction=resizeDir;}else if(s.drag){args.drag=true;}else {return}if(s.event.original.editable===false){return}if(_this._isDrag){args.domEvent.stopPropagation();_this._hook("onDragStart",args);}else if(args.isTouch){touchTimer=setTimeout((function(){_this._hook("onDragModeOn",args);_this._hook("onDragStart",args);_this._isDrag=true;}),350);}}});if(this._isDrag){listen(this._doc,TOUCH_START,this._onDocTouch);listen(this._doc,MOUSE_DOWN,this._onDocTouch);}};ScheduleEventBase.prototype._destroy=function(){if(this._el){this._el.blur();}if(this._unsubscribe){var id=this.s.event.uid;var observable=stateObservables[id];observable.unsubscribe(this._unsubscribe);if(!observable.nr){delete stateObservables[id];}}if(this._unlisten){this._unlisten();}unlisten(this._doc,TOUCH_START,this._onDocTouch);unlisten(this._doc,MOUSE_DOWN,this._onDocTouch);};ScheduleEventBase.prototype._triggerClick=function(name,domEvent){var s=this.s;this._hook(name,{date:s.timestamp,domEvent:domEvent,event:s.event.original,resource:s.resource,slot:s.slot,source:this._host});};ScheduleEventBase=__decorate([core.Directive({selector:"[mbsc-sch-ev-b]"})],ScheduleEventBase);return ScheduleEventBase}(BaseComponent);var SchedulerBase=function(_super){__extends(SchedulerBase,_super);function SchedulerBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onScroll=function(){var grid=_this._scrollCont;if(grid){var scrollTop=grid.scrollTop;var scrollLeft="translateX("+-grid.scrollLeft+"px)";var timeCont=_this._timeCont;var allDay=_this._allDayCont;var header=_this._headerCont;var transform=(jsPrefix?jsPrefix+"T":"t")+"ransform";if(allDay){allDay.style[transform]=scrollLeft;}if(timeCont){timeCont.style.marginTop=-scrollTop+"px";}if(header){header.style[transform]=scrollLeft;}if(scrollTop===0){_this.setState({showShadow:false});}else if(!_this.state.showShadow){_this.setState({showShadow:true});}}};return _this}SchedulerBase.prototype._render=function(s,state){_super.prototype._render.call(this,s,state);var stepCell=this._stepCell/ONE_MIN;var startMinutes=floor(this._startTime/ONE_MIN)%stepCell;var endMinutes=floor(this._endTime/ONE_MIN)%stepCell+1;this._largeDayNames=state.dayNameWidth>99;this._startCellStyle=startMinutes%stepCell!==0?{height:(state.cellHeight||50)*((stepCell-startMinutes)%stepCell/stepCell)+"px"}:UNDEFINED;this._endCellStyle=endMinutes%stepCell!==0?{height:(state.cellHeight||50)*(endMinutes%stepCell)/stepCell+"px"}:UNDEFINED;};SchedulerBase=__decorate([core.Directive({selector:"[mbsc-sch-b]"})],SchedulerBase);return SchedulerBase}(STBase);var TimeIndicatorBase=function(_super){__extends(TimeIndicatorBase,_super);function TimeIndicatorBase(){return _super!==null&&_super.apply(this,arguments)||this}TimeIndicatorBase.prototype._mounted=function(){var _this=this;clearInterval(this._timer);this._timer=setInterval((function(){if(_this._zone){_this._zone.runOutsideAngular((function(){_this.forceUpdate();}));}else {_this.forceUpdate();}}),1e4);};TimeIndicatorBase.prototype._destroy=function(){clearInterval(this._timer);};TimeIndicatorBase.prototype._render=function(s){var now=createDate(s);var rtl=s.rtl;var displayedDays=s.displayedDays;var displayedTime=s.displayedTime;var startTime=s.startTime;var time=getDayMilliseconds(now);var dayIndex=getDayDiff(s.firstDay,now);this._time=formatDate(s.timeFormat,now);this._cssClass="mbsc-schedule-time-indicator mbsc-schedule-time-indicator-"+s.orientation+this._theme+this._rtl+" "+(time<startTime||time>startTime+displayedTime?" mbsc-hidden":"");if(s.orientation==="x"){var horiz=dayIndex*100/displayedDays+"%";this._pos={top:(time-startTime)*100/displayedTime+"%"};this._dayPos={left:rtl?"":horiz,right:rtl?horiz:"",width:100/displayedDays+"%"};}else {var pos=(dayIndex*displayedTime+time-startTime)*100/(displayedDays*displayedTime)+"%";this._pos={left:rtl?"":pos,right:rtl?pos:""};}};TimeIndicatorBase=__decorate([core.Directive({selector:"[mbsc-ti-b]"})],TimeIndicatorBase);return TimeIndicatorBase}(BaseComponent);var WeekDayBase=function(_super){__extends(WeekDayBase,_super);function WeekDayBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onClick=function(){var s=_this.s;if(s.selectable){s.onClick(s.timestamp);}};return _this}WeekDayBase.prototype._render=function(s,state){var date=new Date(s.timestamp);this._cssClass="mbsc-schedule-header-item "+this._className+this._theme+this._rtl+this._hb+(s.largeNames?" mbsc-schedule-header-item-large":"")+(s.selected?" mbsc-selected":"")+(state.hasHover?" mbsc-hover":"");this._data={date:date,events:s.events,resource:s.resource,selected:s.selected};this._day=date.getDay();};WeekDayBase.prototype._mounted=function(){var _this=this;this._unlisten=gestureListener(this._el,{onHoverIn:function(){if(_this.s.selectable){_this.setState({hasHover:true});}},onHoverOut:function(){if(_this.s.selectable){_this.setState({hasHover:false});}}});};WeekDayBase.prototype._destroy=function(){if(this._unlisten){this._unlisten();}};WeekDayBase=__decorate([core.Directive({selector:"[mbsc-wd-b]"})],WeekDayBase);return WeekDayBase}(BaseComponent);function makeSticky(){var index;var elms;var elm;var elmLeft;var elmWidth;var monthIndex;var monthWidth;var monthElm;var monthElmLeft;var monthElmWidth;var width;return function(isRtl,dayElms,scrollLeft,dayWidth,stickyMonths,stickyDays){var rtl=isRtl?-1:1;var margin=isRtl?"marginRight":"marginLeft";var reset=dayElms!==elms||dayWidth!==width;var newIndex=Math.max(floor(Math.abs(scrollLeft)/dayWidth),0);var newMonthIndex=monthIndex;width=dayWidth;if(newIndex!==index||reset){elms=dayElms;index=newIndex;if(elm){elm.style.marginLeft="";elm.style.marginRight="";}elm=elms[index].day;elmLeft=index*dayWidth;newMonthIndex=elms[index].monthIndex;if(elm&&stickyDays){elmWidth=elm.offsetWidth;}}if(newMonthIndex!==monthIndex||reset){monthIndex=newMonthIndex;if(monthElm){monthElm.style.marginLeft="";monthElm.style.marginRight="";}monthElm=elms[monthIndex].month;if(monthElm&&stickyMonths){monthElmLeft=monthIndex*dayWidth;monthElmWidth=monthElm.offsetWidth;monthWidth=elms[monthIndex].monthDays*dayWidth;}}if(elm&&stickyDays){elm.style[margin]=Math.min(rtl*(scrollLeft-rtl*elmLeft),dayWidth-elmWidth-3)+"px";}if(monthElm){monthElm.style[margin]=Math.max(0,Math.min(rtl*(scrollLeft-rtl*monthElmLeft),monthWidth-monthElmWidth-3))+"px";}}}var TimelineBase=function(_super){__extends(TimelineBase,_super);function TimelineBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._isTimeline=true;_this._onScroll=function(){var scrollCont=_this._scrollCont;var scrollTop=scrollCont.scrollTop;var scrollLeft=scrollCont.scrollLeft;var grid=_this._gridCont;var resCont=_this._resCont;var header=_this._headerCont;var sticky=hasSticky&&!_this.s.rtl;var transform=(jsPrefix?jsPrefix+"T":"t")+"ransform";if(resCont&&!sticky){resCont.scrollTop=scrollTop;}if(header){var rtl=_this.s.rtl;var gridWidth=grid.offsetWidth;var stickyMonths=_this._isMulti;var stickyDays=_this._hasSlots||_this._stepCell<1440*ONE_MIN;_this._daySticky(rtl,_this._dayRefs,scrollLeft,gridWidth/_this._days,stickyMonths,stickyDays);header.style[transform]="translateX("+-scrollLeft+"px)";}};return _this}TimelineBase.prototype._onParentClick=function(resource){resource.collapsed=!resource.collapsed;this._hierarchyChange=true;this.forceUpdate();};TimelineBase.prototype._render=function(s,state){_super.prototype._render.call(this,s,state);var stepCell=this._stepCell/ONE_MIN;var startMinutes=floor(this._startTime/ONE_MIN)%stepCell;var endMinutes=floor(this._endTime/ONE_MIN)%stepCell+1;if(this._displayTime){this._startCellStyle=startMinutes%stepCell!==0?{width:(state.cellWidth||40)*((stepCell-startMinutes)%stepCell/stepCell)+"px"}:UNDEFINED;this._endCellStyle=endMinutes%stepCell!==0?{width:(state.cellWidth||40)*(endMinutes%stepCell)/stepCell+"px"}:UNDEFINED;}if(!this._daySticky){this._daySticky=makeSticky();}};TimelineBase=__decorate([core.Directive({selector:"[mbsc-tml-b]"})],TimelineBase);return TimelineBase}(STBase);var ButtonBase=function(_super){__extends(ButtonBase,_super);function ButtonBase(){return _super!==null&&_super.apply(this,arguments)||this}ButtonBase.prototype._mounted=function(){var _this=this;this._unlisten=gestureListener(this._el,{click:true,onBlur:function(){_this.setState({hasFocus:false});},onFocus:function(){_this.setState({hasFocus:true});},onHoverIn:function(){if(!_this.s.disabled){_this.setState({hasHover:true});}},onHoverOut:function(){_this.setState({hasHover:false});},onKeyDown:function(ev){switch(ev.keyCode){case ENTER:case SPACE:_this._el.click();ev.preventDefault();break}},onPress:function(){_this.setState({isActive:true});},onRelease:function(){_this.setState({isActive:false});},onStart:function(){return {ripple:_this.s.ripple&&!_this.s.disabled}}});};ButtonBase.prototype._render=function(s,state){var _this=this;var disabled=s.disabled;this._isIconOnly=!!(s.icon||s.iconSvg);this._hasStartIcon=!!(s.startIcon||s.startIconSvg);this._hasEndIcon=!!(s.endIcon||s.endIconSvg);this._tabIndex=disabled?UNDEFINED:s.tabIndex||0;this._cssClass=this._className+" mbsc-reset mbsc-font mbsc-button"+this._theme+this._rtl+" mbsc-button-"+s.variant+(this._isIconOnly?" mbsc-icon-button":"")+(disabled?" mbsc-disabled":"")+(s.color?" mbsc-button-"+s.color:"")+(state.hasFocus&&!disabled?" mbsc-focus":"")+(state.isActive&&!disabled?" mbsc-active":"")+(state.hasHover&&!disabled?" mbsc-hover":"");this._iconClass="mbsc-button-icon"+this._rtl;this._startIconClass=this._iconClass+" mbsc-button-icon-start";this._endIconClass=this._iconClass+" mbsc-button-icon-end";if(s.disabled&&state.hasHover){setTimeout((function(){_this.setState({hasHover:false});}));}};ButtonBase.prototype._destroy=function(){this._unlisten();};ButtonBase.defaults={ripple:false,tag:"button",variant:"standard"};ButtonBase._name="Button";ButtonBase=__decorate([core.Directive({selector:"[mbsc-btn-b]"})],ButtonBase);return ButtonBase}(BaseComponent);var IconBase=function(_super){__extends(IconBase,_super);function IconBase(){return _super!==null&&_super.apply(this,arguments)||this}IconBase.prototype._render=function(s){this._hasChildren=!isString(s.name);this._cssClass=this._className+" mbsc-icon"+this._theme+(s.name&&!this._hasChildren?s.name.indexOf(" ")!==-1?" "+s.name:" mbsc-font-icon mbsc-icon-"+s.name:"");this._svg=s.svg?this._safeHtml(s.svg):UNDEFINED;};IconBase=__decorate([core.Directive({selector:"[mbsc-i-b]"})],IconBase);return IconBase}(BaseComponent);var MbscCustomIcon=function(){function MbscCustomIcon(){}MbscCustomIcon=__decorate([core.Directive({selector:"[mbsc-icon]"})],MbscCustomIcon);return MbscCustomIcon}();var MbscCustomStartIcon=function(){function MbscCustomStartIcon(){}MbscCustomStartIcon=__decorate([core.Directive({selector:"[mbsc-start-icon]"})],MbscCustomStartIcon);return MbscCustomStartIcon}();var MbscCustomEndIcon=function(){function MbscCustomEndIcon(){}MbscCustomEndIcon=__decorate([core.Directive({selector:"[mbsc-end-icon]"})],MbscCustomEndIcon);return MbscCustomEndIcon}();var MbscIcon=function(_super){__extends(MbscIcon,_super);function MbscIcon(){return _super!==null&&_super.apply(this,arguments)||this}MbscIcon.prototype._updated=function(){if(this.s.svg!==this._prevS.svg){this._el.innerHTML=this.s.svg;}_super.prototype._updated.call(this);};__decorate([core.Input(),__metadata("design:type",String)],MbscIcon.prototype,"name",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscIcon.prototype,"svg",void 0);MbscIcon=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-icon",template:"<ng-content></ng-content>"})],MbscIcon);return MbscIcon}(IconBase);var MbscButton=function(_super){__extends(MbscButton,_super);function MbscButton(){return _super!==null&&_super.apply(this,arguments)||this}__decorate([core.ContentChild(MbscCustomIcon,{static:false}),__metadata("design:type",MbscCustomIcon)],MbscButton.prototype,"_customIcon",void 0);__decorate([core.ContentChild(MbscCustomStartIcon,{static:false}),__metadata("design:type",MbscCustomStartIcon)],MbscButton.prototype,"_customStartIcon",void 0);__decorate([core.ContentChild(MbscCustomEndIcon,{static:false}),__metadata("design:type",MbscCustomEndIcon)],MbscButton.prototype,"_customEndIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscButton.prototype,"color",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscButton.prototype,"disabled",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscButton.prototype,"endIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscButton.prototype,"endIconSrc",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscButton.prototype,"endIconSvg",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscButton.prototype,"icon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscButton.prototype,"iconSvg",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscButton.prototype,"iconSrc",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscButton.prototype,"ripple",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscButton.prototype,"startIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscButton.prototype,"startIconSrc",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscButton.prototype,"startIconSvg",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscButton.prototype,"tabIndex",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscButton.prototype,"variant",void 0);MbscButton=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[attr.tabindex]":"_tabIndex","[class]":"_cssClass",role:"button"},selector:"mbsc-button",template:'\n    <mbsc-icon *ngIf="_isIconOnly || _customIcon"\n      [class]="_iconClass"\n      [name]="s.icon"\n      [svg]="s.iconSvg"\n      [theme]="s.theme"\n    >\n      <ng-content select="[mbsc-icon]"></ng-content>\n    </mbsc-icon>\n    <mbsc-icon *ngIf="_hasStartIcon || _customStartIcon"\n      [class]="_startIconClass"\n      [name]="s.startIcon"\n      [svg]="s.startIconSvg"\n      [theme]="s.theme"\n    >\n      <ng-content select="[mbsc-start-icon]"></ng-content>\n    </mbsc-icon>\n    <ng-content></ng-content>\n    <mbsc-icon *ngIf="_hasEndIcon || _customEndIcon"\n      [class]="_endIconClass"\n      [name]="s.endIcon"\n      [svg]="s.endIconSvg"\n      [theme]="s.theme"\n    >\n      <ng-content select="[mbsc-end-icon]"></ng-content>\n    </mbsc-icon>\n  '})],MbscButton);return MbscButton}(ButtonBase);var MbscIconModule=function(){function MbscIconModule(){}MbscIconModule=__decorate([core.NgModule({declarations:[IconBase,MbscIcon,MbscCustomEndIcon,MbscCustomIcon,MbscCustomStartIcon],exports:[MbscIcon,MbscCustomEndIcon,MbscCustomIcon,MbscCustomStartIcon],imports:[common.CommonModule]})],MbscIconModule);return MbscIconModule}();var MbscButtonModule=function(){function MbscButtonModule(){}MbscButtonModule=__decorate([core.NgModule({declarations:[ButtonBase,MbscButton],entryComponents:[MbscButton],exports:[MbscButton],imports:[common.CommonModule,MbscIconModule]})],MbscButtonModule);return MbscButtonModule}();var InstanceServiceBase=function(){function InstanceServiceBase(){this.onInstanceReady=new Observable;this.onComponentChange=new Observable;}Object.defineProperty(InstanceServiceBase.prototype,"instance",{get:function(){return this.inst},set:function(inst){this.inst=inst;this.onInstanceReady.next(inst);},enumerable:true,configurable:true});return InstanceServiceBase}();var MbscInstanceService=function(_super){__extends(MbscInstanceService,_super);function MbscInstanceService(){return _super!==null&&_super.apply(this,arguments)||this}MbscInstanceService=__decorate([core.Injectable()],MbscInstanceService);return MbscInstanceService}(InstanceServiceBase);var CalendarSubscriber=function(){function CalendarSubscriber(instanceService,changeDetector){this.changeDetector=changeDetector;this._cssClass="";if(instanceService){this.setupServices(instanceService);}}Object.defineProperty(CalendarSubscriber.prototype,"cssClass",{get:function(){var theme=this._hostInst&&this._hostInst._theme||"";var newTheme=""+this._cssClass+theme;return newTheme},enumerable:true,configurable:true});Object.defineProperty(CalendarSubscriber.prototype,"calendar",{set:function(inst){this.setupServices(inst._instanceService);},enumerable:true,configurable:true});CalendarSubscriber.prototype.ngOnDestroy=function(){this.cleanupService();};CalendarSubscriber.prototype.setupServices=function(serv){var _this=this;if(serv!==this.instanceService){this.cleanupService();this.instanceService=serv;this._hostInst=serv.instance;if(this._hostInst){this.inst=this._hostInst._calendarView;}this.readyHandler=serv.onInstanceReady.subscribe((function(inst){setTimeout((function(){_this._hostInst=inst;_this.inst=inst._calendarView;_this.changeDetector.markForCheck();}));}));this.changeHandler=serv.onComponentChange.subscribe((function(){setTimeout((function(){_this.changeDetector.markForCheck();}));}));}};CalendarSubscriber.prototype.cleanupService=function(){if(this.instanceService!==UNDEFINED){if(this.changeHandler!==UNDEFINED){this.instanceService.onComponentChange.unsubscribe(this.changeHandler);}if(this.readyHandler!==UNDEFINED){this.instanceService.onInstanceReady.unsubscribe(this.readyHandler);}}};__decorate([core.Input("class"),__metadata("design:type",Object)],CalendarSubscriber.prototype,"_cssClass",void 0);__decorate([core.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],CalendarSubscriber.prototype,"calendar",null);CalendarSubscriber=__decorate([__param(0,core.Optional()),__metadata("design:paramtypes",[MbscInstanceService,core.ChangeDetectorRef])],CalendarSubscriber);return CalendarSubscriber}();var MbscCalendarPrev=function(_super){__extends(MbscCalendarPrev,_super);function MbscCalendarPrev(){return _super!==null&&_super.apply(this,arguments)||this}MbscCalendarPrev=__decorate([core.Component({encapsulation:core.ViewEncapsulation.None,host:{"[class]":"cssClass"},selector:"mbsc-calendar-prev",template:'\n    <mbsc-button *ngIf="inst"\n      [attr.aria-label]="inst.s.prevText"\n      class="mbsc-calendar-button"\n      (click)="inst.prevPage()"\n      [disabled]="inst._isPrevDisabled()"\n      [iconSvg]="inst._prevIcon"\n      [theme]="inst.s.theme"\n      [themeVariant]="inst.s.themeVariant"\n      variant="flat">\n    </mbsc-button>'})],MbscCalendarPrev);return MbscCalendarPrev}(CalendarSubscriber);var MbscCalendarNext=function(_super){__extends(MbscCalendarNext,_super);function MbscCalendarNext(){return _super!==null&&_super.apply(this,arguments)||this}MbscCalendarNext=__decorate([core.Component({encapsulation:core.ViewEncapsulation.None,host:{"[class]":"cssClass"},selector:"mbsc-calendar-next",template:'\n    <mbsc-button *ngIf="inst"\n      [attr.aria-label]="inst.s.nextText"\n      class="mbsc-calendar-button"\n      (click)="inst.nextPage()"\n      [disabled]="inst._isNextDisabled()"\n      [iconSvg]="inst._nextIcon"\n      [theme]="inst.s.theme"\n      [themeVariant]="inst.s.themeVariant"\n      variant="flat"\n    >\n    </mbsc-button>'})],MbscCalendarNext);return MbscCalendarNext}(CalendarSubscriber);var MbscCalendarToday=function(_super){__extends(MbscCalendarToday,_super);function MbscCalendarToday(){return _super!==null&&_super.apply(this,arguments)||this}MbscCalendarToday=__decorate([core.Component({encapsulation:core.ViewEncapsulation.None,host:{"[class]":"cssClass"},selector:"mbsc-calendar-today",template:'\n    <mbsc-button *ngIf="inst && (inst.s.showToday || inst.s.headerTemplate)" class="mbsc-calendar-button mbsc-calendar-button-today"\n      [attr.aria-label]="inst.s.todayText" [theme]="inst.s.theme" [themeVariant]="inst.s.themeVariant"\n      variant="flat" (click)="inst._onTodayClick($event)">\n      {{inst.s.todayText}}\n    </mbsc-button>'})],MbscCalendarToday);return MbscCalendarToday}(CalendarSubscriber);var MbscCalendarNav=function(_super){__extends(MbscCalendarNav,_super);function MbscCalendarNav(){return _super!==null&&_super.apply(this,arguments)||this}MbscCalendarNav=__decorate([core.Component({encapsulation:core.ViewEncapsulation.None,host:{"[class]":"cssClass"},selector:"mbsc-calendar-nav",template:'\n    <ng-container *ngIf="inst">\n      <mbsc-button #pickerBtn *ngFor="let item of inst._title"\n        class="mbsc-calendar-button"\n        (click)="inst._onPickerBtnClick($event)"\n        [theme]="inst.s.theme"\n        [themeVariant]="inst.s.themeVariant"\n        variant="flat">\n      <ng-container *ngIf="inst._hasPicker || inst._view === inst.MONTH_VIEW">\n        <ng-container *ngIf="!item.title">\n          <span *ngIf="inst._yearFirst"\n            [class]="\'mbsc-calendar-title mbsc-calendar-year\' + inst._theme">\n            {{item.yearTitle}}\n          </span>\n          <span\n            [class]="\'mbsc-calendar-title mbsc-calendar-month\' + inst._theme">\n            {{item.monthTitle}}\n          </span>\n          <span *ngIf="!inst._yearFirst"\n            [class]="\'mbsc-calendar-title mbsc-calendar-year\' + inst._theme">\n            {{item.yearTitle}}\n          </span>\n        </ng-container>\n        <span *ngIf="item.title" [class]="\'mbsc-calendar-title\' + inst._theme">\n          {{item.title}}\n        </span>\n      </ng-container>\n      <span *ngIf="!inst._hasPicker && inst._view !== inst.MONTH_VIEW"\n        [class]="\'mbsc-calendar-title\' + inst._theme">\n        {{inst._viewTitle}}\n      </span>\n      <mbsc-icon *ngIf="inst.s.downIcon && inst._pageNr === 1"\n        [svg]="inst._view === inst.MONTH_VIEW ? inst.s.downIcon : inst.s.upIcon"\n        [theme]="inst.s.theme"\n        [themeVariant]="inst.s.themeVariant">\n      </mbsc-icon>\n    </mbsc-button>\n  </ng-container>'})],MbscCalendarNav);return MbscCalendarNav}(CalendarSubscriber);var MbscCalendarHeaderModule=function(){function MbscCalendarHeaderModule(){}MbscCalendarHeaderModule=__decorate([core.NgModule({declarations:[MbscCalendarNav,MbscCalendarNext,MbscCalendarPrev,MbscCalendarToday],exports:[MbscCalendarNav,MbscCalendarNext,MbscCalendarPrev,MbscCalendarToday],imports:[common.CommonModule,MbscButtonModule,MbscIconModule]})],MbscCalendarHeaderModule);return MbscCalendarHeaderModule}();var CalendarDayBase=function(_super){__extends(CalendarDayBase,_super);function CalendarDayBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onClick=function(ev){_this._cellClick("onDayClick",ev);};_this._onRightClick=function(ev){_this._cellClick("onDayRightClick",ev);};_this._onLabelClick=function(args){_this._labelClick("onLabelClick",args);};_this._onLabelDoubleClick=function(args){_this._labelClick("onLabelDoubleClick",args);};_this._onLabelRightClick=function(args){_this._labelClick("onLabelRightClick",args);};_this._onLabelHoverIn=function(args){_this._labelClick("onLabelHoverIn",args);};_this._onLabelHoverOut=function(args){_this._labelClick("onLabelHoverOut",args);};_this._width=function(labelWidth){var s=_this.s;if(labelWidth===UNDEFINED){labelWidth=100;}if(s.dayWidths===UNDEFINED||s.dayIndex===UNDEFINED){return labelWidth+"%"}var n=labelWidth/100;var w=-3;for(var i=s.dayIndex;i<s.dayIndex+n;i++){w+=s.dayWidths[i];}if(_this._el&&(!_this._labelContWidth||s.dayWidths!==_this._prevS.dayWidths)){var labelsCont=_this._el.querySelector(".mbsc-calendar-labels");_this._labelContWidth=labelsCont.getBoundingClientRect().width;}if(_this._labelContWidth){return w/_this._labelContWidth*100+"%"}else {return w+"px"}};return _this}CalendarDayBase.prototype._mounted=function(){var _this=this;var allowCreate;var allowStart;var touchTimer;this._unlisten=gestureListener(this._el,{click:true,onBlur:function(){_this.setState({hasFocus:false});},onDoubleClick:function(args){var s=_this.s;if(s.clickToCreate&&s.clickToCreate!=="single"&&s.labels&&!s.disabled&&s.display){_this._hook("onLabelUpdateStart",args);_this._hook("onLabelUpdateEnd",args);}_this._cellClick("onDayDoubleClick",args.domEvent);},onEnd:function(args){if(allowCreate){args.domEvent.preventDefault();_this._hook("onLabelUpdateEnd",args);allowCreate=false;}clearTimeout(touchTimer);allowCreate=false;allowStart=false;},onFocus:function(){_this.setState({hasFocus:true});},onHoverIn:function(ev){var s=_this.s;if(!s.disabled){_this.setState({hasHover:true});}_this._hook("onHoverIn",{date:new Date(s.date),domEvent:ev,hidden:!s.display,outer:s.outer,target:_this._el});},onHoverOut:function(ev){var s=_this.s;_this.setState({hasHover:false});_this._hook("onHoverOut",{date:new Date(s.date),domEvent:ev,hidden:!s.display,outer:s.outer,target:_this._el});},onKeyDown:function(ev){switch(ev.keyCode){case ENTER:case SPACE:ev.preventDefault();_this._onClick(ev);break}},onMove:function(args){if(allowCreate&&_this.s.dragToCreate){args.domEvent.preventDefault();_this._hook("onLabelUpdateMove",args);}else if(allowStart&&_this.s.dragToCreate&&(Math.abs(args.deltaX)>7||Math.abs(args.deltaY)>7)){allowCreate=!args.isTouch;_this._hook("onLabelUpdateStart",args);}else {clearTimeout(touchTimer);}},onStart:function(args){var s=_this.s;args.create=true;if(!s.disabled&&(s.dragToCreate||s.clickToCreate)&&s.labels&&!allowCreate){var label=closest(args.domEvent.target,".mbsc-calendar-text",_this._el);if(!label){if(args.isTouch&&s.dragToCreate){touchTimer=setTimeout((function(){_this._hook("onLabelUpdateStart",args);_this._hook("onLabelUpdateModeOn",args);allowCreate=true;}),350);}else if(s.clickToCreate==="single"){_this._hook("onLabelUpdateStart",args);allowCreate=true;}else {allowStart=!args.isTouch;}}}}});};CalendarDayBase.prototype._render=function(s,state){var now=new Date;var d=s.date;var colors=s.colors,display=s.display,dragData=s.dragData,hoverEnd=s.hoverEnd,hoverStart=s.hoverStart,labels=s.labels,rangeEnd=s.rangeEnd,rangeStart=s.rangeStart;var date=new Date(d);var dateKey=getDateStr(date);var isToday=isSameDay(now,date);var events=labels&&labels.events;var color=colors&&colors[0];var background=color&&color.background;var highlight=color&&color.highlight;var cellClass="";var highlightClass="";this._draggedLabel=dragData&&dragData.draggedDates&&dragData.draggedDates[dateKey];this._draggedLabelOrig=dragData&&dragData.originDates&&dragData.originDates[dateKey];this._todayClass=isToday?" mbsc-calendar-today":"";this._cellStyles=background&&display?{backgroundColor:background,color:getTextColor(background)}:UNDEFINED;this._circleStyles=highlight?{backgroundColor:highlight,color:getTextColor(color.highlight)}:UNDEFINED;this._ariaLabel=s.type==="day"?(isToday?s.todayText+", ":"")+s.day+", "+s.month+" "+s.text:s.type==="month"?s.month:"";if(display){if(rangeStart&&d>=rangeStart&&d<=(rangeEnd||rangeStart)||rangeEnd&&d<=rangeEnd&&d>=(rangeStart||rangeEnd)){highlightClass=" mbsc-range-day"+(d===(rangeStart||rangeEnd)?" mbsc-range-day-start":"")+(d===(rangeEnd||rangeStart)?" mbsc-range-day-end":"");}if(hoverStart&&hoverEnd&&d>=hoverStart&&d<=hoverEnd){highlightClass+=" mbsc-range-hover"+(d===hoverStart?" mbsc-range-hover-start mbsc-hover":"")+(d===hoverEnd?" mbsc-range-hover-end mbsc-hover":"");}}if(s.marks){s.marks.forEach((function(e){cellClass+=e.cellCssClass?" "+e.cellCssClass:"";}));}if(colors){colors.forEach((function(e){cellClass+=e.cellCssClass?" "+e.cellCssClass:"";}));}if(events){events.forEach((function(e){cellClass+=e.cellCssClass?" "+e.cellCssClass:"";}));}this._cssClass="mbsc-calendar-cell mbsc-calendar-"+s.type+this._theme+this._rtl+this._hb+cellClass+(labels?" mbsc-calendar-day-labels":"")+(colors?" mbsc-calendar-day-colors":"")+(s.outer?" mbsc-calendar-day-outer":"")+(s.hasMarks?" mbsc-calendar-day-marked":"")+(s.disabled?" mbsc-disabled":"")+(display?"":" mbsc-calendar-day-empty")+(s.selected?" mbsc-selected":"")+(state.hasFocus?" mbsc-focus":"")+(state.hasHover&&(d===hoverStart||d===hoverEnd||!hoverStart&&!hoverEnd)?" mbsc-hover":"")+(this._draggedLabel?" mbsc-calendar-day-highlight":"")+highlightClass;this._data={date:date,events:events,selected:s.selected};};CalendarDayBase.prototype._destroy=function(){this._unlisten();};CalendarDayBase.prototype._cellClick=function(name,domEvent){var s=this.s;if(s.display){this._hook(name,{date:new Date(s.date),disabled:s.disabled,domEvent:domEvent,outer:s.outer,selected:s.selected,source:"calendar",target:this._el});}};CalendarDayBase.prototype._labelClick=function(name,args){var s=this.s;args.date=new Date(s.date);args.labels=s.labels.events;this._hook(name,args);};CalendarDayBase=__decorate([core.Directive({selector:"[mbsc-calday-b]"})],CalendarDayBase);return CalendarDayBase}(BaseComponent);var stateObservables$1={};var CalendarLabelBase=function(_super){__extends(CalendarLabelBase,_super);function CalendarLabelBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onClick=function(ev){if(_this._isDrag){ev.stopPropagation();}else {_this._triggerEvent("onClick",ev);}};_this._onRightClick=function(ev){_this._triggerEvent("onRightClick",ev);};_this._onDocTouch=function(ev){unlisten(_this._doc,TOUCH_START,_this._onDocTouch);unlisten(_this._doc,MOUSE_DOWN,_this._onDocTouch);_this._isDrag=false;_this._hook("onDragModeOff",{data:_this.s.event});};_this._updateState=function(args){if(_this.s.showText){_this.setState(args);}};_this._triggerEvent=function(name,ev){_this._hook(name,{domEvent:ev,label:_this.s.event,target:_this._el});};return _this}CalendarLabelBase.prototype._mounted=function(){var _this=this;var opt=this.s;var sEvent=opt.event;var id=sEvent?sEvent.id+(sEvent.nr?"_"+sEvent.nr:""):opt.id;var isPicker=opt.isPicker;var resizeDir;var observable=stateObservables$1[id];if(!observable){observable=new Observable;stateObservables$1[id]=observable;}this._unsubscribe=observable.subscribe(this._updateState);this._doc=getDocument(this._el);this._unlisten=gestureListener(this._el,{keepFocus:true,onBlur:function(){if(!isPicker){observable.next({hasFocus:false});}},onDoubleClick:function(ev){ev.domEvent.stopPropagation();_this._hook("onDoubleClick",{domEvent:ev.domEvent,label:_this.s.event,target:_this._el});},onEnd:function(ev){if(_this._isDrag){var s=_this.s;var args=__assign({},ev);args.domEvent.preventDefault();args.data=s.event;if(s.resize&&resizeDir){args.resize=true;args.direction=resizeDir;}else if(s.drag){args.drag=true;}_this._hook("onDragEnd",args);if(!s.isUpdate){_this._isDrag=false;}}clearTimeout(_this._touchTimer);resizeDir=UNDEFINED;},onFocus:function(){if(!isPicker){observable.next({hasFocus:true});}},onHoverIn:function(ev){if(_this._isDrag||isPicker){return}observable.next({hasHover:true});_this._triggerEvent("onHoverIn",ev);},onHoverOut:function(ev){observable.next({hasHover:false});_this._triggerEvent("onHoverOut",ev);},onKeyDown:function(ev){var event=_this.s.event;switch(ev.keyCode){case ENTER:case SPACE:_this._el.click();ev.preventDefault();break;case BACKSPACE:case DELETE:if(event&&event.editable!==false){_this._hook("onDelete",{domEvent:ev,event:event,source:"calendar"});}break}},onMove:function(ev){var s=_this.s;var args=__assign({},ev);args.data=s.event;if(resizeDir){args.resize=true;args.direction=resizeDir;}else if(s.drag){args.drag=true;}else {return}if(!s.event||s.event.editable===false){return}if(_this._isDrag){args.domEvent.preventDefault();_this._hook("onDragMove",args);}else if(Math.abs(args.deltaX)>7||Math.abs(args.deltaY)>7){clearTimeout(_this._touchTimer);if(!args.isTouch){_this._isDrag=true;_this._hook("onDragStart",args);}}},onStart:function(ev){var s=_this.s;var args=__assign({},ev);var target=args.domEvent.target;args.data=s.event;if(s.resize&&target.classList.contains("mbsc-calendar-label-resize")){resizeDir=target.classList.contains("mbsc-calendar-label-resize-start")?"start":"end";args.resize=true;args.direction=resizeDir;}else if(s.drag){args.drag=true;}else {return}if(!s.event||s.event.editable===false){return}if(_this._isDrag||!args.isTouch){args.domEvent.stopPropagation();}if(_this._isDrag){_this._hook("onDragStart",args);}else if(args.isTouch){_this._touchTimer=setTimeout((function(){_this._hook("onDragModeOn",args);_this._hook("onDragStart",args);_this._isDrag=true;}),350);}}});if(this._isDrag){listen(this._doc,TOUCH_START,this._onDocTouch);listen(this._doc,MOUSE_DOWN,this._onDocTouch);}};CalendarLabelBase.prototype._destroy=function(){if(this._unsubscribe){var s=this.s;var event_1=s.event;var id=event_1?event_1.id+(event_1.nr?"_"+event_1.nr:""):s.id;var observable=stateObservables$1[id];observable.unsubscribe(this._unsubscribe);if(!observable.nr){delete stateObservables$1[id];}}unlisten(this._doc,TOUCH_START,this._onDocTouch);unlisten(this._doc,MOUSE_DOWN,this._onDocTouch);if(this._unlisten){this._unlisten();}};CalendarLabelBase.prototype._render=function(s,state){var event=s.event;var d=new Date(s.date);var render=s.render||s.renderContent;var start;var end;var isMultiDay=false;var isStart;var isEnd;var isEndStyle;this._isDrag=this._isDrag||s.isUpdate;this._html=this._content=UNDEFINED;this._title=s.more||s.count||!s.showEventTooltip?UNDEFINED:htmlToText(event.tooltip||event.title||event.text);this._tabIndex=s.isActiveMonth&&s.showText&&!s.count&&!s.isPicker?0:-1;if(event){var allDay=event.allDay;var tzOpt=allDay?UNDEFINED:s;start=event.start?makeDate(event.start,tzOpt):null;end=event.end?makeDate(event.end,tzOpt):null;var endTime=start&&end&&getEndDate(s,true,start,end);var firstDayOfWeek=getFirstDayOfWeek(d,s);var lastDayOfWeek=addDays(firstDayOfWeek,7);var lastDay=s.lastDay&&s.lastDay<lastDayOfWeek?s.lastDay:lastDayOfWeek;isMultiDay=start&&endTime&&!isSameDay(start,endTime);isStart=!isMultiDay||start&&isSameDay(start,d);isEnd=!isMultiDay||endTime&&isSameDay(endTime,d);isEndStyle=!isMultiDay||(s.showText?endTime<lastDay:isEnd);this._hasResizeStart=s.resize&&isStart;this._hasResizeEnd=s.resize&&isEndStyle;var color=event.color;if(!color&&event.resource&&s.resourcesMap){var resource=s.resourcesMap[isArray(event.resource)?event.resource[0]:event.resource];color=resource&&resource.color;}if(s.showText){this._textColor=color?getTextColor(color):UNDEFINED;}this._color=s.render||s.template?UNDEFINED:event.textColor&&!color?"transparent":color;}if(event&&s.showText&&(render||s.contentTemplate||s.template)){var fillsAllDay=event.allDay||!start||isMultiDay&&!isStart&&!isEnd;this._data={end:!fillsAllDay&&isEnd&&end?formatDate(s.timeFormat,end,s):"",id:event.id,isMultiDay:isMultiDay,original:event,start:!fillsAllDay&&isStart&&start?formatDate(s.timeFormat,start,s):"",title:this._title};if(render){var content=render(this._data);if(isString(content)){this._html=this._safeHtml(content);this._shouldEnhance=true;}else {this._content=content;}}}else {this._html=this._safeHtml(s.more||s.count||(s.showText?event.title||event.text||"":""));}this._cssClass="mbsc-calendar-text"+this._theme+this._rtl+(state.hasFocus&&!s.inactive?" mbsc-calendar-label-active ":"")+(state.hasHover&&!s.inactive&&!this._isDrag?" mbsc-calendar-label-hover":"")+(s.more?" mbsc-calendar-text-more":s.render||s.template?" mbsc-calendar-custom-label":" mbsc-calendar-label")+(s.inactive?" mbsc-calendar-label-inactive":"")+(s.isUpdate?" mbsc-calendar-label-dragging":"")+(s.hidden?" mbsc-calendar-label-hidden":"")+(isStart?" mbsc-calendar-label-start":"")+(isEndStyle?" mbsc-calendar-label-end":"");};CalendarLabelBase=__decorate([core.Directive({selector:"[mbsc-callbl-b]"})],CalendarLabelBase);return CalendarLabelBase}(BaseComponent);var MonthViewBase=function(_super){__extends(MonthViewBase,_super);function MonthViewBase(){return _super!==null&&_super.apply(this,arguments)||this}MonthViewBase.prototype._isActive=function(d){return this.s.isActive&&d===this.s.activeDate};MonthViewBase.prototype._isInvalid=function(d){var s=this.s;return isInvalid(new Date(d),s.invalid,s.valid,+s.min,+s.max)};MonthViewBase.prototype._isSelected=function(d){return !!this.s.selectedDates[+d]};MonthViewBase.prototype._getWeekNr=function(s,date){var d=new Date(date);return s.getWeekNumber(s.getDate(d.getFullYear(),d.getMonth(),d.getDate()+(7-s.firstDay+1)%7))};MonthViewBase.prototype._render=function(s){var row=[];var weeks=s.weeks;var firstWeekDay=s.firstDay;var firstDay=new Date(s.firstPageDay);var year=s.getYear(firstDay);var month=s.getMonth(firstDay);var day=s.getDay(firstDay);var weekDay=s.getDate(year,month,day).getDay();var offset=firstWeekDay-weekDay>0?7:0;this._rows=[];this._days=Array.apply(0,Array(7));for(var i=0;i<7*weeks;i++){if(i%7===0){row=[];}var curr=s.getDate(year,month,i+firstWeekDay-offset-weekDay+day);var key=getDateStr(curr);var displayMonth=s.getMonth(curr);var outer=displayMonth!==month&&s.calendarType!=="week";var marked=s.marked&&s.marked[key];var marks=marked?s.showSingleMark?[{}]:marked:null;row.push({colors:s.colors&&s.colors[key],date:+curr,day:s.dayNames[curr.getDay()],display:outer?s.showOuter:true,labels:s.labels&&s.labels[key],marks:marks,month:s.monthNames[displayMonth],monthShort:s.monthNamesShort[displayMonth],outer:outer,text:s.getDay(curr)});if(i%7===0){this._rows.push(row);}}};MonthViewBase=__decorate([core.Directive({selector:"[mbsc-mv-b]"})],MonthViewBase);return MonthViewBase}(BaseComponent);var activeModal;var EDITABLE="input,select,textarea,button";var ALLOW_ENTER='textarea,button,input[type="button"],input[type="submit"]';var FOCUSABLE=EDITABLE+',[tabindex="0"]';var MAX_WIDTH=600;var KEY_CODES={enter:ENTER,esc:ESC,space:SPACE};var needsFixed=isBrowser&&/(iphone|ipod)/i.test(userAgent)&&exports.ɵk>=7;function processButtons(inst,buttons){var s=inst.s;var processedButtons=[];var predefinedButtons={cancel:{cssClass:"mbsc-popup-button-close",name:"cancel",text:s.cancelText},close:{cssClass:"mbsc-popup-button-close",name:"close",text:s.closeText},ok:{cssClass:"mbsc-popup-button-primary",keyCode:ENTER,name:"ok",text:s.okText},set:{cssClass:"mbsc-popup-button-primary",keyCode:ENTER,name:"set",text:s.setText}};if(buttons&&buttons.length){buttons.forEach((function(btn){var button=isString(btn)?predefinedButtons[btn]||{text:btn}:btn;if(!button.handler||isString(button.handler)){if(isString(button.handler)){button.name=button.handler;}button.handler=function(domEvent){inst._onButtonClick({domEvent:domEvent,button:button});};}processedButtons.push(button);}));return processedButtons}return}var PopupBase=function(_super){__extends(PopupBase,_super);function PopupBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._lastFocus=+new Date;_this._onOverlayClick=function(){if(_this._isOpen&&_this.s.closeOnOverlayClick&&!_this._preventClose){_this._close("overlay");}_this._preventClose=false;};_this._onDocClick=function(){if(!_this.s.showOverlay&&activeModal===_this){_this._onOverlayClick();}};_this._onMouseDown=function(ev){if(!_this.s.showOverlay){_this._target=ev.target;}};_this._onMouseUp=function(ev){if(_this._target&&_this._popup&&_this._popup.contains(_this._target)&&!_this._popup.contains(ev.target)){_this._preventClose=true;}_this._target=false;};_this._onPopupClick=function(){if(!_this.s.showOverlay){_this._preventClose=true;}};_this._onAnimationEnd=function(ev){if(ev.target===_this._popup){if(_this._isClosing){_this._onClosed();_this._isClosing=false;if(_this.state.isReady){_this.setState({isReady:false});}else {_this.forceUpdate();}}if(_this._isOpening){_this._onOpened();_this._isOpening=false;_this.forceUpdate();}}};_this._onButtonClick=function(_a){var domEvent=_a.domEvent,button=_a.button;_this._hook("onButtonClick",{domEvent:domEvent,button:button});if(/cancel|close|ok|set/.test(button.name)){_this._close(button.name);}};_this._onFocus=function(ev){var now=+new Date;if(activeModal===_this&&ev.target.nodeType&&_this._ctx.contains(ev.target)&&!_this._popup.contains(ev.target)&&now-_this._lastFocus>100){_this._lastFocus=now;_this._active.focus();}};_this._onKeyDown=function(ev){var s=_this.s;var keyCode=ev.keyCode;if(keyCode===SPACE&&!matches(ev.target,EDITABLE)||_this._lock&&(keyCode===UP_ARROW||keyCode===DOWN_ARROW)){ev.preventDefault();}if(s.focusTrap&&keyCode===TAB){var all=_this._popup.querySelectorAll(FOCUSABLE);var focusable_1=[];var end_1=-1;var target=0;var current_1=-1;forEach(all,(function(elm){if(!elm.disabled&&(elm.offsetHeight||elm.offsetWidth)){focusable_1.push(elm);end_1++;if(elm===_this._doc.activeElement){current_1=end_1;}}}));if(ev.shiftKey){target=end_1;end_1=0;}if(current_1===end_1){focusable_1[target].focus();ev.preventDefault();}}};_this._onContentScroll=function(ev){if(_this._lock&&(ev.type!==TOUCH_MOVE||ev.touches[0].touchType!=="stylus")){ev.preventDefault();}};_this._onScroll=function(ev){var s=_this.s;if(s.closeOnScroll){_this._close("scroll");}else if(_this._hasContext||s.display==="anchored"){_this.position();}};_this._onWndKeyDown=function(ev){var s=_this.s;var keyCode=ev.keyCode;if(activeModal===_this){_this._hook("onKeyDown",{keyCode:keyCode});if(s.closeOnEsc&&keyCode===ESC){_this._close("esc");}if(keyCode===ENTER&&matches(ev.target,ALLOW_ENTER)&&!ev.shiftKey){return}if(_this._buttons){for(var _i=0,_a=_this._buttons;_i<_a.length;_i++){var button=_a[_i];var buttonKeyCodes=isArray(button.keyCode)?button.keyCode:[button.keyCode];for(var _b=0,buttonKeyCodes_1=buttonKeyCodes;_b<buttonKeyCodes_1.length;_b++){var key=buttonKeyCodes_1[_b];if(!button.disabled&&key!==UNDEFINED&&(key===keyCode||KEY_CODES[key]===keyCode)){button.handler(ev);return}}}}}};_this._onResize=function(){var wrapper=_this._wrapper;var hasContext=_this._hasContext;_this._vpWidth=Math.min(wrapper.clientWidth,hasContext?Infinity:_this._win.innerWidth);_this._vpHeight=Math.min(wrapper.clientHeight,hasContext?Infinity:_this._win.innerHeight);_this._maxWidth=_this._limitator.offsetWidth;_this._maxHeight=_this.s.maxHeight!==UNDEFINED||_this._vpWidth<768||_this._vpHeight<650?_this._limitator.offsetHeight:600;_this._round=_this.s.touchUi===false||_this._popup.offsetWidth<_this._vpWidth&&_this._vpWidth>_this._maxWidth;var args={isLarge:_this._round,maxPopupHeight:_this._maxHeight,maxPopupWidth:_this._maxWidth,target:_this._wrapper,windowHeight:_this._vpHeight,windowWidth:_this._vpWidth};if(_this._hook("onResize",args)!==false&&!args.cancel){_this.position();}};return _this}PopupBase.prototype.open=function(){if(!this._isOpen){this.setState({isOpen:true});}};PopupBase.prototype.close=function(){this._close();};PopupBase.prototype.isVisible=function(){return !!this._isOpen};PopupBase.prototype.position=function(){if(!this._isOpen){return}var s=this.s;var state=this.state;var wrapper=this._wrapper;var popup=this._popup;var hasContext=this._hasContext;var anchor=s.anchor;var anchorAlign=s.anchorAlign;var rtl=s.rtl;var scrollTop=getScrollTop(this._scrollCont);var scrollLeft=getScrollLeft(this._scrollCont);var viewportWidth=this._vpWidth;var viewportHeight=this._vpHeight;var maxWidth=this._maxWidth;var maxHeight=this._maxHeight;var popupWidth=Math.min(popup.offsetWidth,maxWidth);var popupHeight=Math.min(popup.offsetHeight,maxHeight);var showArrow=s.showArrow;this._lock=s.scrollLock&&this._content.scrollHeight<=this._content.clientHeight;if(hasContext){wrapper.style.top=scrollTop+"px";wrapper.style.left=scrollLeft+"px";}var skip=this._hook("onPosition",{isLarge:this._round,maxPopupHeight:maxHeight,maxPopupWidth:maxWidth,target:this._wrapper,windowHeight:viewportHeight,windowWidth:viewportWidth})===false;if(s.display==="anchored"&&!skip){var ctxLeft=0;var ctxTop=0;var left=constrain(state.modalLeft||0,8,viewportWidth-popupWidth-8);var top_1=state.modalTop||8;var bubblePos="bottom";var arrowPos={};var arrowHeight=showArrow?16:4;var fullWidth=wrapper.offsetWidth;var fullHeight=wrapper.offsetHeight;var widthOffset=(fullWidth-viewportWidth)/2;var heightOffset=(fullHeight-viewportHeight)/2;if(hasContext){var ctxBox=this._ctx.getBoundingClientRect();ctxTop=ctxBox.top;ctxLeft=ctxBox.left;}if(anchor&&this._ctx.contains(anchor)){var box=anchor.getBoundingClientRect();var anchorTop=box.top-ctxTop;var anchorLeft=box.left-ctxLeft;var anchorWidth=anchor.offsetWidth;var anchorHeight=anchor.offsetHeight;if(anchorAlign==="start"&&!rtl||anchorAlign==="end"&&rtl){left=anchorLeft;}else if(anchorAlign==="end"&&!rtl||anchorAlign==="start"&&rtl){left=anchorLeft+anchorWidth-popupWidth;}else {left=anchorLeft-(popupWidth-anchorWidth)/2;}left=constrain(left,8,viewportWidth-popupWidth-8);top_1=anchorTop+anchorHeight+arrowHeight;arrowPos={left:constrain(anchorLeft+anchorWidth/2-left-widthOffset,30,popupWidth-30)+"px"};if(top_1+popupHeight+arrowHeight>viewportHeight){if(anchorTop-popupHeight-arrowHeight>0){bubblePos="top";top_1=anchorTop-popupHeight-arrowHeight;}else if(!s.disableLeftRight){var leftPos=anchorLeft-popupWidth-8>0;var rightPos=anchorLeft+anchorWidth+popupWidth+8<=viewportWidth;if(leftPos||rightPos){top_1=constrain(anchorTop-(popupHeight-anchorHeight)/2,8,viewportHeight-popupHeight-8);if(top_1+popupHeight+8>viewportHeight){top_1=Math.max(viewportHeight-popupHeight-8,0);}arrowPos={top:constrain(anchorTop+anchorHeight/2-top_1-heightOffset,30,popupHeight-30)+"px"};bubblePos=leftPos?"left":"right";left=leftPos?anchorLeft-popupWidth:anchorLeft+anchorWidth;}}}}if(bubblePos==="top"||bubblePos==="bottom"){if(top_1+popupHeight+arrowHeight>viewportHeight){top_1=Math.max(viewportHeight-popupHeight-arrowHeight,0);showArrow=false;}}this.setState({arrowPos:arrowPos,bubblePos:bubblePos,height:viewportHeight,isReady:true,modalLeft:left,modalTop:top_1,showArrow:showArrow,width:viewportWidth});}else {this.setState({height:viewportHeight,isReady:true,showArrow:showArrow,width:viewportWidth});}};PopupBase.prototype._render=function(s,state){if(s.display==="bubble"){s.display="anchored";}var animation=s.animation;var display=s.display;var prevProps=this._prevS;var hasPos=display==="anchored";var isModal=display!=="inline";var isFullScreen=s.fullScreen&&isModal;var isOpen=isModal?s.isOpen===UNDEFINED?state.isOpen:s.isOpen:false;if(isOpen&&(s.windowWidth!==prevProps.windowWidth||s.display!==prevProps.display||s.showArrow!==prevProps.showArrow||s.anchor!==prevProps.anchor&&s.display==="anchored")){this._shouldPosition=true;}this._limits={maxHeight:addPixel(s.maxHeight),maxWidth:addPixel(s.maxWidth)};this._style={height:isFullScreen?"100%":addPixel(s.height),left:hasPos&&state.modalLeft?state.modalLeft+"px":"",maxHeight:addPixel(this._maxHeight||s.maxHeight),maxWidth:addPixel(this._maxWidth||s.maxWidth),top:hasPos&&state.modalTop?state.modalTop+"px":"",width:isFullScreen?"100%":addPixel(s.width)};this._hasContext=s.context!=="body"&&s.context!==UNDEFINED;this._needsLock=needsFixed&&!this._hasContext&&display!=="anchored"&&s.scrollLock;this._isModal=isModal;this._flexButtons=display==="center"||!this._touchUi&&!isFullScreen&&(display==="top"||display==="bottom");if(animation!==UNDEFINED&&animation!==true){this._animation=isString(animation)?animation:"";}else {switch(display){case"bottom":this._animation="slide-up";break;case"top":this._animation="slide-down";break;default:this._animation="pop";}}if(s.buttons){if(s.buttons!==prevProps.buttons){this._buttons=processButtons(this,s.buttons);}}else {this._buttons=UNDEFINED;}if(s.headerText!==prevProps.headerText){this._headerText=s.headerText?this._safeHtml(s.headerText):UNDEFINED;}if(isOpen&&!this._isOpen){this._onOpen();}if(!isOpen&&this._isOpen){this._onClose();}this._isOpen=isOpen;this._isVisible=isOpen||this._isClosing;};PopupBase.prototype._updated=function(){var _this=this;var s=this.s;if(doc&&(s.context!==this._prevS.context||!this._ctx)){var ctx=isString(s.context)?doc.querySelector(s.context):s.context;if(!ctx){ctx=doc.body;}ctx.__mbscLock=ctx.__mbscLock||0;ctx.__mbscIOSLock=ctx.__mbscIOSLock||0;ctx.__mbscModals=ctx.__mbscModals||0;this._ctx=ctx;if(this._justOpened){setTimeout((function(){_this.forceUpdate();}));return}}if(this._justOpened){var ctx=this._ctx;var wrapper=this._wrapper;var hasContext=this._hasContext;var doc_1=this._doc=getDocument(wrapper);var win=this._win=getWindow(wrapper);var activeElm_1=doc_1.activeElement;if(!this._hasWidth&&s.responsive){var viewportWidth_1=Math.min(wrapper.clientWidth,hasContext?Infinity:win.innerWidth);var viewportHeight_1=Math.min(wrapper.clientHeight,hasContext?Infinity:win.innerHeight);this._hasWidth=true;if(viewportWidth_1!==this.state.width||viewportHeight_1!==this.state.height){setTimeout((function(){_this.setState({height:viewportHeight_1,width:viewportWidth_1});}));return}}this._scrollCont=hasContext?ctx:win;this._observer=resizeObserver(wrapper,this._onResize,this._zone);this._prevFocus=s.focusElm||activeElm_1;ctx.__mbscModals++;if(s.focusOnOpen&&activeElm_1){setTimeout((function(){activeElm_1.blur();}));}if(this._needsLock){if(!ctx.__mbscIOSLock){var scrollTop=getScrollTop(this._scrollCont);var scrollLeft=getScrollLeft(this._scrollCont);ctx.style.left=-scrollLeft+"px";ctx.style.top=-scrollTop+"px";ctx.__mbscScrollLeft=scrollLeft;ctx.__mbscScrollTop=scrollTop;ctx.classList.add("mbsc-popup-open-ios");ctx.parentNode.classList.add("mbsc-popup-open-ios");}ctx.__mbscIOSLock++;}if(hasContext){ctx.classList.add("mbsc-popup-ctx");}if(s.focusTrap){listen(win,FOCUS_IN,this._onFocus);}listen(this._scrollCont,TOUCH_MOVE,this._onContentScroll,{passive:false});listen(this._scrollCont,WHEEL,this._onContentScroll,{passive:false});listen(this._scrollCont,MOUSE_WHEEL,this._onContentScroll,{passive:false});setTimeout((function(){listen(doc_1,MOUSE_DOWN,_this._onMouseDown);listen(doc_1,MOUSE_UP,_this._onMouseUp);listen(doc_1,CLICK,_this._onDocClick);}));this._hook("onOpen",{target:this._wrapper});}if(this._shouldPosition){setTimeout((function(){_this._onResize();}));}this._justOpened=false;this._justClosed=false;this._shouldPosition=false;};PopupBase.prototype._destroy=function(){if(this._isOpen){this._onClosed();this._unlisten();if(activeModal===this){activeModal=this._prevModal;}}};PopupBase.prototype._onOpen=function(){var _this=this;if(hasAnimation&&this._animation){this._isOpening=true;this._isClosing=false;}else {this._onOpened();}this._justOpened=true;this._preventClose=false;setTimeout((function(){_this._prevModal=activeModal;activeModal=_this;}));};PopupBase.prototype._onClose=function(){var _this=this;if(hasAnimation&&this._animation){this._isClosing=true;this._isOpening=false;}else {setTimeout((function(){_this._onClosed();_this.setState({isReady:false});}));}this._hasWidth=false;this._unlisten();};PopupBase.prototype._onOpened=function(){var s=this.s;if(s.focusOnOpen){var activeElm=s.activeElm;var active=activeElm?isString(activeElm)?this._popup.querySelector(activeElm):activeElm:this._active;if(active&&active.focus){active.focus();}}listen(this._win,KEY_DOWN,this._onWndKeyDown);listen(this._scrollCont,SCROLL,this._onScroll);};PopupBase.prototype._onClosed=function(){var _this=this;var ctx=this._ctx;var shouldFocus=this._prevFocus&&this._prevFocus.focus&&this.s.focusOnClose;ctx.mbscModals--;this._justClosed=true;if(this._needsLock){ctx.__mbscIOSLock--;if(!ctx.__mbscIOSLock){ctx.classList.remove("mbsc-popup-open-ios");ctx.parentNode.classList.remove("mbsc-popup-open-ios");ctx.style.left="";ctx.style.top="";setScrollLeft(this._scrollCont,ctx.__mbscScrollLeft);setScrollTop(this._scrollCont,ctx.__mbscScrollTop);}}if(this._hasContext&&!ctx.mbscModals){ctx.classList.remove("mbsc-popup-ctx");}this._hook("onClosed",{focus:shouldFocus});if(shouldFocus){this._prevFocus.focus();}setTimeout((function(){if(activeModal===_this){activeModal=_this._prevModal;}}));};PopupBase.prototype._unlisten=function(){unlisten(this._win,KEY_DOWN,this._onWndKeyDown);unlisten(this._scrollCont,SCROLL,this._onScroll);unlisten(this._scrollCont,TOUCH_MOVE,this._onContentScroll,{passive:false});unlisten(this._scrollCont,WHEEL,this._onContentScroll,{passive:false});unlisten(this._scrollCont,MOUSE_WHEEL,this._onContentScroll,{passive:false});unlisten(this._doc,MOUSE_DOWN,this._onMouseDown);unlisten(this._doc,MOUSE_UP,this._onMouseUp);unlisten(this._doc,CLICK,this._onDocClick);if(this.s.focusTrap){unlisten(this._win,FOCUS_IN,this._onFocus);}if(this._observer){this._observer.detach();this._observer=null;}};PopupBase.prototype._close=function(source){if(this._isOpen){if(this.s.isOpen===UNDEFINED){this.setState({isOpen:false});}this._hook("onClose",{source:source});}};PopupBase.defaults={buttonVariant:"flat",cancelText:"Cancel",closeOnEsc:true,closeOnOverlayClick:true,closeText:"Close",contentPadding:true,display:"center",focusOnClose:true,focusOnOpen:true,focusTrap:true,maxWidth:MAX_WIDTH,okText:"Ok",scrollLock:true,setText:"Set",showArrow:true,showOverlay:true};PopupBase=__decorate([core.Directive({selector:"[mbsc-popup-b]"})],PopupBase);return PopupBase}(BaseComponent);var cloudUpload='<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24"><path d="M0 0h24v24H0z" fill="none"/><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM14 13v4h-4v-4H7l5-5 5 5h-3z"/></svg>';var resizeObservable=new Observable;var resizeSubscribers=0;var resizeTimer;function onWindowResize(){clearTimeout(resizeTimer);resizeTimer=setTimeout((function(){resizeObservable.next();}),100);}function subscribeResize(handler){if(!resizeSubscribers){listen(win,RESIZE,onWindowResize);}resizeSubscribers++;return resizeObservable.subscribe(handler)}function unsubscribeResize(id){resizeSubscribers--;resizeObservable.unsubscribe(id);if(!resizeSubscribers){unlisten(win,RESIZE,onWindowResize);}}function checkAutoFill(el){try{return matches(el,"*:-webkit-autofill")}catch(ex){return false}}var InputBase=function(_super){__extends(InputBase,_super);function InputBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._tag="input";_this._onClick=function(){_this._hidePass=!_this._hidePass;};_this._onMouseDown=function(ev){if(_this.s.tags){_this._preventFocus=true;}};_this._onTagClear=function(ev,index){ev.stopPropagation();ev.preventDefault();if(!_this.s.disabled){var value=_this.s.pickerValue.slice();value.splice(index,1);trigger(_this._el,CHANGE,value);}};_this._sizeTextArea=function(){var input=_this._el;var rowNr=_this.s.rows;var lineHeight=24;var height;var lineNr;var line;if(input.offsetHeight){input.style.height="";line=input.scrollHeight-input.offsetHeight;height=input.offsetHeight+(line>0?line:0);lineNr=Math.round(height/lineHeight);if(lineNr>rowNr){height=lineHeight*rowNr+(height-lineNr*lineHeight);input.style.overflow="auto";}else {input.style.overflow="";}if(height){input.style.height=height+"px";}}};_this._onAutoFill=function(){if(_this.s.labelStyle==="floating"&&checkAutoFill(_this._el)){_this.setState({isFloatingActive:true});}};return _this}Object.defineProperty(InputBase.prototype,"value",{get:function(){return this.__value},set:function(v){this.__value=v;},enumerable:true,configurable:true});InputBase.prototype._checkFloating=function(){var _this=this;var el=this._el;var s=this.s;var isAutoFill=checkAutoFill(el);var isFloatingActive=this.state.hasFocus||isAutoFill||!isEmpty(this.value);if(el&&s.labelStyle==="floating"){if(this._tag==="select"){var select=el;var firstOption=select.options[0];isFloatingActive=!!(isFloatingActive||select.multiple||select.value||select.selectedIndex>-1&&firstOption&&firstOption.label);}else if(this.value===UNDEFINED){var input=el;isFloatingActive=!!(isFloatingActive||input.value);}this._valueChecked=true;setTimeout((function(){_this.setState({isFloatingActive:isFloatingActive});}));}};InputBase.prototype._mounted=function(){var _this=this;var s=this.s;var input=this._el;listen(input,ANIMATION_START,this._onAutoFill);if(this._tag==="textarea"){listen(input,INPUT,this._sizeTextArea);this._unsubscribe=subscribeResize(this._sizeTextArea);}this._unlisten=gestureListener(input,{keepFocus:true,onBlur:function(){_this.setState({hasFocus:false,isFloatingActive:!!input.value});},onChange:function(ev){if(s.type==="file"){var files=ev.target.files;var names=[];for(var _i=0,files_1=files;_i<files_1.length;_i++){var file=files_1[_i];names.push(file.name);}_this.setState({files:names.join(", ")});}if(s.tags&&s.value===UNDEFINED&&s.defaultValue===UNDEFINED){_this.setState({value:ev.target.value});}_this._checkFloating();_this._emit("onChange",ev);},onFocus:function(){if(!_this._preventFocus){_this.setState({hasFocus:true,isFloatingActive:true});}_this._preventFocus=false;},onHoverIn:function(){if(!_this._disabled){_this.setState({hasHover:true});}},onHoverOut:function(){_this.setState({hasHover:false});}});};InputBase.prototype._render=function(s,state){var hasEndIcon=!!(s.endIconSvg||s.endIcon);var pickerValue=s.pickerValue;var hasStartIcon=!!(s.startIconSvg||s.startIcon);var hasLabel=s.label!==UNDEFINED||s.hasChildren;var hasError=s.error;var iconStartPosition=s.rtl?"right":"left";var iconEndPosition=s.rtl?"left":"right";var inputType=s.inputStyle;var labelType=s.labelStyle;var isFloating=labelType==="floating";var isFloatingActive=!!(isFloating&&hasLabel&&(state.isFloatingActive||!isEmpty(s.value)));var disabled=s.disabled===UNDEFINED?state.disabled:s.disabled;var prevS=this._prevS;var value=s.value!==UNDEFINED?s.value:state.value!==UNDEFINED?state.value:s.defaultValue;var commonClasses=this._theme+this._rtl+(hasError?" mbsc-error":"")+(disabled?" mbsc-disabled":"")+(state.hasHover?" mbsc-hover":"")+(state.hasFocus&&!disabled?" mbsc-focus":"");if(s.type==="file"&&!hasEndIcon){s.endIconSvg=cloudUpload;hasEndIcon=true;}if(s.tags){if(isEmpty(pickerValue)){pickerValue=[];}if(!isArray(pickerValue)){pickerValue=[pickerValue];}this._tagsArray=s.pickerMap?pickerValue.map((function(val){return s.pickerMap.get(val)})):isEmpty(value)?[]:value.split(", ");}if(s.passwordToggle){hasEndIcon=true;this._passIconClass=commonClasses+" mbsc-toggle-icon"+(" mbsc-textfield-icon mbsc-textfield-icon-"+inputType+" mbsc-textfield-icon-"+iconEndPosition)+(" mbsc-textfield-icon-"+inputType+"-"+iconEndPosition)+(hasLabel?" mbsc-textfield-icon-"+labelType:"");this._hidePass=this._hidePass===UNDEFINED?s.type==="password":this._hidePass;}this._hasStartIcon=hasStartIcon;this._hasEndIcon=hasEndIcon;this._hasError=hasError;this._disabled=disabled;this._cssClass=this._className+this._hb+commonClasses+" mbsc-form-control-wrapper mbsc-textfield-wrapper mbsc-font"+(" mbsc-textfield-wrapper-"+inputType)+(disabled?" mbsc-disabled":"")+(hasLabel?" mbsc-textfield-wrapper-"+labelType:"")+(hasStartIcon?" mbsc-textfield-wrapper-has-icon-"+iconStartPosition+" ":"")+(hasEndIcon?" mbsc-textfield-wrapper-has-icon-"+iconEndPosition+" ":"");if(hasLabel){this._labelClass=commonClasses+(" mbsc-label mbsc-label-"+labelType+" mbsc-label-"+inputType+"-"+labelType)+(hasStartIcon?" mbsc-label-"+inputType+"-"+labelType+"-has-icon-"+iconStartPosition+" ":"")+(hasEndIcon?" mbsc-label-"+inputType+"-"+labelType+"-has-icon-"+iconEndPosition+" ":"")+(isFloating&&this._animateFloating?" mbsc-label-floating-animate":"")+(isFloatingActive?" mbsc-label-floating-active":"");}this._innerClass=commonClasses+(" mbsc-textfield-inner mbsc-textfield-inner-"+inputType)+(hasLabel?" mbsc-textfield-inner-"+labelType:"");if(hasStartIcon){this._startIconClass=commonClasses+(" mbsc-textfield-icon mbsc-textfield-icon-"+inputType+" mbsc-textfield-icon-"+iconStartPosition)+(" mbsc-textfield-icon-"+inputType+"-"+iconStartPosition)+(hasLabel?" mbsc-textfield-icon-"+labelType:"");}if(hasEndIcon){this._endIconClass=commonClasses+(" mbsc-textfield-icon mbsc-textfield-icon-"+inputType+" mbsc-textfield-icon-"+iconEndPosition)+(" mbsc-textfield-icon-"+inputType+"-"+iconEndPosition)+(hasLabel?" mbsc-textfield-icon-"+labelType:"");}this._nativeElmClass=commonClasses+" "+(s.inputClass||"")+(" mbsc-textfield mbsc-textfield-"+inputType)+(s.dropdown?" mbsc-select":"")+(hasLabel?" mbsc-textfield-"+labelType+" mbsc-textfield-"+inputType+"-"+labelType:"")+(isFloatingActive?" mbsc-textfield-floating-active":"")+(hasStartIcon?" mbsc-textfield-has-icon-"+iconStartPosition+" mbsc-textfield-"+inputType+"-has-icon-"+iconStartPosition+(hasLabel?" mbsc-textfield-"+inputType+"-"+labelType+"-has-icon-"+iconStartPosition:""):"")+(hasEndIcon?" mbsc-textfield-has-icon-"+iconEndPosition+" mbsc-textfield-"+inputType+"-has-icon-"+iconEndPosition+(hasLabel?" mbsc-textfield-"+inputType+"-"+labelType+"-has-icon-"+iconEndPosition:""):"");if(this._tag==="select"||s.dropdown){this._selectIconClass="mbsc-select-icon mbsc-select-icon-"+inputType+this._rtl+this._theme+(hasLabel?" mbsc-select-icon-"+labelType:"")+(hasStartIcon?" mbsc-select-icon-"+iconStartPosition:"")+(hasEndIcon?" mbsc-select-icon-"+iconEndPosition:"");}if(this._tag==="textarea"||s.tags){this._cssClass+=" mbsc-textarea-wrapper";this._innerClass+=" mbsc-textarea-inner";this._nativeElmClass+=" mbsc-textarea";if(this._tag==="textarea"&&(value!==this._prevValue||s.inputStyle!==prevS.inputStyle||s.labelStyle!==prevS.labelStyle||s.rows!==prevS.rows||s.theme!==prevS.theme)){this._shouldSize=true;}this._prevValue=value;}if(s.tags){this._innerClass+=" mbsc-textfield-tags-inner";}if(s.type==="file"){this._dummyElmClass=this._nativeElmClass;this._nativeElmClass+=" mbsc-textfield-file";}this._errorClass=this._theme+this._rtl+(" mbsc-error-message mbsc-error-message-"+inputType)+(hasLabel?" mbsc-error-message-"+labelType:"")+(hasStartIcon?" mbsc-error-message-has-icon-"+iconStartPosition:"")+(hasEndIcon?" mbsc-error-message-has-icon-"+iconEndPosition:"");if(s.notch&&inputType==="outline"){this._fieldSetClass="mbsc-textfield-fieldset"+commonClasses+(hasStartIcon?" mbsc-textfield-fieldset-has-icon-"+iconStartPosition:"")+(hasEndIcon?" mbsc-textfield-fieldset-has-icon-"+iconEndPosition:"");this._legendClass="mbsc-textfield-legend"+this._theme+(isFloatingActive||hasLabel&&labelType==="stacked"?" mbsc-textfield-legend-active":"");}if(s.ripple&&s.inputStyle!=="outline"){this._rippleClass="mbsc-textfield-ripple"+this._theme+(hasError?" mbsc-error":"")+(state.hasFocus?" mbsc-textfield-ripple-active":"");}if(this._valueChecked){this._animateFloating=true;}};InputBase.prototype._updated=function(){var _this=this;if(this._shouldSize){this._shouldSize=false;setTimeout((function(){_this._sizeTextArea();}));}this._checkFloating();};InputBase.prototype._destroy=function(){unlisten(this._el,ANIMATION_START,this._onAutoFill);unlisten(this._el,INPUT,this._sizeTextArea);unsubscribeResize(this._unsubscribe);this._unlisten();};InputBase.defaults={dropdown:false,dropdownIcon:arrowDown,hideIcon:"eye-blocked",inputStyle:"underline",labelStyle:"stacked",placeholder:"",ripple:false,rows:6,showIcon:"eye",type:"text"};InputBase._name="Input";InputBase=__decorate([core.Directive({selector:"[mbsc-inp-b]"})],InputBase);return InputBase}(BaseComponent);function updateValue(inst,val){inst._val=val;if(inst._onValueChange){inst._onValueChange(val);}inst.setState({value:val});}function FormControl(constructor){var Decorated=function(_super){__extends(Decorated,_super);function Decorated(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.valueChange=new core.EventEmitter;return _this}Object.defineProperty(Decorated.prototype,"value",{get:function(){return this._val},set:function(val){if(this._val!==val){updateValue(this,val);this._onFormChange(val);this.valueChange.emit(val);}},enumerable:true,configurable:true});Decorated.prototype.registerOnChange=function(fn){this._onFormChange=fn;};Decorated.prototype.registerOnTouched=function(fn){this._onFormTouch=fn;};Decorated.prototype.setDisabledState=function(disabled){this.setState({disabled:disabled});};Decorated.prototype.writeValue=function(val){updateValue(this,val);};__decorate([core.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],Decorated.prototype,"value",null);__decorate([core.Output(),__metadata("design:type",Object)],Decorated.prototype,"valueChange",void 0);return Decorated}(constructor);return Decorated}var guid$1=0;var MbscInput=function(_super){__extends(MbscInput,_super);function MbscInput(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onChange=new core.EventEmitter;_this._id="mbsc-textfield-"+guid$1++;return _this}MbscInput.prototype._triggerEvent=function(ev){if(this.s.tags&&ev.target!==this._el){trigger(this._el,ev.type);}};MbscInput.prototype._onValueChange=function(){this._checkFloating();};MbscInput.prototype._mounted=function(){this._el=this.vInput.nativeElement;_super.prototype._mounted.call(this);};__decorate([core.ViewChild("input",{static:false}),__metadata("design:type",core.ElementRef)],MbscInput.prototype,"vInput",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"accept",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"autocapitalize",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"autocomplete",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"autocorrect",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"autofocus",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscInput.prototype,"disabled",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscInput.prototype,"dropdown",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"endIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"endIconSrc",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"endIconSvg",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscInput.prototype,"error",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"errorMessage",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"hideIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"hideIconSvg",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"id",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"inputClass",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"inputStyle",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"label",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"labelStyle",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscInput.prototype,"max",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscInput.prototype,"maxlength",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscInput.prototype,"min",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscInput.prototype,"minlength",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"multiple",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"name",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscInput.prototype,"passwordToggle",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"pattern",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscInput.prototype,"pickerMap",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscInput.prototype,"pickerValue",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"placeholder",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscInput.prototype,"readonly",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"required",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscInput.prototype,"ripple",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscInput.prototype,"rows",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"showIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"showIconSvg",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"spellcheck",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"startIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"startIconSrc",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"startIconSvg",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscInput.prototype,"step",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscInput.prototype,"tags",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscInput.prototype,"type",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscInput.prototype,"value",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscInput.prototype,"onChange",void 0);MbscInput=__decorate([FormControl,core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-input",template:'\n    <label *ngIf="s.label !== undefined" [for]="_id" [class]="_labelClass">\n      {{s.label}}\n      <ng-content select="[mbsc-label]"></ng-content>\n    </label>\n    <span [class]="_innerClass" (click)="_triggerEvent($event)" (keydown)="_triggerEvent($event)">\n      <input #input [(ngModel)]="value" (blur)="_onFormTouch($event)"\n        [attr.accept]="accept"\n        [attr.autocapitalize]="autocapitalize"\n        [attr.autocomplete]="autocomplete"\n        [attr.autocorrect]="autocorrect"\n        [attr.autofocus]="autofocus"\n        [attr.max]="max"\n        [attr.maxlength]="maxlength"\n        [attr.min]="min"\n        [attr.minlength]="minlength"\n        [attr.multiple]="multiple"\n        [attr.name]="name"\n        [attr.pattern]="pattern"\n        [attr.required]="required"\n        [attr.spellcheck]="spellcheck"\n        [attr.step]="step"\n        [class]="_nativeElmClass + (s.tags ? \' mbsc-textfield-hidden\' : \'\')"\n        [disabled]="_disabled"\n        [id]="id || _id"\n        [placeholder]="s.placeholder"\n        [readonly]="readonly"\n        [type]="s.passwordToggle ? (_hidePass ? \'password\' : \'text\') : s.type"\n      />\n      <input *ngIf="s.type === \'file\'"\n        [class]="_dummyElmClass"\n        [disabled]="_disabled"\n        [placeholder]="s.placeholder"\n        [readonly]="true"\n        type="text"\n        [value]="state.files || \'\'"\n      />\n      <span *ngIf="tags" [class]="\'mbsc-textfield-tags\' + _nativeElmClass">\n        <ng-container *ngFor="let v of _tagsArray; let i = index;">\n          <span *ngIf="v" [class]="\'mbsc-textfield-tag\' + _theme + _rtl">\n            <span [class]="\'mbsc-textfield-tag-text\' + _theme">{{v}}</span>\n            <mbsc-icon class="mbsc-textfield-tag-clear" (click)="_onTagClear($event, i)"\n             [svg]="s.clearIcon" [theme]="s.theme"></mbsc-icon>\n          </span>\n        </ng-container>\n        <span *ngIf="!_tagsArray.length" [class]="\'mbsc-textfield-tags-placeholder\' + _theme">{{s.placeholder}}</span>\n      </span>\n      <mbsc-icon *ngIf="s.dropdown" [class]="_selectIconClass" [svg]="s.dropdownIcon" [theme]="s.theme"></mbsc-icon>\n      <mbsc-icon *ngIf="_hasStartIcon" [class]="_startIconClass" [name]="s.startIcon" [svg]="s.startIconSvg" [theme]="s.theme"></mbsc-icon>\n      <mbsc-icon *ngIf="_hasEndIcon && !s.passwordToggle"\n        [class]="_endIconClass"\n        [name]="s.endIcon"\n        [svg]="s.endIconSvg"\n        [theme]="s.theme">\n      </mbsc-icon>\n      <mbsc-icon *ngIf="s.passwordToggle"\n        (click)="_onClick()"\n        [class]="_passIconClass"\n        [name]="_hidePass ? s.showIcon : s.hideIcon"\n        [svg]="_hidePass ? s.showIconSvg : s.hideIconSvg"\n        [theme]="s.theme">\n      </mbsc-icon>\n      <span *ngIf="_hasError" [class]="_errorClass">{{s.errorMessage}}</span>\n      <fieldset *ngIf="s.notch && s.inputStyle === \'outline\'" aria-hidden="true" [class]="_fieldSetClass">\n        <legend [class]="_legendClass">{{s.label && s.labelStyle !== \'inline\' ? s.label : \'&nbsp;\'}}</legend>\n      </fieldset>\n      <span *ngIf="s.ripple && s.inputStyle !== \'outline\'" [class]="_rippleClass" ></span>\n    </span>\n  '})],MbscInput);return MbscInput}(InputBase);var MbscDropdown=function(_super){__extends(MbscDropdown,_super);function MbscDropdown(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._tag="select";return _this}MbscDropdown._name="Dropdown";MbscDropdown=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-dropdown",template:'\n    <label *ngIf="s.label !== undefined" [for]="_id" [class]="_labelClass">\n      {{s.label}}\n      <ng-content select="[mbsc-label]"></ng-content>\n    </label>\n    <span [class]="_innerClass">\n      <select #input\n        (blur)="_onFormTouch($event)"\n        (change)="value=input.value"\n        [attr.autofocus]="autofocus"\n        [attr.multiple]="multiple"\n        [attr.name]="name"\n        [attr.required]="required"\n        [class]="\'mbsc-select \' + _nativeElmClass"\n        [disabled]="_disabled"\n        [id]="id || _id"\n        [value]="value"\n      >\n        <ng-content></ng-content>\n      </select>\n      <mbsc-icon [class]="_selectIconClass" [svg]="s.dropdownIcon" [theme]="s.theme"></mbsc-icon>\n      <mbsc-icon *ngIf="_hasStartIcon" [class]="_startIconClass" [name]="s.startIcon" [svg]="s.startIconSvg" [theme]="s.theme"></mbsc-icon>\n      <mbsc-icon *ngIf="_hasEndIcon" [class]="_endIconClass" [name]="s.endIcon" [svg]="s.endIconSvg" [theme]="s.theme"></mbsc-icon>\n      <span *ngIf="_hasError" [class]="_errorClass">{{s.errorMessage}}</span>\n      <fieldset *ngIf="s.notch && s.inputStyle === \'outline\'" aria-hidden="true" [class]="_fieldSetClass">\n        <legend [class]="_legendClass">{{s.label && s.labelStyle !== \'inline\' ? s.label : \'&nbsp;\'}}</legend>\n      </fieldset>\n      <span *ngIf="s.ripple && s.inputStyle !== \'outline\'" [class]="_rippleClass" ></span>\n    </span>\n  '})],MbscDropdown);return MbscDropdown}(MbscInput);var MbscTextarea=function(_super){__extends(MbscTextarea,_super);function MbscTextarea(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._tag="textarea";return _this}MbscTextarea._name="Textarea";MbscTextarea=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-textarea",template:'\n    <label *ngIf="s.label !== undefined" [for]="_id" [class]="_labelClass">\n      {{s.label}}\n      <ng-content select="[mbsc-label]"></ng-content>\n    </label>\n    <span [class]="_innerClass">\n      <textarea #input [(ngModel)]="value" (blur)="_onFormTouch($event)"\n        [attr.accept]="accept"\n        [attr.autocapitalize]="autocapitalize"\n        [attr.autocomplete]="autocomplete"\n        [attr.autocorrect]="autocorrect"\n        [attr.autofocus]="autofocus"\n        [attr.maxlength]="maxlength"\n        [attr.minlength]="minlength"\n        [attr.name]="name"\n        [attr.pattern]="pattern"\n        [attr.required]="required"\n        [attr.spellcheck]="spellcheck"\n        [class]="_nativeElmClass"\n        [disabled]="_disabled"\n        [id]="id || _id"\n        [readonly]="readonly"\n        [rows]="rows"\n        [placeholder]="placeholder"\n      ></textarea>\n      <mbsc-icon *ngIf="_hasStartIcon" [class]="_startIconClass" [name]="s.startIcon" [svg]="s.startIconSvg" [theme]="s.theme"></mbsc-icon>\n      <mbsc-icon *ngIf="_hasEndIcon" [class]="_endIconClass" [name]="s.endIcon" [svg]="s.endIconSvg" [theme]="s.theme"></mbsc-icon>\n      <span *ngIf="_hasError" [class]="_errorClass">{{s.errorMessage}}</span>\n      <fieldset *ngIf="s.notch && s.inputStyle === \'outline\'" aria-hidden="true" [class]="_fieldSetClass">\n        <legend [class]="_legendClass">{{s.label && s.labelStyle !== \'inline\' ? s.label : \'&nbsp;\'}}</legend>\n      </fieldset>\n      <span *ngIf="s.ripple && s.inputStyle !== \'outline\'" [class]="_rippleClass" ></span>\n    </span>\n  '})],MbscTextarea);return MbscTextarea}(MbscInput);var MbscInputModule=function(){function MbscInputModule(){}MbscInputModule=__decorate([core.NgModule({declarations:[InputBase,MbscDropdown,MbscInput,MbscTextarea],exports:[MbscDropdown,MbscInput,MbscTextarea],imports:[common.CommonModule,forms.FormsModule,MbscIconModule]})],MbscInputModule);return MbscInputModule}();var MbscPopup=function(_super){__extends(MbscPopup,_super);function MbscPopup(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onButtonClick=new core.EventEmitter;_this.onOverlayClick=new core.EventEmitter;_this.onClose=new core.EventEmitter;_this.onClosed=new core.EventEmitter;_this.onKeyDown=new core.EventEmitter;_this.onOpen=new core.EventEmitter;_this.onPosition=new core.EventEmitter;_this.onResize=new core.EventEmitter;return _this}MbscPopup.prototype._updated=function(){var justOpened=this._justOpened;if(justOpened){this._active=this.vActive.nativeElement;this._content=this.vContent.nativeElement;this._limitator=this.vLimit.nativeElement;this._wrapper=this.vWrapper.nativeElement;this._popup=this.vPopup.nativeElement;}_super.prototype._updated.call(this);if(justOpened&&this._ctx&&!this._ph){var wrapper=this._wrapper;var doc=getDocument(wrapper);this._ph=doc.createComment("mbsc-popup");wrapper.parentNode.insertBefore(this._ph,wrapper);this._ctx.appendChild(wrapper);}};MbscPopup.prototype._onClosed=function(){this._ph.parentNode.replaceChild(this._wrapper,this._ph);this._ph=null;_super.prototype._onClosed.call(this);};__decorate([core.ViewChild("active",{static:false}),__metadata("design:type",core.ElementRef)],MbscPopup.prototype,"vActive",void 0);__decorate([core.ViewChild("content",{static:false}),__metadata("design:type",core.ElementRef)],MbscPopup.prototype,"vContent",void 0);__decorate([core.ViewChild("limit",{static:false}),__metadata("design:type",core.ElementRef)],MbscPopup.prototype,"vLimit",void 0);__decorate([core.ViewChild("wrapper",{static:false}),__metadata("design:type",core.ElementRef)],MbscPopup.prototype,"vWrapper",void 0);__decorate([core.ViewChild("popup",{static:false}),__metadata("design:type",core.ElementRef)],MbscPopup.prototype,"vPopup",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscPopup.prototype,"activeElm",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscPopup.prototype,"anchor",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPopup.prototype,"anchorAlign",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscPopup.prototype,"animation",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscPopup.prototype,"buttons",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPopup.prototype,"buttonVariant",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscPopup.prototype,"closeOnEsc",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscPopup.prototype,"closeOnOverlayClick",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscPopup.prototype,"closeOnScroll",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscPopup.prototype,"contentPadding",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPopup.prototype,"cssClass",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscPopup.prototype,"disableLeftRight",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPopup.prototype,"display",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscPopup.prototype,"focusElm",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscPopup.prototype,"focusOnClose",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscPopup.prototype,"focusOnOpen",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscPopup.prototype,"focusTrap",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscPopup.prototype,"fullScreen",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPopup.prototype,"headerText",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscPopup.prototype,"height",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscPopup.prototype,"isOpen",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscPopup.prototype,"maxHeight",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscPopup.prototype,"maxWidth",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscPopup.prototype,"scrollLock",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscPopup.prototype,"showArrow",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscPopup.prototype,"showOverlay",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscPopup.prototype,"windowWidth",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscPopup.prototype,"width",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPopup.prototype,"cancelText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPopup.prototype,"closeText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPopup.prototype,"okText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPopup.prototype,"setText",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscPopup.prototype,"onButtonClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscPopup.prototype,"onOverlayClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscPopup.prototype,"onClose",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscPopup.prototype,"onClosed",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscPopup.prototype,"onKeyDown",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscPopup.prototype,"onOpen",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscPopup.prototype,"onPosition",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscPopup.prototype,"onResize",void 0);MbscPopup=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-popup",template:"\n    <ng-template #ngcontent>\n      <ng-container *ngIf=\"_isVisible || !_isModal\">\n        <ng-content></ng-content>\n      </ng-container>\n    </ng-template>\n    <ng-container *ngIf=\"_isModal && _isVisible\">\n      <div [class]=\"'mbsc-font mbsc-popup-wrapper mbsc-popup-wrapper-' + s.display + _theme + _rtl + ' ' + _className +\n        (s.fullScreen ? ' mbsc-popup-wrapper-' + s.display + '-full' : '') +\n        (_touchUi ? '' : ' mbsc-popup-pointer') +\n        (_round ? ' mbsc-popup-round' : '') +\n        (_hasContext ? ' mbsc-popup-wrapper-ctx' : '') +\n        (state.isReady ? '' : ' mbsc-popup-hidden')\"\n        (keydown)=\"_onKeyDown($event)\" #wrapper>\n        <div *ngIf=\"s.showOverlay\" (click)=\"_onOverlayClick()\"\n          [class]=\"'mbsc-popup-overlay mbsc-popup-overlay-' + s.display + _theme +\n            (_isClosing ? ' mbsc-popup-overlay-out' : '') +\n            (_isOpening && state.isReady ? ' mbsc-popup-overlay-in' : '')\n        \"></div>\n        <div #limit [class]=\"'mbsc-popup-limits mbsc-popup-limits-' + s.display\" [ngStyle]=\"_limits\"></div>\n        <div #popup\n          [class]=\"'mbsc-popup ' + _theme + _hb +\n            ' mbsc-popup-' + s.display + (s.fullScreen ? '-full' : '') +\n            (state.bubblePos && state.showArrow && s.display === 'anchored' ? ' mbsc-popup-anchored-' + state.bubblePos : '') +\n            (_isClosing ? ' mbsc-popup-' + _animation + '-out' : '') +\n            (_isOpening && state.isReady ? ' mbsc-popup-' + _animation + '-in' : '')\"\n          [ngStyle]=\"_style\"\n          (animationend)=\"_onAnimationEnd($event)\"\n          (click)=\"_onPopupClick()\"\n          role=\"dialog\"\n        >\n          <div *ngIf=\"s.display === 'anchored' && state.showArrow\"\n            [class]=\"'mbsc-popup-arrow-wrapper mbsc-popup-arrow-wrapper-' + state.bubblePos + _theme\">\n            <div [class]=\"'mbsc-popup-arrow mbsc-popup-arrow-' + state.bubblePos + _theme\" [ngStyle]=\"state.arrowPos\"></div>\n          </div>\n          <div class=\"mbsc-popup-focus\" tabindex=\"-1\" #active></div>\n          <div [class]=\"'mbsc-popup-body mbsc-popup-body-' + s.display + this._theme + this._hb +\n              (s.fullScreen ? ' mbsc-popup-body-' + s.display + '-full' : '') +\n              (_round ? ' mbsc-popup-body-round': '')\">\n            <div *ngIf=\"_headerText\"\n              [class]=\"'mbsc-popup-header mbsc-popup-header-' +\n                s.display + _theme + _hb +\n                (_buttons ? '' : ' mbsc-popup-header-no-buttons')\"\n              [innerHTML]=\"_headerText\">\n            </div>\n            <div #content [class]=\"'mbsc-popup-content' + (s.contentPadding ? ' mbsc-popup-padding' : '')\">\n              <ng-container [ngTemplateOutlet]=\"ngcontent\"></ng-container>\n            </div>\n            <div *ngIf=\"_buttons\" [class]=\"'mbsc-popup-buttons mbsc-popup-buttons-' + s.display + _theme + _rtl + _hb +\n              (_flexButtons ? ' mbsc-popup-buttons-flex' : '') +\n              (s.fullScreen ? ' mbsc-popup-buttons-' + s.display + '-full' : '')\"\n            >\n              <mbsc-button *ngFor=\"let btn of _buttons\"\n                [color]=\"btn.color\"\n                [class]=\"'mbsc-popup-button mbsc-popup-button-' + s.display + _rtl + _hb +\n                  (_flexButtons ? ' mbsc-popup-button-flex' : '') + ' ' +\n                  (btn.cssClass || '')\"\n                [disabled]=\"btn.disabled\"\n                [icon]=\"btn.icon\"\n                [theme]=\"s.theme\"\n                [themeVariant]=\"s.themeVariant\"\n                [variant]=\"btn.variant || s.buttonVariant\"\n                (click)=\"!btn.disabled && btn.handler($event)\">\n                {{btn.text}}\n              </mbsc-button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"!_isModal\" [ngTemplateOutlet]=\"ngcontent\">\n    </ng-container>\n  "})],MbscPopup);return MbscPopup}(PopupBase);var MbscPrompt=function(){function MbscPrompt(){this.value="";}__decorate([core.ViewChild("popup",{static:false}),__metadata("design:type",MbscPopup)],MbscPrompt.prototype,"popup",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPrompt.prototype,"inputType",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPrompt.prototype,"label",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPrompt.prototype,"message",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPrompt.prototype,"placeholder",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscPrompt.prototype,"title",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscPrompt.prototype,"props",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscPrompt.prototype,"value",void 0);MbscPrompt=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-prompt",template:'\n    <mbsc-popup #popup [options]="props">\n      <div class="mbsc-alert-content">\n        <h2 *ngIf="title" class="mbsc-alert-title">{{title}}</h2>\n        <p class="mbsc-alert-message">{{message || \'\'}}</p>\n        <mbsc-input\n          class="mbsc-prompt-input"\n          [label]="label"\n          [placeholder]="placeholder || \'\'"\n          [theme]="props.theme"\n          [themeVariant]="props.themeVariant"\n          [type]="inputType"\n          [(value)]="value"\n        ></mbsc-input>\n      </div>\n    </mbsc-popup>\n  '})],MbscPrompt);return MbscPrompt}();var MbscSnackbar=function(){function MbscSnackbar(){}MbscSnackbar.prototype.onButtonClick=function(){this.popup.close();if(this.button&&this.button.action){this.button.action();}};__decorate([core.ViewChild("popup",{static:false}),__metadata("design:type",MbscPopup)],MbscSnackbar.prototype,"popup",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscSnackbar.prototype,"button",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSnackbar.prototype,"message",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscSnackbar.prototype,"props",void 0);MbscSnackbar=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-snackbar",template:'\n    <mbsc-popup #popup [options]="props">\n      <div class="mbsc-snackbar-cont mbsc-toast-background">\n        <div class="mbsc-snackbar-message">{{message}}</div>\n          <mbsc-button *ngIf="button"\n            class="mbsc-snackbar-button"\n            [icon]="button.icon"\n            [theme]="props.theme"\n            [themeVariant]="props.themeVariant"\n            variant="flat"\n            (click)="onButtonClick()"\n          >\n            {{button.text}}\n          </mbsc-button>\n      </div>\n    </mbsc-popup>\n  '})],MbscSnackbar);return MbscSnackbar}();var MbscPopupModule=function(){function MbscPopupModule(){}MbscPopupModule=__decorate([core.NgModule({declarations:[MbscPopup,MbscPrompt,MbscSnackbar,PopupBase],entryComponents:[MbscPopup,MbscSnackbar,MbscPrompt],exports:[MbscPopup,MbscPrompt,MbscSnackbar],imports:[common.CommonModule,MbscButtonModule,MbscInputModule]})],MbscPopupModule);return MbscPopupModule}();var MbscCalendarDay=function(_super){__extends(MbscCalendarDay,_super);function MbscCalendarDay(){return _super!==null&&_super.apply(this,arguments)||this}MbscCalendarDay.prototype._getLabelKey=function(index,label){return label.id};__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarDay.prototype,"active",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarDay.prototype,"clickToCreate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarDay.prototype,"colors",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarDay.prototype,"dataTimezone",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarDay.prototype,"date",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarDay.prototype,"day",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarDay.prototype,"dayIndex",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscCalendarDay.prototype,"dayTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscCalendarDay.prototype,"dayContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscCalendarDay.prototype,"dayWidths",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarDay.prototype,"disabled",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarDay.prototype,"display",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarDay.prototype,"displayTimezone",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarDay.prototype,"dragToCreate",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarDay.prototype,"dragToResize",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarDay.prototype,"dragToMove",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarDay.prototype,"eventText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarDay.prototype,"eventsText",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarDay.prototype,"exclusiveEndDates",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarDay.prototype,"firstDay",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarDay.prototype,"hasMarks",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarDay.prototype,"hoverEnd",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarDay.prototype,"hoverStart",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarDay.prototype,"isActiveMonth",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarDay.prototype,"isPicker",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarDay.prototype,"labels",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscCalendarDay.prototype,"labelTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscCalendarDay.prototype,"labelContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarDay.prototype,"dragData",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarDay.prototype,"marks",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarDay.prototype,"month",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarDay.prototype,"monthShort",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarDay.prototype,"outer",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarDay.prototype,"rangeEnd",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarDay.prototype,"rangeStart",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarDay.prototype,"resourcesMap",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarDay.prototype,"selected",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarDay.prototype,"showEventTooltip",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarDay.prototype,"text",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarDay.prototype,"timeFormat",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarDay.prototype,"timezonePlugin",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarDay.prototype,"todayText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarDay.prototype,"type",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onDayClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onDayDoubleClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onDayRightClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onHoverIn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onHoverOut",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onLabelClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onLabelDoubleClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onLabelRightClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onLabelHoverIn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onLabelHoverOut",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onLabelDelete",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onLabelUpdateStart",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onLabelUpdateMove",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onLabelUpdateEnd",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onLabelUpdateModeOn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarDay.prototype,"onLabelUpdateModeOff",void 0);MbscCalendarDay=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(click)":"_onClick($event)","(contextmenu)":"_onRightClick($event)","[attr.aria-label]":"_ariaLabel","[attr.tabindex]":"s.disabled ? null : s.active ? 0 : -1","[class]":"_cssClass","[style.backgroundColor]":'_cellStyles ? _cellStyles.backgroundColor : ""',"[style.color]":'_cellStyles ? _cellStyles.color : ""',role:"gridcell"},selector:"mbsc-calendar-day",template:'\x3c!-- TRIAL --\x3e\n    <div [class]="\'mbsc-calendar-cell-inner mbsc-calendar-\' + s.type + \'-inner\' + _theme +\n        (s.type === \'day\' ? \'\' : this._hb) +\n        (s.display ? \'\' : \' mbsc-calendar-day-hidden\')">\n\n      <ng-template *ngIf="dayTemplate" [ngTemplateOutlet]="dayTemplate" [ngTemplateOutletContext]="{ $implicit: _data }"></ng-template>\n\n      <div *ngIf="s.text === 1"\n        [class]="\'mbsc-calendar-month-name\' + _theme + _rtl">\n        {{s.monthShort}}\n      </div>\n      <div *ngIf="!dayTemplate"\n        [class]="\'mbsc-calendar-cell-text mbsc-calendar-\' + s.type + \'-text\' + _theme + _todayClass"\n        [ngStyle]="_circleStyles">\n        {{s.text}}\n      </div>\n\n      <div *ngIf="s.marks && !dayTemplate">\n        <div [class]="\'mbsc-calendar-marks\' + _theme + _rtl">\n          <div *ngFor="let mark of s.marks; trackBy: _getKey"\n            [class]="\'mbsc-calendar-mark \' + (mark.markCssClass || \'\') + _theme"\n            [style.background]="mark.color"></div>\n        </div>\n      </div>\n\n      <ng-template *ngIf="dayContentTemplate" [ngTemplateOutlet]="dayContentTemplate" [ngTemplateOutletContext]="{ $implicit: _data }"></ng-template>\n\n      <div *ngIf="s.labels">\n        <div *ngIf="_draggedLabelOrig && _draggedLabelOrig.event" [class]="\'mbsc-calendar-labels mbsc-calendar-labels-dragging\'">\n          <div [style.width]="_width(_draggedLabelOrig.width || 100)">\n            <mbsc-calendar-label\n              [date]="s.date"\n              [dataTimezone]="dataTimezone"\n              [displayTimezone]="displayTimezone"\n              [drag]="s.dragToMove"\n              [resize]="s.dragToResize"\n              [event]="_draggedLabelOrig.event"\n              [exclusiveEndDates]="exclusiveEndDates"\n              [firstDay]="s.firstDay"\n              [hidden]="!!s.dragData!.draggedDates"\n              [isUpdate]="true"\n              [resourcesMap]="s.resourcesMap"\n              [rtl]="s.rtl"\n              [showEventTooltip]="s.showEventTooltip"\n              [showText]="true"\n              [theme]="s.theme"\n              [timeFormat]="s.timeFormat"\n              [timezonePlugin]="timezonePlugin"\n              [template]="labelTemplate"\n              [contentTemplate]="labelContentTemplate"\n              [onClick]="_onLabelClick"\n              [onDoubleClick]="_onLabelDoubleClick"\n              [onRightClick]="_onLabelRightClick"\n              [onHoverIn]="_onLabelHoverIn"\n              [onHoverOut]="_onLabelHoverOut"\n              [onDelete]="s.onLabelDelete"\n              [onDragStart]="s.onLabelUpdateStart"\n              [onDragMove]="s.onLabelUpdateMove"\n              [onDragEnd]="s.onLabelUpdateEnd"\n              [onDragModeOn]="s.onLabelUpdateModeOn"\n              [onDragModeOff]="s.onLabelUpdateModeOff"\n            >\n            </mbsc-calendar-label>\n          </div>\n        </div>\n\n        <div *ngIf="_draggedLabel && _draggedLabel.event" [class]="\'mbsc-calendar-labels mbsc-calendar-labels-dragging\'">\n          <div [class]="\'mbsc-calendar-label-wrapper\'" [style.width]="_width(_draggedLabel.width  || 100)">\n            <mbsc-calendar-label\n              [date]="s.date"\n              [dataTimezone]="dataTimezone"\n              [displayTimezone]="displayTimezone"\n              [drag]="s.dragToMove"\n              [resize]="s.dragToResize"\n              [event]="_draggedLabel.event"\n              [exclusiveEndDates]="exclusiveEndDates"\n              [firstDay]="s.firstDay"\n              [isUpdate]="true"\n              [resourcesMap]="s.resourcesMap"\n              [rtl]="s.rtl"\n              [showEventTooltip]="s.showEventTooltip"\n              [showText]="true"\n              [theme]="s.theme"\n              [timeFormat]="s.timeFormat"\n              [timezonePlugin]="timezonePlugin"\n              [template]="labelTemplate"\n              [contentTemplate]="labelContentTemplate"\n              [onClick]="_onLabelClick"\n              [onDoubleClick]="_onLabelDoubleClick"\n              [onRightClick]="_onLabelRightClick"\n              [onHoverIn]="_onLabelHoverIn"\n              [onHoverOut]="_onLabelHoverOut"\n              [onDelete]="s.onLabelDelete"\n              [onDragStart]="s.onLabelUpdateStart"\n              [onDragMove]="s.onLabelUpdateMove"\n              [onDragEnd]="s.onLabelUpdateEnd"\n              [onDragModeOn]="s.onLabelUpdateModeOn"\n              [onDragModeOff]="s.onLabelUpdateModeOff"\n            >\n            </mbsc-calendar-label>\n          </div>\n        </div>\n\n        <div class="mbsc-calendar-labels">\n          <ng-container *ngFor="let label of s.labels.data;trackBy: _getLabelKey">\n            <div *ngIf="label.placeholder" class="mbsc-calendar-text mbsc-calendar-text-placeholder"></div>\n\n            <mbsc-calendar-label *ngIf="label.more || label.count"\n              [count]="label.count ? label.count + \' \' + (label.count > 1 ? s.eventsText : s.eventText) : undefined"\n              [id]="label.id"\n              [isActiveMonth]="isActiveMonth"\n              [more]="label.more"\n              [rtl]="s.rtl"\n              [theme]="s.theme"\n              [onClick]="_onLabelClick"\n              [onDoubleClick]="_onLabelDoubleClick"\n              [onRightClick]="_onLabelRightClick"\n              [onHoverIn]="_onLabelHoverIn"\n              [onHoverOut]="_onLabelHoverOut"\n              [showText]="true"\n              >\n            </mbsc-calendar-label>\n\n            <ng-container *ngIf="label.multiDay">\n              <div class="mbsc-calendar-label-wrapper" [style.width]="_width(label.width)">\n                  <mbsc-calendar-label\n                    [date]="s.date"\n                    [dataTimezone]="dataTimezone"\n                    [displayTimezone]="displayTimezone"\n                    [drag]="s.dragToMove"\n                    [resize]="s.dragToResize"\n                    [event]="label.event"\n                    [exclusiveEndDates]="exclusiveEndDates"\n                    [firstDay]="s.firstDay"\n                    [id]="label.id"\n                    [inactive]="label.event && s.dragData && s.dragData.draggedEvent && label.event.id === s.dragData.draggedEvent.id"\n                    [isActiveMonth]="isActiveMonth"\n                    [isPicker]="s.isPicker"\n                    [lastDay]="label.lastDay"\n                    [resourcesMap]="s.resourcesMap"\n                    [rtl]="s.rtl"\n                    [showEventTooltip]="s.showEventTooltip"\n                    [showText]="true"\n                    [theme]="s.theme"\n                    [timeFormat]="s.timeFormat"\n                    [timezonePlugin]="timezonePlugin"\n                    [template]="labelTemplate"\n                    [contentTemplate]="labelContentTemplate"\n                    [onClick]="_onLabelClick"\n                    [onDoubleClick]="_onLabelDoubleClick"\n                    [onRightClick]="_onLabelRightClick"\n                    [onHoverIn]="_onLabelHoverIn"\n                    [onHoverOut]="_onLabelHoverOut"\n                    [onDelete]="s.onLabelDelete"\n                    [onDragStart]="s.onLabelUpdateStart"\n                    [onDragMove]="s.onLabelUpdateMove"\n                    [onDragEnd]="s.onLabelUpdateEnd"\n                    [onDragModeOn]="s.onLabelUpdateModeOn"\n                    [onDragModeOff]="s.onLabelUpdateModeOff"\n                  >\n                  </mbsc-calendar-label>\n              </div>\n              <mbsc-calendar-label\n                [date]="s.date"\n                [dataTimezone]="dataTimezone"\n                [displayTimezone]="displayTimezone"\n                [drag]="s.dragToMove"\n                [resize]="s.dragToResize"\n                [event]="label.event"\n                [exclusiveEndDates]="exclusiveEndDates"\n                [firstDay]="s.firstDay"\n                [id]="label.id"\n                [inactive]="label.event && s.dragData && s.dragData.draggedEvent && label.event.id === s.dragData.draggedEvent.id"\n                [resourcesMap]="s.resourcesMap"\n                [rtl]="s.rtl"\n                [showEventTooltip]="s.showEventTooltip"\n                [theme]="s.theme"\n                [timeFormat]="s.timeFormat"\n                [timezonePlugin]="timezonePlugin"\n                [template]="labelTemplate"\n                [contentTemplate]="labelContentTemplate"\n                [onClick]="_onLabelClick"\n                [onDoubleClick]="_onLabelDoubleClick"\n                [onRightClick]="_onLabelRightClick"\n                [onHoverIn]="_onLabelHoverIn"\n                [onHoverOut]="_onLabelHoverOut"\n                [onDelete]="s.onLabelDelete"\n                [onDragStart]="s.onLabelUpdateStart"\n                [onDragMove]="s.onLabelUpdateMove"\n                [onDragEnd]="s.onLabelUpdateEnd"\n                [onDragModeOn]="s.onLabelUpdateModeOn"\n                [onDragModeOff]="s.onLabelUpdateModeOff"\n              >\n              </mbsc-calendar-label>\n            </ng-container>\n\n            <mbsc-calendar-label *ngIf="!label.multiDay && label.event"\n              [date]="s.date"\n              [dataTimezone]="dataTimezone"\n              [displayTimezone]="displayTimezone"\n              [drag]="s.dragToMove"\n              [resize]="s.dragToResize"\n              [event]="label.event"\n              [exclusiveEndDates]="exclusiveEndDates"\n              [firstDay]="s.firstDay"\n              [id]="label.id"\n              [inactive]="label.event && s.dragData && s.dragData.draggedEvent && label.event.id === s.dragData.draggedEvent.id"\n              [isActiveMonth]="isActiveMonth"\n              [isPicker]="s.isPicker"\n              [resourcesMap]="s.resourcesMap"\n              [rtl]="s.rtl"\n              [showText]="label.showText"\n              [showEventTooltip]="s.showEventTooltip"\n              [theme]="s.theme"\n              [timeFormat]="s.timeFormat"\n              [timezonePlugin]="timezonePlugin"\n              [template]="labelTemplate"\n              [contentTemplate]="labelContentTemplate"\n              [onClick]="_onLabelClick"\n              [onDoubleClick]="_onLabelDoubleClick"\n              [onRightClick]="_onLabelRightClick"\n              [onHoverIn]="_onLabelHoverIn"\n              [onHoverOut]="_onLabelHoverOut"\n              [onDelete]="s.onLabelDelete"\n              [onDragStart]="s.onLabelUpdateStart"\n              [onDragMove]="s.onLabelUpdateMove"\n              [onDragEnd]="s.onLabelUpdateEnd"\n              [onDragModeOn]="s.onLabelUpdateModeOn"\n              [onDragModeOff]="s.onLabelUpdateModeOff"\n            >\n            </mbsc-calendar-label>\n          </ng-container>\n        </div>\n        <div class="mbsc-calendar-text mbsc-calendar-text-placeholder"></div>\n      </div>\n    </div>\n  '})],MbscCalendarDay);return MbscCalendarDay}(CalendarDayBase);var MbscCalendarLabel=function(_super){__extends(MbscCalendarLabel,_super);function MbscCalendarLabel(){return _super!==null&&_super.apply(this,arguments)||this}__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscCalendarLabel.prototype,"contentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarLabel.prototype,"count",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarLabel.prototype,"dataTimezone",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarLabel.prototype,"date",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarLabel.prototype,"displayTimezone",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarLabel.prototype,"drag",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarLabel.prototype,"hidden",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarLabel.prototype,"firstDay",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarLabel.prototype,"event",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarLabel.prototype,"editMode",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarLabel.prototype,"exclusiveEndDates",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarLabel.prototype,"inactive",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarLabel.prototype,"isActiveMonth",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarLabel.prototype,"resize",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarLabel.prototype,"hideLabel",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarLabel.prototype,"id",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarLabel.prototype,"isPicker",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarLabel.prototype,"isUpdate",void 0);__decorate([core.Input(),__metadata("design:type",Date)],MbscCalendarLabel.prototype,"lastDay",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarLabel.prototype,"more",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarLabel.prototype,"resourcesMap",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarLabel.prototype,"showEventTooltip",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarLabel.prototype,"showText",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscCalendarLabel.prototype,"template",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarLabel.prototype,"timeFormat",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarLabel.prototype,"timezonePlugin",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarLabel.prototype,"onClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarLabel.prototype,"onDoubleClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarLabel.prototype,"onRightClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarLabel.prototype,"onHoverIn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarLabel.prototype,"onHoverOut",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarLabel.prototype,"onDelete",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarLabel.prototype,"onDragStart",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarLabel.prototype,"onDragMove",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarLabel.prototype,"onDragEnd",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarLabel.prototype,"onDragModeOn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarLabel.prototype,"onDragModeOff",void 0);MbscCalendarLabel=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(click)":"_onClick($event)","(contextmenu)":"_onRightClick($event)","[attr.data-id]":"showText && event ? event.id : null","[attr.tabindex]":"_tabIndex","[attr.title]":"_title","[class]":"_cssClass","[style.color]":"_color"},selector:"mbsc-calendar-label",template:'\n    <div *ngIf="_hasResizeStart && event && event.editable !== false" [class]="\'mbsc-calendar-label-resize mbsc-calendar-label-resize-start\' + _rtl +\n      (isUpdate ? \' mbsc-calendar-label-resize-start-touch\' : \'\')">\n    </div>\n    <div *ngIf="_hasResizeEnd && event && event.editable !== false" [class]="\'mbsc-calendar-label-resize mbsc-calendar-label-resize-end\' + _rtl +\n      (isUpdate ? \' mbsc-calendar-label-resize-start-touch\' : \'\')">\n    </div>\n    <div *ngIf="showText && !more && !template" [class]="\'mbsc-calendar-label-background\' + _theme"></div>\n    <div *ngIf="!template || !!more" [class]="\'mbsc-calendar-label-inner\' + _theme" [style.color]="_textColor">\n      <div *ngIf="_html" [class]="\'mbsc-calendar-label-text\' + _theme" [style.color]="event && event.textColor" [innerHTML]="_html">\n      </div>\n      <div *ngIf="!_html" [class]="\'mbsc-calendar-label-text\' + _theme" [style.color]="event && event.textColor">\n        <ng-template\n          [ngTemplateOutlet]="contentTemplate"\n          [ngTemplateOutletContext]="{ $implicit: _data }">\n        </ng-template>\n      </div>\n    </div>\n    <ng-template *ngIf="showText && !more && template"\n      [ngTemplateOutlet]="template"\n      [ngTemplateOutletContext]="{ $implicit: _data }">\n    </ng-template>'})],MbscCalendarLabel);return MbscCalendarLabel}(CalendarLabelBase);var MbscCalendarView=function(_super){__extends(MbscCalendarView,_super);function MbscCalendarView(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.selectedDates={};_this._noop=noop;return _this}MbscCalendarView.prototype._mounted=function(){this._body=this.vBody.nativeElement;_super.prototype._mounted.call(this);};MbscCalendarView.prototype._updated=function(){this._pickerCont=this.vPickerCont&&this.vPickerCont.nativeElement;_super.prototype._updated.call(this);};__decorate([core.ViewChild("body",{static:false}),__metadata("design:type",core.ElementRef)],MbscCalendarView.prototype,"vBody",void 0);__decorate([core.ViewChild("pickerCont",{static:false}),__metadata("design:type",core.ElementRef)],MbscCalendarView.prototype,"vPickerCont",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarView.prototype,"activeDate",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"cssClass",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"clickToCreate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"colors",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"dataTimezone",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscCalendarView.prototype,"dayTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscCalendarView.prototype,"dayContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"displayTimezone",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"dragToCreate",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"dragToResize",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"dragToMove",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarView.prototype,"endDay",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"eventOrder",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"eventRange",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarView.prototype,"eventRangeSize",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"exclusiveEndDates",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"hasContent",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"hasPicker",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscCalendarView.prototype,"headerTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"height",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarView.prototype,"hoverEnd",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarView.prototype,"hoverStart",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"invalid",void 0);__decorate([core.Input(),__metadata("design:type",InstanceServiceBase)],MbscCalendarView.prototype,"instanceService",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"isPicker",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"labels",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscCalendarView.prototype,"labelTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscCalendarView.prototype,"labelContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"dragData",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"max",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"marked",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"min",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"mouseSwipe",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"mousewheel",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"noOuterChange",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"downIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"nextIconH",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"nextIconV",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"prevIconH",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"prevIconV",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"upIcon",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"pages",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarView.prototype,"pageLoad",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"refDate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"resourcesMap",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarView.prototype,"rangeEnd",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarView.prototype,"rangeStart",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"responsiveStyle",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"selectedDates",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"selectView",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"showCalendar",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"showControls",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"showEventTooltip",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"showLabelCount",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"showOuterDays",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"showSchedule",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"showToday",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"showWeekNumbers",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarView.prototype,"size",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarView.prototype,"startDay",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarView.prototype,"swipe",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"timeFormat",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"timezonePlugin",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarView.prototype,"update",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"valid",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarView.prototype,"weeks",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscCalendarView.prototype,"width",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"calendarScroll",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"calendarType",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"getDate",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"getDay",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"getMaxDayOfMonth",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"getMonth",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"getWeekNumber",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"getYear",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"dateFormat",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscCalendarView.prototype,"dayNames",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscCalendarView.prototype,"dayNamesMin",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscCalendarView.prototype,"dayNamesShort",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"eventText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"eventsText",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarView.prototype,"firstDay",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscCalendarView.prototype,"monthNames",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscCalendarView.prototype,"monthNamesShort",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"moreEventsPluralText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"moreEventsText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"todayText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarView.prototype,"yearSuffix",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onActiveChange",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onCellHoverIn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onCellHoverOut",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onDayClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onDayDoubleClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onDayRightClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onDayHoverIn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onDayHoverOut",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onGestureStart",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onLabelClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onLabelDoubleClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onLabelRightClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onLabelHoverIn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onLabelHoverOut",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onLabelDelete",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onLabelUpdateStart",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onLabelUpdateMove",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onLabelUpdateEnd",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onLabelUpdateModeOn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onLabelUpdateModeOff",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onPageChange",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onPageLoaded",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onPageLoading",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onResize",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscCalendarView.prototype,"onTodayClick",void 0);MbscCalendarView=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(click)":"_noop","[class]":"_cssClass","[style.height]":"_dim.height","[style.width]":"_dim.width"},selector:"mbsc-calendar-view",template:'\n    <div [class]="\'mbsc-calendar-wrapper\' + _theme + _hb +\n      (s.hasContent || !s.showCalendar ? \' mbsc-calendar-wrapper-fixed\' : \'\')\n    ">\n      <div [class]="\'mbsc-calendar-header\' + _theme + _hb + (_isVertical ? \' mbsc-calendar-header-vertical\' : \'\')">\n        <div *ngIf="s.showControls" [class]="\'mbsc-calendar-controls\' + _theme">\n          <ng-template [ngTemplateOutlet]="headerTemplate || defaultHeader"></ng-template>\n          <ng-template #defaultHeader>\n            <mbsc-calendar-nav [class]="\'mbsc-calendar-title-wrapper\' + (_pageNr > 1 ? \' mbsc-calendar-title-wrapper-multi\' : \'\')">\n            </mbsc-calendar-nav>\n            <mbsc-calendar-prev [class]="\'mbsc-calendar-button-prev\' + (_pageNr > 1 ? \' mbsc-calendar-button-prev-multi\' : \'\')">\n            </mbsc-calendar-prev>\n            <mbsc-calendar-today class="mbsc-calendar-header-today">\n            </mbsc-calendar-today>\n            <mbsc-calendar-next [class]="\'mbsc-calendar-button-next\' + (_pageNr > 1 ? \' mbsc-calendar-button-next-multi\' : \'\')">\n            </mbsc-calendar-next>\n          </ng-template>\n        </div>\n        <mbsc-calendar-weekdays *ngIf="_isVertical && s.showCalendar"\n          [dayNames]="s.dayNames"\n          [dayNamesShort]="_dayNames"\n          [firstDay]="s.firstDay"\n          [hidden]="_view !== MONTH_VIEW && !_hasPicker"\n          [showWeekNumbers]="s.showWeekNumbers"\n          [rtl]="_rtl"\n          [theme]="_theme"\n        >\n        </mbsc-calendar-weekdays>\n      </div>\n      <ng-template #monthView let-timestamp="timestamp" let-drag="drag" let-isActive="isActive">\n        <mbsc-month-view\n          [activeDate]="_active"\n          [calendarType]="s.calendarType"\n          [cellSizes]="state.cellSizes"\n          [clickToCreate]="s.clickToCreate"\n          [colors]="_colors"\n          [dayNames]="s.dayNames"\n          [dayNamesShort]="_dayNames"\n          [dayTemplate]="dayTemplate"\n          [dayContentTemplate]="dayContentTemplate"\n          [dataTimezone]="dataTimezone"\n          [displayTimezone]="displayTimezone"\n          [dragData]="drag && s.dragData"\n          [dragToCreate]="drag && s.dragToCreate"\n          [dragToResize]="drag && s.dragToResize"\n          [dragToMove]="drag && s.dragToMove"\n          [eventText]="s.eventText"\n          [eventsText]="s.eventsText"\n          [exclusiveEndDates]="exclusiveEndDates"\n          [firstDay]="s.firstDay"\n          [firstPageDay]="timestamp"\n          [getDate]="s.getDate"\n          [getDay]="s.getDay"\n          [getMonth]="s.getMonth"\n          [getYear]="s.getYear"\n          [getWeekNumber]="s.getWeekNumber"\n          [hasMarks]="!!_marked"\n          [hoverEnd]="s.hoverEnd"\n          [hoverStart]="s.hoverStart"\n          [invalid]="_invalid"\n          [isActive]="isActive"\n          [isPicker]="s.isPicker"\n          [labels]="_labelsLayout"\n          [labelTemplate]="labelTemplate"\n          [labelContentTemplate]="labelContentTemplate"\n          [marked]="_marked"\n          [max]="_maxDate"\n          [min]="_minDate"\n          [monthNames]="s.monthNames"\n          [monthNamesShort]="s.monthNamesShort"\n          [onDayClick]="_onDayClick"\n          [onDayDoubleClick]="s.onDayDoubleClick"\n          [onDayRightClick]="s.onDayRightClick"\n          [onDayHoverIn]="_onDayHoverIn"\n          [onDayHoverOut]="_onDayHoverOut"\n          [onLabelClick]="_onLabelClick"\n          [onLabelDoubleClick]="s.onLabelDoubleClick"\n          [onLabelRightClick]="s.onLabelRightClick"\n          [onLabelHoverIn]="s.onLabelHoverIn"\n          [onLabelHoverOut]="s.onLabelHoverOut"\n          [onLabelDelete]="s.onLabelDelete"\n          [onLabelUpdateStart]="drag && s.onLabelUpdateStart"\n          [onLabelUpdateMove]="drag && s.onLabelUpdateMove"\n          [onLabelUpdateEnd]="drag && s.onLabelUpdateEnd"\n          [onLabelUpdateModeOn]="drag && s.onLabelUpdateModeOn"\n          [onLabelUpdateModeOff]="drag && s.onLabelUpdateModeOff"\n          [rangeEnd]="s.rangeEnd"\n          [rangeStart]="s.rangeStart"\n          [resourcesMap]="s.resourcesMap"\n          [rtl]="s.rtl"\n          [selectedDates]="s.selectedDates"\n          [showEventTooltip]="s.showEventTooltip"\n          [showOuter]="_showOuter"\n          [showSingleMark]="!!_marksMap"\n          [showWeekDays]="!_isVertical"\n          [showWeekNumbers]="s.showWeekNumbers"\n          [theme]="s.theme"\n          [timeFormat]="s.timeFormat"\n          [timezonePlugin]="timezonePlugin"\n          [todayText]="s.todayText"\n          [valid]="_valid"\n          [weeks]="_weeks"\n        >\n        </mbsc-month-view>\n      </ng-template>\n      <div [class]="\'mbsc-calendar-body\' + _theme" (keydown)="_onKeyDown($event)" #body>\n        <div *ngIf="s.showCalendar" class="mbsc-calendar-body-inner">\n          <div *ngIf="_isGrid" [class]="\'mbsc-calendar-grid mbsc-flex-1-1 mbsc-flex-col\' + _theme + _hb">\n            <div *ngFor=" let row of _monthsMulti; index as i" class="mbsc-calendar-grid-row mbsc-flex mbsc-flex-1-1">\n              <div *ngFor="let item of row; index as j;"\n                [class]="\'mbsc-calendar-grid-item mbsc-flex-col mbsc-flex-1-1\' + _theme">\n                <div [class]="\'mbsc-calendar-month-title\' + _theme">{{item | date: \'MMMM\'}}</div>\n                <ng-template\n                  [ngTemplateOutlet]="monthView"\n                  [ngTemplateOutletContext]="{\n                    timestamp: item,\n                    drag: false,\n                    isActive: true\n                  }">\n                </ng-template>\n              </div>\n            </div>\n          </div>\n          <div *ngIf="s.selectView === MONTH_VIEW && !_isGrid" (animationend)="_onViewAnimationEnd()" [class]="_getPickerClass(MONTH_VIEW)">\n            <mbsc-scrollview-base #scrollview\n              [axis]="_axis"\n              [batchSize]="1"\n              [changeOnEnd]="true"\n              class="mbsc-calendar-scroll-wrapper"\n              easing="ease-out"\n              [items]="_months"\n              [itemNr]="_pageNr"\n              [itemSize]="state.pageSize / _pageNr"\n              [maxIndex]="_maxIndex"\n              [minIndex]="_minIndex"\n              [mouseSwipe]="s.mouseSwipe"\n              [mousewheel]="_mousewheel"\n              [onAnimationEnd]="_onAnimationEnd"\n              [onGestureStart]="_onGestureStart"\n              [onIndexChange]="_onPageChange"\n              [onStart]="_onStart"\n              [prevAnim]="_prevAnim"\n              [rtl]="s.rtl"\n              [selectedIndex]="_pageIndex"\n              [snap]="true"\n              [swipe]="s.swipe"\n              time="200"\n            >\n              <div *ngFor="let item of scrollview.visibleItems; trackBy: _getKey"\n                [class]="\'mbsc-calendar-slide\' + _theme + _rtl"\n                [ngStyle]="_getPageStyle(item.key, scrollview._offset, _pageNr)"\n              >\n                <ng-template\n                  [ngTemplateOutlet]="monthView"\n                  [ngTemplateOutletContext]="{\n                    timestamp: _getPageDay(item.key),\n                    drag: true,\n                    isActive: item.key >= _pageIndex && item.key < _pageIndex + _pageNr && _view === MONTH_VIEW\n                  }">\n                </ng-template>\n              </div>\n            </mbsc-scrollview-base>\n          </div>\n          <div *ngIf="!_hasPicker" #pickerCont>\n            <ng-container *ngTemplateOutlet="picker"></ng-container>\n          </div>\n        </div>\n      </div>\n    </div>\n    <ng-content></ng-content>\n    <mbsc-popup *ngIf="_hasPicker"\n      [anchor]="_pickerBtn"\n      class="mbsc-calendar-popup"\n      [closeOnScroll]="true"\n      [contentPadding]="false"\n      [context]="s.context"\n      display="anchored"\n      [isOpen]="_view !== MONTH_VIEW"\n      [locale]="s.locale"\n      (onClose)="_onPickerClose()"\n      (onOpen)="_onPickerOpen()"\n      [rtl]="s.rtl"\n      [scrollLock]="false"\n      [showOverlay]="false"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n    >\n      <div (keydown)="_onKeyDown($event)">\n        <div [class]="\'mbsc-calendar-controls\' + _theme">\n          <div [class]="\'mbsc-calendar-picker-button-wrapper mbsc-calendar-title-wrapper\' + _theme">\n            <mbsc-button\n              class="mbsc-calendar-button"\n              (click)="_onPickerBtnClick($event)"\n              [theme]="s.theme"\n              [themeVariant]="s.themeVariant"\n              variant="flat"\n            >\n              {{_viewTitle}}\n              <mbsc-icon *ngIf="s.downIcon"\n                [svg]="state.view === MULTI_YEAR_VIEW ? s.downIcon : s.upIcon"\n                [theme]="s.theme"\n                [themeVariant]="s.themeVariant"\n              ></mbsc-icon>\n            </mbsc-button>\n          </div>\n          <mbsc-button\n            [attr.aria-label]="s.prevText"\n            class="mbsc-calendar-button"\n            (click)="prevPage()"\n            [disabled]="_isPrevDisabled(true)"\n            [iconSvg]="_prevIcon"\n            [theme]="s.theme"\n            [themeVariant]="s.themeVariant"\n            variant="flat"\n          ></mbsc-button>\n          <mbsc-button\n            [attr.aria-label]="s.nextText"\n            class="mbsc-calendar-button"\n            (click)="nextPage()"\n            [disabled]="_isNextDisabled(true)"\n            [iconSvg]="_nextIcon"\n            [theme]="s.theme"\n            [themeVariant]="s.themeVariant"\n            variant="flat"\n          ></mbsc-button>\n        </div>\n        <div class="mbsc-calendar-picker-wrapper" #pickerCont>\n          <ng-container *ngTemplateOutlet="picker"></ng-container>\n        </div>\n      </div>\n    </mbsc-popup>\n    <ng-template #picker>\n      <div *ngIf="state.view === MULTI_YEAR_VIEW || state.viewClosing === MULTI_YEAR_VIEW || selectView === MULTI_YEAR_VIEW"\n        (animationend)="_onViewAnimationEnd()"\n        [class]="_getPickerClass(MULTI_YEAR_VIEW)"\n      >\n        <mbsc-scrollview-base #multiYearView\n          [axis]="_axis"\n          [batchSize]="1"\n          [changeOnEnd]="true"\n          [class]="\'mbsc-calendar-scroll-wrapper\' + _theme"\n          easing="ease-out"\n          [items]="_months"\n          [itemSize]="state.pickerSize"\n          [maxIndex]="_maxYearsIndex"\n          [minIndex]="_minYearsIndex"\n          [mousewheel]="_mousewheel"\n          [onGestureEnd]="_onGestureEnd"\n          [onIndexChange]="_onYearsPageChange"\n          [prevAnim]="_prevAnim"\n          [rtl]="s.rtl"\n          [selectedIndex]="_yearsIndex"\n          [snap]="true"\n          time="200"\n        >\n          <div *ngFor="let item of multiYearView.visibleItems; trackBy: _getKey"\n            [class]="\'mbsc-calendar-picker-slide mbsc-calendar-slide\' + _theme + _rtl"\n            [ngStyle]="_getPageStyle(item.key, multiYearView._offset)"\n          >\n            <mbsc-multi-year-view\n              [active]="_active"\n              [activeMonth]="_activeMonth"\n              [firstYear]="_getPageYears(item.key)"\n              [getDate]="s.getDate"\n              [getYear]="s.getYear"\n              [max]="_maxYears"\n              [min]="_minYears"\n              [rtl]="s.rtl"\n              [theme]="s.theme"\n              [yearSuffix]="s.yearSuffix"\n              [onYearClick]="_onYearClick"\n            ></mbsc-multi-year-view>\n          </div>\n        </mbsc-scrollview-base>\n      </div>\n      <div *ngIf="state.view === YEAR_VIEW || state.viewClosing === YEAR_VIEW || selectView === YEAR_VIEW"\n        (animationend)="_onViewAnimationEnd()"\n        [class]="_getPickerClass(YEAR_VIEW)"\n      >\n        <mbsc-scrollview-base #yearView\n          [axis]="_axis"\n          [batchSize]="1"\n          [changeOnEnd]="true"\n          [class]="\'mbsc-calendar-scroll-wrapper\' + _theme"\n          easing="ease-out"\n          [items]="_months"\n          [itemSize]="state.pickerSize"\n          [maxIndex]="_maxYearIndex"\n          [minIndex]="_minYearIndex"\n          [mousewheel]="_mousewheel"\n          [onGestureEnd]="_onGestureEnd"\n          [onIndexChange]="_onYearPageChange"\n          [prevAnim]="_prevAnim"\n          [rtl]="s.rtl"\n          [selectedIndex]="_yearIndex"\n          [snap]="true"\n          time="200"\n        >\n          <div *ngFor="let item of yearView.visibleItems; trackBy: _getKey"\n            [class]="\'mbsc-calendar-picker-slide mbsc-calendar-slide\' + _theme + _rtl"\n            [ngStyle]="_getPageStyle(item.key, yearView._offset)"\n          >\n            <mbsc-year-view\n              [active]="_active"\n              [activeMonth]="_activeMonth"\n              [getDate]="s.getDate"\n              [getMonth]="s.getMonth"\n              [getYear]="s.getYear"\n              [max]="_maxYear"\n              [min]="_minYear"\n              [monthNames]="s.monthNames"\n              [monthNamesShort]="s.monthNamesShort"\n              [onMonthClick]="_onMonthClick"\n              [rtl]="s.rtl"\n              [theme]="s.theme"\n              [year]="_getPageYear(item.key)"\n            ></mbsc-year-view>\n          </div>\n        </mbsc-scrollview-base>\n      </div>\n    </ng-template>'})],MbscCalendarView);return MbscCalendarView}(CalendarViewBase);var MbscCalendarWeekDays=function(){function MbscCalendarWeekDays(){this.days=ARRAY7;}__decorate([core.Input(),__metadata("design:type",Number)],MbscCalendarWeekDays.prototype,"firstDay",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscCalendarWeekDays.prototype,"dayNames",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscCalendarWeekDays.prototype,"dayNamesShort",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarWeekDays.prototype,"rtl",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscCalendarWeekDays.prototype,"showWeekNumbers",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscCalendarWeekDays.prototype,"theme",void 0);MbscCalendarWeekDays=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{class:"mbsc-calendar-week-days"},selector:"mbsc-calendar-weekdays",template:'<div *ngIf="showWeekNumbers" [ngClass]="\'mbsc-calendar-week-day mbsc-calendar-week-nr\' + theme + rtl"></div>\n    <div\n      [attr.aria-label]="dayNames[(i + firstDay) % 7]"\n      [ngClass]="\'mbsc-calendar-week-day\' + theme + rtl"\n      *ngFor="let d of days;index as i;"\n    >\n      {{dayNamesShort[(i + firstDay) % 7]}}\n    </div>'})],MbscCalendarWeekDays);return MbscCalendarWeekDays}();var MbscMonthView=function(_super){__extends(MbscMonthView,_super);function MbscMonthView(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.selectedDates={};_this.showEventTooltip={};return _this}__decorate([core.Input(),__metadata("design:type",Number)],MbscMonthView.prototype,"activeDate",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscMonthView.prototype,"calendarType",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscMonthView.prototype,"cellSizes",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscMonthView.prototype,"clickToCreate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscMonthView.prototype,"colors",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscMonthView.prototype,"dataTimezone",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscMonthView.prototype,"dayNames",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscMonthView.prototype,"dayNamesMin",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscMonthView.prototype,"dayNamesShort",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscMonthView.prototype,"dayTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscMonthView.prototype,"dayContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscMonthView.prototype,"displayTimezone",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscMonthView.prototype,"dragToCreate",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscMonthView.prototype,"dragToResize",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscMonthView.prototype,"dragToMove",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscMonthView.prototype,"eventText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscMonthView.prototype,"eventsText",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscMonthView.prototype,"exclusiveEndDates",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscMonthView.prototype,"firstDay",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscMonthView.prototype,"firstPageDay",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscMonthView.prototype,"hasMarks",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscMonthView.prototype,"hoverEnd",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscMonthView.prototype,"hoverStart",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscMonthView.prototype,"isActive",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscMonthView.prototype,"isPicker",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscMonthView.prototype,"invalid",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscMonthView.prototype,"labels",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscMonthView.prototype,"labelTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscMonthView.prototype,"labelContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscMonthView.prototype,"dragData",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscMonthView.prototype,"marked",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscMonthView.prototype,"max",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscMonthView.prototype,"min",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscMonthView.prototype,"monthNames",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscMonthView.prototype,"monthNamesShort",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscMonthView.prototype,"rangeEnd",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscMonthView.prototype,"rangeStart",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscMonthView.prototype,"selectedDates",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscMonthView.prototype,"showEventTooltip",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscMonthView.prototype,"showOuter",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscMonthView.prototype,"showWeekDays",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscMonthView.prototype,"showWeekNumbers",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscMonthView.prototype,"showSingleMark",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscMonthView.prototype,"resourcesMap",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscMonthView.prototype,"todayText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscMonthView.prototype,"timeFormat",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscMonthView.prototype,"timezonePlugin",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscMonthView.prototype,"valid",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscMonthView.prototype,"weeks",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"getDate",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"getDay",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"getMonth",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"getWeekNumber",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"getYear",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onDayClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onDayDoubleClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onDayRightClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onDayHoverIn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onDayHoverOut",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onLabelClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onLabelDoubleClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onLabelRightClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onLabelHoverIn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onLabelHoverOut",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onLabelDelete",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onLabelUpdateStart",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onLabelUpdateMove",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onLabelUpdateEnd",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onLabelUpdateModeOn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMonthView.prototype,"onLabelUpdateModeOff",void 0);MbscMonthView=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-month-view",template:'\n    <div role="grid" [class]="\'mbsc-calendar-table mbsc-flex-1-1\' + (s.isActive ? \' mbsc-calendar-table-active\' : \'\')">\n      <mbsc-calendar-weekdays *ngIf="showWeekDays"\n        [rtl]="_rtl"\n        [theme]="_theme"\n        [firstDay]="s.firstDay"\n        [dayNames]="s.dayNames"\n        [dayNamesShort]="s.dayNamesShort"\n        [showWeekNumbers]="s.showWeekNumbers">\n      </mbsc-calendar-weekdays>\n      <div role="row" class="mbsc-calendar-row" *ngFor="let row of _rows; trackBy: _getKey">\n        <div *ngIf="s.showWeekNumbers" role="gridcell"\n          [ngClass]="\'mbsc-calendar-cell mbsc-calendar-day mbsc-calendar-week-nr\' + _theme">\n          {{_getWeekNr(s, row[0].date)}}\n        </div>\n        <mbsc-calendar-day *ngFor="let cell of row; trackBy: _getKey; let dayIndex = index"\n          [dayIndex]="dayIndex"\n          [dayWidths]="s.cellSizes"\n          type="day"\n          [active]="cell.display && _isActive(cell.date)"\n          [colors]="cell.colors"\n          [clickToCreate]="s.clickToCreate"\n          [date]="cell.date"\n          [day]="cell.day"\n          [dayTemplate]="dayTemplate"\n          [dayContentTemplate]="dayContentTemplate"\n          [disabled]="_isInvalid(cell.date)"\n          [display]="cell.display"\n          [dataTimezone]="dataTimezone"\n          [displayTimezone]="displayTimezone"\n          [dragToCreate]="s.dragToCreate"\n          [dragToResize]="s.dragToResize"\n          [dragToMove]="s.dragToMove"\n          [eventText]="s.eventText"\n          [eventsText]="s.eventsText"\n          [exclusiveEndDates]="exclusiveEndDates"\n          [firstDay]="s.firstDay"\n          [hasMarks]="s.hasMarks"\n          [hoverEnd]="s.hoverEnd"\n          [hoverStart]="s.hoverStart"\n          [isActiveMonth]="s.isActive"\n          [isPicker]="s.isPicker"\n          [labels]="cell.labels"\n          [labelTemplate]="labelTemplate"\n          [labelContentTemplate]="labelContentTemplate"\n          [dragData]="s.dragData"\n          [marks]="cell.marks"\n          [month]="cell.month"\n          [monthShort]="cell.monthShort"\n          [outer]="cell.outer"\n          [rangeEnd]="s.rangeEnd"\n          [rangeStart]="s.rangeStart"\n          [resourcesMap]="s.resourcesMap"\n          [rtl]="s.rtl"\n          [selected]="_isSelected(cell.date)"\n          [showEventTooltip]="s.showEventTooltip"\n          [text]="cell.text"\n          [timeFormat]="s.timeFormat"\n          [timezonePlugin]="timezonePlugin"\n          [todayText]="s.todayText"\n          [theme]="s.theme"\n          [onDayClick]="s.onDayClick"\n          [onDayDoubleClick]="s.onDayDoubleClick"\n          [onDayRightClick]="s.onDayRightClick"\n          [onHoverIn]="s.onDayHoverIn"\n          [onHoverOut]="s.onDayHoverOut"\n          [onLabelClick]="s.onLabelClick"\n          [onLabelDoubleClick]="s.onLabelDoubleClick"\n          [onLabelRightClick]="s.onLabelRightClick"\n          [onLabelHoverIn]="s.onLabelHoverIn"\n          [onLabelHoverOut]="s.onLabelHoverOut"\n          [onLabelDelete]="s.onLabelDelete"\n          [onLabelUpdateStart]="s.onLabelUpdateStart"\n          [onLabelUpdateMove]="s.onLabelUpdateMove"\n          [onLabelUpdateEnd]="s.onLabelUpdateEnd"\n          [onLabelUpdateModeOn]="s.onLabelUpdateModeOn"\n          [onLabelUpdateModeOff]="s.onLabelUpdateModeOff"\n        ></mbsc-calendar-day>\n      </div>\n    </div>\n  '})],MbscMonthView);return MbscMonthView}(MonthViewBase);var MbscMultiYearView=function(){function MbscMultiYearView(){}MbscMultiYearView.prototype.ngOnChanges=function(){this._rows=[];this._selectedYear=this.getYear(new Date(this.active));this._activeYear=this.getYear(new Date(this.activeMonth));for(var i=0;i<4;i++){var row=[];for(var j=0;j<3;j++){var year=this.firstYear+i*3+j;var d=+this.getDate(year,0,1);row.push({d:d,year:year});}this._rows.push(row);}};MbscMultiYearView.prototype.getKey=function(index,item){return item.key};__decorate([core.Input(),__metadata("design:type",Number)],MbscMultiYearView.prototype,"active",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscMultiYearView.prototype,"activeMonth",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscMultiYearView.prototype,"firstYear",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMultiYearView.prototype,"getDate",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMultiYearView.prototype,"getYear",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscMultiYearView.prototype,"max",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscMultiYearView.prototype,"min",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscMultiYearView.prototype,"rtl",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscMultiYearView.prototype,"theme",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscMultiYearView.prototype,"yearSuffix",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscMultiYearView.prototype,"onYearClick",void 0);MbscMultiYearView=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{role:"grid",class:"mbsc-calendar-table"},selector:"mbsc-multi-year-view",template:'<div role="row" class="mbsc-calendar-row" *ngFor="let row of _rows; trackBy: getKey">\n    <mbsc-calendar-day *ngFor="let cell of row; trackBy: getKey"\n      [active]="cell.year === _activeYear"\n      [date]="cell.d"\n      [display]="true"\n      [selected]="cell.year === _selectedYear"\n      [disabled]="cell.year < this.min || cell.year > this.max"\n      [rtl]="rtl"\n      [text]="cell.year + yearSuffix"\n      [theme]="theme"\n      type="year"\n      [onDayClick]="onYearClick"\n    ></mbsc-calendar-day>\n  </div>'})],MbscMultiYearView);return MbscMultiYearView}();function getItem(items,i,min,max){var item;if(i<min||i>max){return}if(isArray(items)){var len=items.length;var index=i%len;item=items[index>=0?index:index+len];}else {item=items(i);}return item}var ScrollviewBase=function(_super){__extends(ScrollviewBase,_super);function ScrollviewBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._currPos=0;_this._delta=0;_this._endPos=0;_this._lastRaf=0;_this._maxSnapScroll=0;_this._margin=0;_this._scrollEnd=debounce((function(){rafc(_this._raf);_this._raf=false;_this._onEnd();_this._hasScrolled=false;}),200);_this._onStart=function(args){var s=_this.s;_this._hook("onStart",{});if(s.changeOnEnd&&_this._isScrolling||!s.mouseSwipe&&!args.isTouch||!s.swipe){return}_this._started=true;_this._hasScrolled=_this._isScrolling;_this._currX=args.startX;_this._currY=args.startY;_this._delta=0;_this._velocityX=0;_this._velocityY=0;_this._startPos=getPosition(_this._scrollEl,_this._isVertical);_this._timestamp=+new Date;if(_this._isScrolling){rafc(_this._raf);_this._raf=false;_this._scroll(_this._startPos);}};_this._onMove=function(args){var ev=args.domEvent;var s=_this.s;if(_this._isVertical||s.scrollLock){if(ev.cancelable){ev.preventDefault();}}else {if(_this._hasScrolled){if(ev.cancelable){ev.preventDefault();}}else if(ev.type===TOUCH_MOVE&&(Math.abs(args.deltaY)>7||!s.swipe)){_this._started=false;}}if(!_this._started){return}_this._delta=_this._isVertical?args.deltaY:args.deltaX;if(_this._hasScrolled||Math.abs(_this._delta)>_this._threshold){if(!_this._hasScrolled){_this._hook("onGestureStart",{});}_this._hasScrolled=true;_this._isScrolling=true;if(!_this._raf){_this._raf=raf((function(){return _this._move(args)}));}}};_this._onEnd=function(){_this._started=false;if(_this._hasScrolled){var s=_this.s;var v=(_this._isVertical?_this._velocityY:_this._velocityX)*17;var maxSnapScroll=_this._maxSnapScroll;var delta=_this._delta;var time=0;delta+=v*v*.5*(v<0?-1:1);if(maxSnapScroll){delta=constrain(delta,-_this._round*maxSnapScroll,_this._round*maxSnapScroll);}var pos=constrain(round((_this._startPos+delta)/_this._round)*_this._round,_this._min,_this._max);var index=round(-pos*_this._rtlNr/s.itemSize)+_this._offset;var direction=delta>0?_this._isVertical?270:360:_this._isVertical?90:180;var diff=index-s.selectedIndex;time=s.time||Math.max(1e3,Math.abs(pos-_this._currPos)*3);_this._hook("onGestureEnd",{direction:direction,index:index});_this._delta=0;_this._scroll(pos,time);if(diff&&!s.changeOnEnd){_this._hook("onIndexChange",{index:index,diff:diff});if(s.selectedIndex===_this._prevIndex&&s.selectedIndex!==index){_this.forceUpdate();}}}};_this._onClick=function(ev){if(_this._hasScrolled){_this._hasScrolled=false;ev.stopPropagation();ev.preventDefault();}};_this._onScroll=function(ev){ev.target.scrollTop=0;ev.target.scrollLeft=0;};_this._onMouseWheel=function(ev){var delta=_this._isVertical?ev.deltaY===UNDEFINED?ev.wheelDelta||ev.detail:ev.deltaY:ev.deltaX;if(!_this._el.contains(ev.target)){return}if(delta&&_this.s.mousewheel){ev.preventDefault();_this._hook("onStart",{});if(!_this._started){_this._delta=0;_this._velocityX=0;_this._velocityY=0;_this._startPos=_this._currPos;_this._hook("onGestureStart",{});}if(ev.deltaMode&&ev.deltaMode===1){delta*=15;}delta=constrain(-delta,-_this._scrollSnap,_this._scrollSnap);_this._delta+=delta;if(_this._maxSnapScroll&&Math.abs(_this._delta)>_this._round*_this._maxSnapScroll){delta=0;}if(_this._startPos+_this._delta<_this._min){_this._startPos=_this._min;_this._delta=0;delta=0;}if(_this._startPos+_this._delta>_this._max){_this._startPos=_this._max;_this._delta=0;delta=0;}if(!_this._raf){_this._raf=raf((function(){return _this._move()}));}if(!delta&&_this._started){return}_this._hasScrolled=true;_this._isScrolling=true;_this._started=true;_this._scrollEnd();}};_this._onTrackStart=function(ev){ev.stopPropagation();var args={domEvent:ev,startX:getCoord(ev,"X",true),startY:getCoord(ev,"Y",true)};_this._onStart(args);_this._trackStartX=args.startX;_this._trackStartY=args.startY;if(ev.target===_this._scrollbarEl){listen(_this._doc,MOUSE_UP,_this._onTrackEnd);listen(_this._doc,MOUSE_MOVE,_this._onTrackMove);}else {var top_1=getOffset(_this._scrollbarContEl).top;var percent=(args.startY-top_1)/_this._barContSize;_this._startPos=_this._currPos=_this._max+(_this._min-_this._max)*percent;_this._hasScrolled=true;_this._onEnd();}};_this._onTrackMove=function(ev){var barContSize=_this._barContSize;var endX=getCoord(ev,"X",true);var endY=getCoord(ev,"Y",true);var trackDelta=_this._isVertical?endY-_this._trackStartY:endX-_this._trackStartX;var percent=trackDelta/barContSize;if(_this._isInfinite){_this._delta=-(_this._maxSnapScroll*_this._round*2+barContSize)*percent;}else {_this._delta=(_this._min-_this._max-barContSize)*percent;}if(_this._hasScrolled||Math.abs(_this._delta)>_this._threshold){if(!_this._hasScrolled){_this._hook("onGestureStart",{});}_this._hasScrolled=true;_this._isScrolling=true;if(!_this._raf){_this._raf=raf((function(){return _this._move({endX:endX,endY:endY},!_this._isInfinite)}));}}};_this._onTrackEnd=function(){_this._delta=0;_this._startPos=_this._currPos;_this._onEnd();unlisten(_this._doc,MOUSE_UP,_this._onTrackEnd);unlisten(_this._doc,MOUSE_MOVE,_this._onTrackMove);};_this._onTrackClick=function(ev){ev.stopPropagation();};return _this}ScrollviewBase.prototype._render=function(s,state){var prevS=this._prevS;var batchSize=s.batchSize;var batchSize3d=s.batchSize3d;var itemNr=s.itemNr||1;var itemSize=s.itemSize;var selectedIndex=s.selectedIndex;var prevIndex=prevS.selectedIndex;var currIndex=state.index===UNDEFINED?selectedIndex:state.index;var visibleItems=[];var visible3dItems=[];var diff=selectedIndex-prevIndex;var diff2=currIndex-this._currIndex;var minIndex=s.minIndex;var maxIndex=s.maxIndex;var items=s.items;var offset=s.offset;this._currIndex=currIndex;this._isVertical=s.axis==="Y";this._threshold=this._isVertical?s.thresholdY:s.thresholdX;this._rtlNr=!this._isVertical&&s.rtl?-1:1;this._round=s.snap?itemSize:1;var scrollSnap=this._round;while(scrollSnap>44){scrollSnap/=2;}this._scrollSnap=round(44/scrollSnap)*scrollSnap;if(items){for(var i=currIndex-batchSize;i<currIndex+itemNr+batchSize;i++){visibleItems.push({key:i,data:getItem(items,i,minIndex,maxIndex)});}if(s.scroll3d){for(var i=currIndex-batchSize3d;i<currIndex+itemNr+batchSize3d;i++){visible3dItems.push({key:i,data:getItem(items,i,minIndex,maxIndex)});}}this.visibleItems=visibleItems;this.visible3dItems=visible3dItems;this._maxSnapScroll=batchSize;this._isInfinite=typeof items==="function";}if(this._offset===UNDEFINED){this._offset=selectedIndex;}var nextPos=-(selectedIndex-this._offset)*itemSize*this._rtlNr;if(Math.abs(diff)>batchSize&&nextPos!==this._endPos){var off=diff+batchSize*(diff>0?-1:1);this._offset+=off;this._margin-=off;}if(offset&&offset!==prevS.offset){this._offset+=offset;this._margin-=offset;}if(diff2){this._margin+=diff2;}if(minIndex!==UNDEFINED){this._max=-(minIndex-this._offset)*itemSize*this._rtlNr;}else {this._max=Infinity;}if(maxIndex!==UNDEFINED){this._min=-(maxIndex-this._offset-(s.spaceAround?0:itemNr-1))*itemSize*this._rtlNr;}else {this._min=-Infinity;}if(this._rtlNr===-1){var temp=this._min;this._min=this._max;this._max=temp;}if(this._min>this._max){this._min=this._max;}var visibleSize=s.visibleSize;var barContSize=visibleSize*itemSize;this._barContSize=barContSize;this._barSize=Math.max(20,barContSize*barContSize/(this._max-this._min+barContSize));this._cssClass=this._className+" mbsc-ltr";};ScrollviewBase.prototype._mounted=function(){this._doc=getDocument(this._el);listen(this._el,CLICK,this._onClick,true);listen(this.s.scroll3d?this._innerEl:this._el,SCROLL,this._onScroll);listen(this._doc,MOUSE_WHEEL,this._onMouseWheel,{passive:false,capture:true});listen(this._doc,WHEEL,this._onMouseWheel,{passive:false,capture:true});listen(this._scrollbarContEl,MOUSE_DOWN,this._onTrackStart);listen(this._scrollbarContEl,CLICK,this._onTrackClick);this._unlisten=gestureListener(this._el,{onEnd:this._onEnd,onMove:this._onMove,onStart:this._onStart,prevDef:true});};ScrollviewBase.prototype._updated=function(){var s=this.s;var batchSize=s.batchSize;var itemSize=s.itemSize;var selectedIndex=s.selectedIndex;var prevIndex=this._prevIndex;var shouldAnimate=!s.prevAnim&&(prevIndex!==UNDEFINED&&prevIndex!==selectedIndex||this._isAnimating);var newPos=-(selectedIndex-this._offset)*itemSize*this._rtlNr;if(s.margin){this._scrollEl.style.marginTop=this._isVertical?(this._margin-batchSize)*itemSize+"px":"";}if(!this._started){this._scroll(newPos,shouldAnimate?this._isAnimating||s.time||1e3:0);}this._prevIndex=selectedIndex;};ScrollviewBase.prototype._destroy=function(){unlisten(this._el,CLICK,this._onClick,true);unlisten(this.s.scroll3d?this._innerEl:this._el,SCROLL,this._onScroll);unlisten(this._doc,MOUSE_WHEEL,this._onMouseWheel,{passive:false,capture:true});unlisten(this._doc,WHEEL,this._onMouseWheel,{passive:false,capture:true});unlisten(this._scrollbarContEl,MOUSE_DOWN,this._onTrackStart);unlisten(this._scrollbarContEl,CLICK,this._onTrackClick);rafc(this._raf);this._raf=false;this._scroll(0);this._unlisten();};ScrollviewBase.prototype._anim=function(dir){var _this=this;return this._raf=raf((function(){var s=_this.s;var now=+new Date;if(!_this._raf){return}if((_this._currPos-_this._endPos)*-dir<4){_this._currPos=_this._endPos;_this._raf=false;_this._isAnimating=0;_this._isScrolling=false;_this._infinite(_this._currPos);_this._hook("onAnimationEnd",{});_this._scrollbarContEl.classList.remove("mbsc-scroller-bar-started");return}if(now-_this._lastRaf>100){_this._lastRaf=now;_this._currPos=getPosition(_this._scrollEl,_this._isVertical);if(!s.changeOnEnd){_this._infinite(_this._currPos);}}_this._raf=_this._anim(dir);}))};ScrollviewBase.prototype._infinite=function(pos){var s=this.s;if(s.itemSize){var index=round(-pos*this._rtlNr/s.itemSize)+this._offset;var diff=index-this._currIndex;if(diff){if(s.changeOnEnd){this._hook("onIndexChange",{index:index,diff:diff});}else {this.setState({index:index});}}}};ScrollviewBase.prototype._scroll=function(pos,time){var s=this.s;var itemSize=s.itemSize;var isVertical=this._isVertical;var style=this._scrollEl.style;var prefix=jsPrefix?jsPrefix+"T":"t";var timing=time?cssPrefix+"transform "+round(time)+"ms "+s.easing:"";var length=s.margin?this.visibleItems.length:1;var percentRel=isVertical?itemSize*length:itemSize*(s.itemNr||1);var percentPos=pos/percentRel*100+"%";style[prefix+"ransform"]="translate3d("+(isVertical?"0,"+percentPos+",":percentPos+","+"0,")+"0)";style[prefix+"ransition"]=timing;this._endPos=pos;if(s.scroll3d){var style3d=this._scrollEl3d.style;var angle=360/(s.batchSize3d*2);style3d[prefix+"ransform"]="translateY(-50%) rotateX("+-pos/itemSize*angle+"deg)";style3d[prefix+"ransition"]=timing;}if(this._scrollbarEl){var sbStyle=this._scrollbarEl.style;var percent=this._isInfinite?(this._maxSnapScroll*this._round-this._delta)/(this._maxSnapScroll*this._round*2):(pos-this._max)/(this._min-this._max);var barPos=constrain((this._barContSize-this._barSize)*percent,0,this._barContSize-this._barSize);sbStyle[prefix+"ransform"]="translate3d("+(isVertical?"0,"+barPos+"px,":barPos+"px,"+"0,")+"0)";sbStyle[prefix+"ransition"]=timing;}if(time){rafc(this._raf);this._isAnimating=time;this._scrollbarContEl.classList.add("mbsc-scroller-bar-started");this._raf=this._anim(pos>this._currPos?1:-1);}else {this._currPos=pos;if(!s.changeOnEnd){this._infinite(pos);}}};ScrollviewBase.prototype._move=function(args,preventMaxSnap){var prevX=this._currX;var prevY=this._currY;var prevT=this._timestamp;var maxSnapScroll=this._maxSnapScroll;if(args){this._currX=args.endX;this._currY=args.endY;this._timestamp=+new Date;var timeDelta=this._timestamp-prevT;if(timeDelta>0&&timeDelta<100){var velocityX=(this._currX-prevX)/timeDelta;var velocityY=(this._currY-prevY)/timeDelta;this._velocityX=velocityX*.7+this._velocityX*.3;this._velocityY=velocityY*.7+this._velocityY*.3;}}if(maxSnapScroll&&!preventMaxSnap){this._delta=constrain(this._delta,-this._round*maxSnapScroll,this._round*maxSnapScroll);}this._scroll(constrain(this._startPos+this._delta,this._min-this.s.itemSize,this._max+this.s.itemSize));this._raf=false;};ScrollviewBase.defaults={axis:"Y",batchSize:40,easing:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",mouseSwipe:true,mousewheel:true,prevDef:true,selectedIndex:0,spaceAround:true,stopProp:true,swipe:true,thresholdX:10,thresholdY:5};ScrollviewBase=__decorate([core.Directive({selector:"[mbsc-sv-b]"})],ScrollviewBase);return ScrollviewBase}(BaseComponent);var MbscScrollviewBase=function(_super){__extends(MbscScrollviewBase,_super);function MbscScrollviewBase(){return _super!==null&&_super.apply(this,arguments)||this}Object.defineProperty(MbscScrollviewBase.prototype,"vEl3d",{set:function(el){this._scrollEl3d=el&&el.nativeElement;},enumerable:true,configurable:true});MbscScrollviewBase.prototype._mounted=function(){this._innerEl=this.vInnerEl.nativeElement;this._scrollEl=this.vEl.nativeElement;this._scrollbarContEl=this.vBarCont.nativeElement;this._scrollbarEl=this.vBar.nativeElement;_super.prototype._mounted.call(this);};__decorate([core.ViewChild("el",{static:true}),__metadata("design:type",core.ElementRef)],MbscScrollviewBase.prototype,"vEl",void 0);__decorate([core.ViewChild("el3d",{static:false}),__metadata("design:type",core.ElementRef),__metadata("design:paramtypes",[core.ElementRef])],MbscScrollviewBase.prototype,"vEl3d",null);__decorate([core.ViewChild("innerEl",{static:true}),__metadata("design:type",core.ElementRef)],MbscScrollviewBase.prototype,"vInnerEl",void 0);__decorate([core.ViewChild("barCont",{static:true}),__metadata("design:type",core.ElementRef)],MbscScrollviewBase.prototype,"vBarCont",void 0);__decorate([core.ViewChild("bar",{static:true}),__metadata("design:type",core.ElementRef)],MbscScrollviewBase.prototype,"vBar",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScrollviewBase.prototype,"axis",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScrollviewBase.prototype,"batchSize",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScrollviewBase.prototype,"batchSize3d",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScrollviewBase.prototype,"changeOnEnd",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScrollviewBase.prototype,"easing",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScrollviewBase.prototype,"innerClass",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScrollviewBase.prototype,"innerStyles",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscScrollviewBase.prototype,"items",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScrollviewBase.prototype,"itemSize",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScrollviewBase.prototype,"itemNr",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScrollviewBase.prototype,"selectedIndex",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScrollviewBase.prototype,"margin",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScrollviewBase.prototype,"maxIndex",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScrollviewBase.prototype,"minIndex",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScrollviewBase.prototype,"mouseSwipe",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScrollviewBase.prototype,"mousewheel",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScrollviewBase.prototype,"offset",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScrollviewBase.prototype,"prevAnim",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScrollviewBase.prototype,"scroll3d",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScrollviewBase.prototype,"scrollBar",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScrollviewBase.prototype,"snap",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScrollviewBase.prototype,"spaceAround",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScrollviewBase.prototype,"swipe",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScrollviewBase.prototype,"time",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScrollviewBase.prototype,"touchUi",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScrollviewBase.prototype,"visibleSize",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScrollviewBase.prototype,"onAnimationEnd",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScrollviewBase.prototype,"onGestureStart",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScrollviewBase.prototype,"onGestureEnd",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScrollviewBase.prototype,"onIndexChange",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScrollviewBase.prototype,"onStart",void 0);MbscScrollviewBase=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-scrollview-base",template:'\n    <div #innerEl [class]="s.innerClass || \'\'" [ngStyle]="s.innerStyles">\n      <div #el [class]="_rtl">\n        <ng-content></ng-content>\n      </div>\n    </div>\n    <div *ngIf="s.scroll3d" #el3d [style.height.px]="s.itemSize" class="mbsc-scroller-items-3d">\n      <ng-content select="[content-3d]"></ng-content>\n    </div>\n    <div [class]="\'mbsc-scroller-bar-cont\' + _rtl + (!s.scrollBar || _barSize === _barContSize ? \' mbsc-scroller-bar-hidden\' : \'\') + (_started ? \' mbsc-scroller-bar-started\' : \'\')" #barCont>\n      <div [class]="\'mbsc-scroller-bar\' + _theme" #bar [style.height.px]="_barSize" ></div>\n    </div>\n  '})],MbscScrollviewBase);return MbscScrollviewBase}(ScrollviewBase);var MbscScrollviewBaseModule=function(){function MbscScrollviewBaseModule(){}MbscScrollviewBaseModule=__decorate([core.NgModule({declarations:[MbscScrollviewBase,ScrollviewBase],exports:[MbscScrollviewBase],imports:[common.CommonModule]})],MbscScrollviewBaseModule);return MbscScrollviewBaseModule}();var MbscYearView=function(){function MbscYearView(){}MbscYearView.prototype.ngOnChanges=function(){this._rows=[];var active=new Date(this.activeMonth);var selected=new Date(this.active);this._activeYear=this.getYear(active);this._activeMonth=this.getMonth(active);this._selectedYear=this.getYear(selected);this._selectedMonth=this.getMonth(selected);for(var i=0;i<4;i++){var row=[];for(var j=0;j<3;j++){var d=this.getDate(this.year,i*3+j,1);var y=this.getYear(d);var m=this.getMonth(d);row.push({d:d,y:y,m:m});}this._rows.push(row);}};MbscYearView.prototype.getKey=function(index,item){return item.key};__decorate([core.Input(),__metadata("design:type",Number)],MbscYearView.prototype,"active",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscYearView.prototype,"activeMonth",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscYearView.prototype,"getDate",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscYearView.prototype,"getMonth",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscYearView.prototype,"getYear",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscYearView.prototype,"max",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscYearView.prototype,"min",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscYearView.prototype,"monthNames",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscYearView.prototype,"monthNamesShort",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscYearView.prototype,"rtl",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscYearView.prototype,"theme",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscYearView.prototype,"year",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscYearView.prototype,"onMonthClick",void 0);MbscYearView=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{role:"grid",class:"mbsc-calendar-table"},selector:"mbsc-year-view",template:'<div role="row" class="mbsc-calendar-row" *ngFor="let row of _rows; trackBy: getKey">\n    <mbsc-calendar-day *ngFor="let cell of row; trackBy: getKey"\n      [active]="cell.y === _activeYear && cell.m === _activeMonth"\n      [date]="cell.d"\n      [display]="true"\n      [selected]="cell.y === _selectedYear && cell.m === _selectedMonth"\n      [disabled]="cell.d < this.min || cell.d >= this.max"\n      month="monthNames[cell.m]"\n      [rtl]="rtl"\n      [text]="monthNamesShort[cell.m]"\n      [theme]="theme"\n      type="month"\n      [onDayClick]="onMonthClick"\n    ></mbsc-calendar-day>\n  </div>'})],MbscYearView);return MbscYearView}();var MbscCalendarViewModule=function(){function MbscCalendarViewModule(){}MbscCalendarViewModule=__decorate([core.NgModule({declarations:[CalendarDayBase,CalendarLabelBase,CalendarViewBase,MbscCalendarDay,MbscCalendarLabel,MbscCalendarView,MbscCalendarWeekDays,MbscMonthView,MbscMultiYearView,MbscYearView,MonthViewBase],exports:[MbscCalendarView,MbscCalendarHeaderModule],imports:[common.CommonModule,MbscButtonModule,MbscCalendarHeaderModule,MbscIconModule,MbscPopupModule,MbscScrollviewBaseModule]})],MbscCalendarViewModule);return MbscCalendarViewModule}();var DraggableDirective=function(_super){__extends(DraggableDirective,_super);function DraggableDirective(){return _super!==null&&_super.apply(this,arguments)||this}__decorate([core.Input(),__metadata("design:type",Object)],DraggableDirective.prototype,"dragData",void 0);DraggableDirective=__decorate([core.Directive({selector:"[mbsc-draggable]"})],DraggableDirective);return DraggableDirective}(DraggableBase);var MbscDraggableModule=function(){function MbscDraggableModule(){}MbscDraggableModule=__decorate([core.NgModule({declarations:[DraggableBase,DraggableDirective],exports:[DraggableDirective],imports:[common.CommonModule]})],MbscDraggableModule);return MbscDraggableModule}();var ListItemBase=function(_super){__extends(ListItemBase,_super);function ListItemBase(){return _super!==null&&_super.apply(this,arguments)||this}ListItemBase.prototype._mounted=function(){var _this=this;var isDrag;var touchTimer;this._unlisten=gestureListener(this._el,{click:true,onBlur:function(){_this.setState({hasFocus:false});},onEnd:function(ev){if(isDrag){var args=__assign({},ev);args.domEvent.preventDefault();args.data=_this.s.data;args.drag=true;_this._hook("onDragEnd",args);isDrag=false;}clearTimeout(touchTimer);},onFocus:function(){_this.setState({hasFocus:true});},onHoverIn:function(ev){if(_this.s.actionable){_this.setState({hasHover:true});}_this._hook("onHoverIn",{domEvent:ev});},onHoverOut:function(ev){_this.setState({hasHover:false});_this._hook("onHoverOut",{domEvent:ev});},onKeyDown:function(ev){switch(ev.keyCode){case ENTER:case SPACE:_this._el.click();ev.preventDefault();break}},onMove:function(ev){var s=_this.s;var args=__assign({},ev);args.data=s.data;args.drag=true;args.external=true;if(isDrag||!args.isTouch){args.domEvent.preventDefault();}if(isDrag){_this._hook("onDragMove",args);}else if(Math.abs(args.deltaX)>7||Math.abs(args.deltaY)>7){clearTimeout(touchTimer);if(!args.isTouch&&s.drag&&s.data.editable!==false){isDrag=true;_this._hook("onDragStart",args);}}},onPress:function(){if(_this.s.actionable){_this.setState({isActive:true});}},onRelease:function(){_this.setState({isActive:false});},onStart:function(ev){var s=_this.s;if(ev.isTouch&&s.drag&&s.data.editable!==false&&!isDrag){touchTimer=setTimeout((function(){var args=__assign({},ev);args.data=s.data;args.drag=true;_this._hook("onDragModeOn",args);_this._hook("onDragStart",args);isDrag=true;}),350);}return {ripple:s.actionable&&s.ripple}}});};ListItemBase.prototype._render=function(s,state){this._cssClass=this._className+" mbsc-list-item"+this._theme+this._hb+this._rtl+(s.actionable?" mbsc-list-item-actionable":"")+(state.hasFocus?" mbsc-focus":"")+(state.hasHover?" mbsc-hover":"")+(state.isActive?" mbsc-active":"");};ListItemBase.prototype._destroy=function(){this._unlisten();};ListItemBase.defaults={actionable:true,ripple:false};ListItemBase._name="ListItem";ListItemBase=__decorate([core.Directive({selector:"[mbsc-li-b]"})],ListItemBase);return ListItemBase}(BaseComponent);var MbscListItem=function(_super){__extends(MbscListItem,_super);function MbscListItem(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onHoverIn=new core.EventEmitter;_this.onHoverOut=new core.EventEmitter;_this.onDragEnd=new core.EventEmitter;_this.onDragModeOff=new core.EventEmitter;_this.onDragModeOn=new core.EventEmitter;_this.onDragMove=new core.EventEmitter;_this.onDragStart=new core.EventEmitter;return _this}__decorate([core.Input(),__metadata("design:type",Boolean)],MbscListItem.prototype,"actionable",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscListItem.prototype,"data",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscListItem.prototype,"drag",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscListItem.prototype,"onHoverIn",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscListItem.prototype,"onHoverOut",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscListItem.prototype,"onDragEnd",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscListItem.prototype,"onDragModeOff",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscListItem.prototype,"onDragModeOn",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscListItem.prototype,"onDragMove",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscListItem.prototype,"onDragStart",void 0);MbscListItem=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass",tabindex:"0"},selector:"mbsc-list-item",template:"\x3c!-- TRIAL --\x3e<ng-content></ng-content>"})],MbscListItem);return MbscListItem}(ListItemBase);var MbscEventListService=function(){function MbscEventListService(){}MbscEventListService=__decorate([core.Injectable()],MbscEventListService);return MbscEventListService}();var MbscEventListDayDirective=function(){function MbscEventListDayDirective(el,els){this.el=el;this.els=els;}MbscEventListDayDirective.prototype.ngOnInit=function(){if(this.els&&this.els.days){this.els.days[this.timestamp]=this.el.nativeElement;}};__decorate([core.Input(),__metadata("design:type",Number)],MbscEventListDayDirective.prototype,"timestamp",void 0);MbscEventListDayDirective=__decorate([core.Directive({selector:"[mbsc-event-list-day]"}),__param(1,core.Optional()),__metadata("design:paramtypes",[core.ElementRef,MbscEventListService])],MbscEventListDayDirective);return MbscEventListDayDirective}();var MbscEventListItem=function(_super){__extends(MbscEventListItem,_super);function MbscEventListItem(){return _super!==null&&_super.apply(this,arguments)||this}__decorate([core.Input(),__metadata("design:type",Object)],MbscEventListItem.prototype,"eventData",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscEventListItem.prototype,"showColor",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventListItem.prototype,"template",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventListItem.prototype,"eventContentTemplate",void 0);MbscEventListItem=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,host:{"[class]":'(showColor ? "" : "mbsc-colored-event ") + _cssClass',"[style.background]":'showColor ? "" : eventData.style.background',"[style.color]":'showColor ? "" : eventData.style.color',tabindex:"0"},selector:"mbsc-event-list-item",template:'\n    <ng-template #def>\n      <div *ngIf="showColor" [ngClass]="\'mbsc-event-color\' + _theme" [ngStyle]="eventData.style"></div>\n      <div [ngClass]="\'mbsc-event-content\' + _theme">\n        <ng-template [ngTemplateOutlet]="eventContentTemplate || defaultEventContent"\n          [ngTemplateOutletContext]="{ $implicit: eventData }"></ng-template>\n      </div>\n      <div [ngClass]="\'mbsc-event-time\' + _theme + _rtl">\n        <div *ngIf="eventData.allDayText" [ngClass]="\'mbsc-event-all-day\' + _theme">{{eventData.allDayText}}</div>\n        <div *ngIf="eventData.lastDay" [ngClass]="\'mbsc-event-until\' + _theme">{{eventData.lastDay}}</div>\n        <div *ngIf="eventData.start" [ngClass]="\'mbsc-event-start\' + _theme">{{eventData.start}}</div>\n        <div *ngIf="eventData.start && eventData.end" [ngClass]="\'mbsc-event-sep\' + _theme">-</div>\n        <div *ngIf="eventData.end" [ngClass]="\'mbsc-event-end\' + _theme">{{eventData.end}}</div>\n      </div>\n    </ng-template>\n    <ng-template #defaultEventContent>\n      <div [ngClass]="\'mbsc-event-text\' + _theme" [title]="eventData.tooltip" [innerHTML]="eventData.html"></div>\n    </ng-template>\n    <ng-template [ngTemplateOutlet]="template || def" [ngTemplateOutletContext]="{ $implicit: eventData }">\n    </ng-template>\n  '})],MbscEventListItem);return MbscEventListItem}(MbscListItem);var MbscEventcalendar=function(_super){__extends(MbscEventcalendar,_super);function MbscEventcalendar(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._hours=ARRAY24;_this.selectedDateChange=new core.EventEmitter;_this.onCellClick=new core.EventEmitter;_this.onCellDoubleClick=new core.EventEmitter;_this.onCellRightClick=new core.EventEmitter;_this.onCellHoverIn=new core.EventEmitter;_this.onCellHoverOut=new core.EventEmitter;_this.onEventClick=new core.EventEmitter;_this.onEventDoubleClick=new core.EventEmitter;_this.onEventRightClick=new core.EventEmitter;_this.onEventHoverIn=new core.EventEmitter;_this.onEventHoverOut=new core.EventEmitter;_this.onEventCreate=new core.EventEmitter;_this.onEventCreated=new core.EventEmitter;_this.onEventDelete=new core.EventEmitter;_this.onEventDeleted=new core.EventEmitter;_this.onEventUpdate=new core.EventEmitter;_this.onEventUpdated=new core.EventEmitter;_this.onEventCreateFailed=new core.EventEmitter;_this.onEventUpdateFailed=new core.EventEmitter;_this.onLabelClick=new core.EventEmitter;_this.onPageChange=new core.EventEmitter;_this.onPageLoaded=new core.EventEmitter;_this.onPageLoading=new core.EventEmitter;_this.onSelectedDateChange=new core.EventEmitter;return _this}MbscEventcalendar.prototype._ctor=function(){this._els=this._injector.get(MbscEventListService);this._instanceService=this._injector.get(MbscInstanceService);};MbscEventcalendar.prototype._mounted=function(){this._instanceService.instance=this;_super.prototype._mounted.call(this);};MbscEventcalendar.prototype._render=function(s,state){if(!this._listDays){this._listDays={};this._els.days=this._listDays;}_super.prototype._render.call(this,s,state);};MbscEventcalendar.prototype._updated=function(){this._list=this.vList&&this.vList.nativeElement;_super.prototype._updated.call(this);};__decorate([core.ViewChild("list",{static:false,read:core.ElementRef}),__metadata("design:type",core.ElementRef)],MbscEventcalendar.prototype,"vList",void 0);__decorate([core.ViewChild("calendar",{static:true}),__metadata("design:type",MbscCalendarView)],MbscEventcalendar.prototype,"_calendarView",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscEventcalendar.prototype,"actionableEvents",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventcalendar.prototype,"agendaTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscEventcalendar.prototype,"calendarSystem",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscEventcalendar.prototype,"clickToCreate",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscEventcalendar.prototype,"colors",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscEventcalendar.prototype,"data",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventcalendar.prototype,"dayTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventcalendar.prototype,"dayContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"dataTimezone",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"displayTimezone",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscEventcalendar.prototype,"dragTimeStep",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscEventcalendar.prototype,"dragToCreate",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscEventcalendar.prototype,"dragToResize",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscEventcalendar.prototype,"dragToMove",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventcalendar.prototype,"eventContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscEventcalendar.prototype,"eventOrder",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventcalendar.prototype,"eventTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscEventcalendar.prototype,"exclusiveEndDates",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscEventcalendar.prototype,"extendDefaultEvent",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscEventcalendar.prototype,"externalDrop",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"groupBy",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventcalendar.prototype,"headerTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscEventcalendar.prototype,"height",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscEventcalendar.prototype,"invalid",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"invalidateEvent",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventcalendar.prototype,"labelContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscEventcalendar.prototype,"labels",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventcalendar.prototype,"labelTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscEventcalendar.prototype,"marked",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscEventcalendar.prototype,"max",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscEventcalendar.prototype,"min",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscEventcalendar.prototype,"mousewheel",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscEventcalendar.prototype,"refDate",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscEventcalendar.prototype,"resources",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventcalendar.prototype,"resourceHeaderTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventcalendar.prototype,"resourceTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscEventcalendar.prototype,"slots",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventcalendar.prototype,"slotTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventcalendar.prototype,"scheduleEventContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscEventcalendar.prototype,"scheduleEventTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscEventcalendar.prototype,"selectedDate",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"selectedDateChange",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscEventcalendar.prototype,"showControls",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscEventcalendar.prototype,"showEventTooltip",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscEventcalendar.prototype,"valid",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscEventcalendar.prototype,"view",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscEventcalendar.prototype,"width",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"allDayText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"amText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"dateFormat",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"dateFormatLong",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscEventcalendar.prototype,"dayNames",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscEventcalendar.prototype,"dayNamesMin",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscEventcalendar.prototype,"dayNamesShort",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"eventsText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"eventText",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscEventcalendar.prototype,"firstDay",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscEventcalendar.prototype,"monthNames",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscEventcalendar.prototype,"monthNamesShort",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"moreEventsPluralText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"moreEventsText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"newEventText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"noEventsText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"pmText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscEventcalendar.prototype,"timeFormat",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscEventcalendar.prototype,"timezonePlugin",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onCellClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onCellDoubleClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onCellRightClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onCellHoverIn",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onCellHoverOut",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onEventClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onEventDoubleClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onEventRightClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onEventHoverIn",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onEventHoverOut",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onEventCreate",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onEventCreated",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onEventDelete",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onEventDeleted",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onEventUpdate",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onEventUpdated",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onEventCreateFailed",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onEventUpdateFailed",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onLabelClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onPageChange",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onPageLoaded",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onPageLoading",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscEventcalendar.prototype,"onSelectedDateChange",void 0);MbscEventcalendar=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,providers:[MbscEventListService,MbscInstanceService],selector:"mbsc-eventcalendar",template:'\n    <mbsc-calendar-view #calendar\n      [activeDate]="_active"\n      [calendarScroll]="_calendarScroll"\n      [calendarType]="_calendarType"\n      [clickToCreate]="s.clickToCreate"\n      [colors]="s.colors"\n      [context]="s.context"\n      [cssClass]="_cssClass"\n      [dataTimezone]="s.dataTimezone"\n      [dayTemplate]="dayTemplate"\n      [dayContentTemplate]="dayContentTemplate"\n      [displayTimezone]="s.displayTimezone"\n      [downIcon]="s.downIcon"\n      [dragData]="state.labelDragData"\n      [dragToCreate]="s.dragToCreate"\n      [dragToMove]="s.dragToMove"\n      [dragToResize]="s.dragToResize"\n      [endDay]="_rangeEndDay"\n      [eventOrder]="s.eventOrder"\n      [eventRange]="_rangeType"\n      [eventRangeSize]="_showSchedule ? _scheduleSize : (_showTimeline ? _timelineSize : _eventListSize)"\n      [exclusiveEndDates]="s.exclusiveEndDates"\n      [hasContent]="_showEventList || _showSchedule || _showTimeline"\n      [hasPicker]="true"\n      [headerTemplate]="headerTemplate"\n      [height]="s.height"\n      [invalid]="s.invalid"\n      [instanceService]="_instanceService"\n      [labels]="s.labels"\n      [labelTemplate]="labelTemplate"\n      [labelContentTemplate]="labelContentTemplate"\n      [marked]="s.marked"\n      [max]="s.max"\n      [min]="s.min"\n      [mouseSwipe]="(!s.dragToCreate && s.clickToCreate !== \'single\') || (!_showEventLabels && !_showEventCount)"\n      [mousewheel]="s.mousewheel"\n      [nextIconH]="s.nextIconH"\n      [nextIconV]="s.nextIconV"\n      [noOuterChange]="!_showEventList"\n      [onActiveChange]="_onActiveChange"\n      [onCellHoverIn]="_onCellHoverIn"\n      [onCellHoverOut]="_onCellHoverOut"\n      [onDayClick]="_onDayClick"\n      [onDayDoubleClick]="_onDayDoubleClick"\n      [onDayRightClick]="_onDayRightClick"\n      [onGestureStart]="_onGestureStart"\n      [onLabelClick]="_onLabelClick"\n      [onLabelDoubleClick]="_onLabelDoubleClick"\n      [onLabelRightClick]="_onLabelRightClick"\n      [onLabelHoverIn]="_onLabelHoverIn"\n      [onLabelHoverOut]="_onLabelHoverOut"\n      [onLabelDelete]="_onEventDelete"\n      [onLabelUpdateStart]="_onLabelUpdateStart"\n      [onLabelUpdateMove]="_onLabelUpdateMove"\n      [onLabelUpdateEnd]="_onLabelUpdateEnd"\n      [onLabelUpdateModeOn]="_onLabelUpdateModeOn"\n      [onLabelUpdateModeOff]="_onLabelUpdateModeOff"\n      [onPageChange]="_onPageChange"\n      [onPageLoaded]="_onPageLoaded"\n      [onPageLoading]="_onPageLoading"\n      [onResize]="_onResize"\n      [pageLoad]="_pageLoad"\n      [refDate]="_refDate"\n      [prevIconH]="s.prevIconH"\n      [prevIconV]="s.prevIconV"\n      [resourcesMap]="_resourcesMap"\n      [responsiveStyle]="true"\n      [rtl]="s.rtl"\n      [selectedDates]="_selectedDates"\n      selectView="month"\n      [showCalendar]="_showCalendar"\n      [showControls]="s.showControls"\n      [showEventTooltip]="s.showEventTooltip"\n      [showLabelCount]="_showEventCount"\n      [showOuterDays]="_showOuterDays"\n      [showSchedule]="_showSchedule || _showTimeline"\n      [showToday]="s.showToday"\n      [showWeekNumbers]="_showWeekNumbers"\n      [size]="_calendarSize"\n      [startDay]="_rangeStartDay"\n      [swipe]="!state.isTouchDrag"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n      [timeFormat]="s.timeFormat"\n      [timezonePlugin]="s.timezonePlugin"\n      [update]="_update"\n      [upIcon]="s.upIcon"\n      [valid]="s.valid"\n      [weeks]="_calendarSize"\n      [width]="s.width"\n      [getDate]="s.getDate"\n      [getDay]="s.getDay"\n      [getMaxDayOfMonth]="s.getMaxDayOfMonth"\n      [getMonth]="s.getMonth"\n      [getWeekNumber]="s.getWeekNumber"\n      [getYear]="s.getYear"\n      [dateFormat]="s.dateFormat"\n      [dayNames]="s.dayNames"\n      [dayNamesMin]="s.dayNamesMin"\n      [dayNamesShort]="s.dayNamesShort"\n      [eventText]="s.eventText"\n      [eventsText]="s.eventsText"\n      [firstDay]="s.firstDay"\n      [monthNames]="s.monthNames"\n      [monthNamesShort]="s.monthNamesShort"\n      [moreEventsPluralText]="s.moreEventsPluralText"\n      [moreEventsText]="s.moreEventsText"\n      [todayText]="s.todayText"\n      [yearSuffix]="s.yearSuffix"\n    >\n      <div *ngIf="_showDate && !_showScheduleDays" [class]="\'mbsc-schedule-date-header mbsc-flex\' + _theme + _hb">\n        <div *ngIf="_showSchedule && !_showCalendar && s.resources" class="mbsc-schedule-time-col"></div>\n        <div [class]="\'mbsc-schedule-date-header-text mbsc-flex-1-1\' + _theme">{{_selectedDateHeader}}</div>\n        <div *ngIf="_showSchedule && !_showCalendar && s.resources" class="mbsc-schedule-fake-scroll-y"></div>\n      </div>\n      <div *ngIf="_showEventList"\n        [class]="\'mbsc-event-list\' + (state.isListScrollable ? \' mbsc-event-list-scroll\' : \'\')"\n        (scroll)="_onScroll()" #list>\n        <ng-template #def>\n          <mbsc-list [rtl]="s.rtl" [theme]="s.theme" [themeVariant]="s.themeVariant">\n            <div *ngIf="!eventList.length" [ngClass]="\'mbsc-event-list-empty\' + _theme">\n              {{s.noEventsText}}\n            </div>\n            <div *ngFor="let eventList of state.eventList" mbsc-event-list-day\n              [ngClass]="\'mbsc-event-group\' + _theme"\n              [timestamp]="eventList.timestamp"\n            >\n              <mbsc-list-header *ngIf="_eventListType !== \'day\' || _eventListSize > 1"\n                class="mbsc-event-day"\n                [theme]="s.theme"\n                [themeVariant]="s.themeVariant"\n              >\n                {{eventList.date}}\n              </mbsc-list-header>\n              <mbsc-event-list-item *ngFor="let event of eventList.events"\n                [actionable]="s.actionableEvents"\n                class="mbsc-event"\n                [eventContentTemplate]="eventContentTemplate"\n                [eventData]="event"\n                [rtl]="s.rtl"\n                [showColor]="!_colorEventList"\n                [template]="eventTemplate"\n                [theme]="s.theme"\n                [themeVariant]="s.themeVariant"\n                (onHoverIn)="_onEventHoverIn({ date: eventList.timestamp , domEvent: $event.domEvent, event: event.original, source: \'agenda\' })"\n                (onHoverOut)="_onEventHoverOut({ date: eventList.timestamp , domEvent: $event.domEvent, event: event.original, source: \'agenda\' })"\n                (click)="_onEventClick({ date: eventList.timestamp , domEvent: $event, event: event.original, source: \'agenda\' })"\n                (dblclick)="_onEventDoubleClick({ date: eventList.timestamp , domEvent: $event, event: event.original, source: \'agenda\' })"\n                (contextmenu)="_onEventRightClick({ date: eventList.timestamp , domEvent: $event, event: event.original, source: \'agenda\' })"\n              >\n              </mbsc-event-list-item>\n            </div>\n          </mbsc-list>\n        </ng-template>\n        <ng-container [ngTemplateOutlet]="agendaTemplate || def" [ngTemplateOutletContext]="{ $implicit: state.eventList }">\n        </ng-container>\n      </div>\n\n      <mbsc-scheduler *ngIf="_showSchedule"\n        [allDayText]="s.allDayText"\n        [clickToCreate]="s.clickToCreate"\n        [colorsMap]="_colorsMap"\n        [dataTimezone]="s.dataTimezone"\n        [dateFormat]="s.dateFormat"\n        [dateFormatLong]="s.dateFormatLong"\n        [dayNamesMin]="s.dayNamesMin"\n        [dayNamesShort]="s.dayNamesShort"\n        [dayTemplate]="dayTemplate"\n        [dayContentTemplate]="dayContentTemplate"\n        [displayTimezone]="s.displayTimezone"\n        [dragTimeStep]="s.dragTimeStep"\n        [dragToCreate]="s.dragToCreate"\n        [dragToMove]="s.dragToMove"\n        [dragToResize]="s.dragToResize"\n        [endDay]="_scheduleEndDay"\n        [endTime]="_scheduleEndTime"\n        [eventContentTemplate]="scheduleEventContentTemplate"\n        [eventMap]="_eventMap"\n        [eventOrder]="s.eventOrder"\n        [eventTemplate]="scheduleEventTemplate"\n        [exclusiveEndDates]="s.exclusiveEndDates"\n        [extendDefaultEvent]="s.extendDefaultEvent"\n        [externalDrop]="s.externalDrop"\n        [firstDay]="s.firstDay"\n        [getDay]="s.getDay"\n        [getDate]="s.getDate"\n        [getMonth]="s.getMonth"\n        [getYear]="s.getYear"\n        [groupBy]="s.groupBy"\n        [height]="state.height"\n        [invalidateEvent]="s.invalidateEvent"\n        [invalidsMap]="_invalidsMap"\n        [maxDate]="_maxDate"\n        [minDate]="_minDate"\n        [newEventText]="s.newEventText"\n        [refDate]="_refDate"\n        [resources]="s.resources"\n        [resourceTemplate]="resourceTemplate"\n        [rtl]="s.rtl"\n        [scroll]="_shouldScrollSchedule"\n        [selected]="_selectedDateTime"\n        [showAllDay]="_showScheduleAllDay"\n        [showDays]="_showScheduleDays"\n        [showEventTooltip]="s.showEventTooltip"\n        [size]="_scheduleSize"\n        [startDay]="_scheduleStartDay"\n        [startTime]="_scheduleStartTime"\n        [timeCellStep]="_scheduleTimeCellStep"\n        [timeFormat]="s.timeFormat"\n        [timeLabelStep]="_scheduleTimeLabelStep"\n        [timezonePlugin]="s.timezonePlugin"\n        [theme]="s.theme"\n        [themeVariant]="s.themeVariant"\n        [type]="_scheduleType"\n        [width]="state.width"\n        [onCellClick]="_onCellClick"\n        [onCellDoubleClick]="_onCellDoubleClick"\n        [onCellRightClick]="_onCellRightClick"\n        [onEventClick]="_onEventClick"\n        [onEventDoubleClick]="_onEventDoubleClick"\n        [onEventRightClick]="_onEventRightClick"\n        [onEventHoverIn]="_onEventHoverIn"\n        [onEventHoverOut]="_onEventHoverOut"\n        [onEventDelete]="_onEventDelete"\n        [onEventDragEnd]="_onEventDragEnd"\n        [onWeekDayClick]="_onWeekDayClick"\n      >\n      </mbsc-scheduler>\n\n      <mbsc-timeline *ngIf="_showTimeline"\n        [allDayText]="s.allDayText"\n        [clickToCreate]="s.clickToCreate"\n        [colorsMap]="_colorsMap"\n        [dataTimezone]="s.dataTimezone"\n        [dateFormat]="s.dateFormat"\n        [dateFormatLong]="s.dateFormatLong"\n        [dayNames]="s.dayNames"\n        [dayNamesMin]="s.dayNamesMin"\n        [dayNamesShort]="s.dayNamesShort"\n        [displayTimezone]="s.displayTimezone"\n        [dragTimeStep]="s.dragTimeStep"\n        [dragToCreate]="slots ? false : s.dragToCreate"\n        [dragToMove]="s.dragToMove"\n        [dragToResize]="slots ? false : s.dragToResize"\n        [downIcon]="s.chevronIconDown"\n        [endDay]="_timelineEndDay"\n        [endTime]="_timelineEndTime"\n        [eventList]="_timelineListing"\n        [eventContentTemplate]="scheduleEventContentTemplate"\n        [eventMap]="_eventMap"\n        [eventOrder]="s.eventOrder"\n        [eventTemplate]="scheduleEventTemplate"\n        [exclusiveEndDates]="s.exclusiveEndDates"\n        [extendDefaultEvent]="s.extendDefaultEvent"\n        [externalDrop]="s.externalDrop"\n        [firstDay]="s.firstDay"\n        [getDay]="s.getDay"\n        [getDate]="s.getDate"\n        [getMonth]="s.getMonth"\n        [getYear]="s.getYear"\n        [groupBy]="s.groupBy"\n        [height]="state.height"\n        [invalidateEvent]="s.invalidateEvent"\n        [invalidsMap]="_invalidsMap"\n        [maxDate]="_maxDate"\n        [minDate]="_minDate"\n        [monthNames]="s.monthNames"\n        [monthNamesShort]="s.monthNamesShort"\n        [newEventText]="s.newEventText"\n        [nextIcon]="s.nextIconH"\n        [nextIconRtl]="s.nextIconV"\n        [refDate]="_refDate"\n        [resources]="s.resources"\n        [resourceHeaderTemplate]="resourceHeaderTemplate"\n        [resourceTemplate]="resourceTemplate"\n        [rtl]="s.rtl"\n        [rowHeight]="_timelineRowHeight"\n        [scroll]="_shouldScrollSchedule"\n        [showEventTooltip]="s.showEventTooltip"\n        [slots]="s.slots"\n        [slotTemplate]="slotTemplate"\n        [selected]="_selectedDateTime"\n        [size]="_timelineSize"\n        [startDay]="_timelineStartDay"\n        [startTime]="_timelineStartTime"\n        [timeCellStep]="_timelineTimeCellStep"\n        [timeFormat]="s.timeFormat"\n        [timeLabelStep]="_timelineTimeLabelStep"\n        [timezonePlugin]="s.timezonePlugin"\n        [theme]="s.theme"\n        [themeVariant]="s.themeVariant"\n        [type]="_timelineType"\n        [width]="state.width"\n        [onCellClick]="_onCellClick"\n        [onCellDoubleClick]="_onCellDoubleClick"\n        [onCellRightClick]="_onCellRightClick"\n        [onEventClick]="_onEventClick"\n        [onEventDoubleClick]="_onEventDoubleClick"\n        [onEventRightClick]="_onEventRightClick"\n        [onEventHoverIn]="_onEventHoverIn"\n        [onEventHoverOut]="_onEventHoverOut"\n        [onEventDelete]="_onEventDelete"\n        [onEventDragEnd]="_onEventDragEnd"\n      >\n      </mbsc-timeline>\n\n      <mbsc-popup\n        [anchor]="_anchor"\n        [closeOnScroll]="true"\n        [contentPadding]="false"\n        [context]="s.context"\n        [cssClass]="\'mbsc-calendar-popup \' + _popoverClass"\n        display="anchored"\n        [isOpen]="state.showPopover"\n        [locale]="s.locale"\n        maxHeight="24em"\n        [rtl]="s.rtl"\n        [scrollLock]="false"\n        [showOverlay]="false"\n        [theme]="s.theme"\n        [themeVariant]="s.themeVariant"\n        (onClose)="_onPopoverClose()">\n        <mbsc-list class="mbsc-popover-list" [rtl]="s.rtl" [theme]="s.theme" [themeVariant]="s.themeVariant">\n          <mbsc-event-list-item *ngFor="let event of state.popoverList"\n            [actionable]="s.actionableEvents"\n            class="mbsc-event"\n            [eventContentTemplate]="eventContentTemplate"\n            [eventData]="event"\n            [rtl]="s.rtl"\n            [showColor]="!_colorEventList"\n            [template]="eventTemplate"\n            [theme]="s.theme"\n            [themeVariant]="s.themeVariant"\n            [data]="event.original"\n            [drag]="_showEventLabels && s.dragToMove"\n            (onHoverIn)="_onEventHoverIn({ date: state.popoverDate , domEvent: $event.domEvent, event: event.original, source: \'agenda\' })"\n            (onHoverOut)="_onEventHoverOut({ date: state.popoverDate , domEvent: $event.domEvent, event: event.original, source: \'agenda\' })"\n            (click)="_onEventClick({ date: state.popoverDate, domEvent: $event, event: event.original, source: \'popover\' })"\n            (dblclick)="_onEventDoubleClick({ date: state.popoverDate, domEvent: $event, event: event.original, source: \'popover\' })"\n            (contextmenu)="_onEventRightClick({ date: state.popoverDate, domEvent: $event, event: event.original, source: \'popover\' })"\n            (onDragEnd)="_onLabelUpdateEnd($event)"\n            (onDragModeOff)="_onLabelUpdateModeOff($event)"\n            (onDragModeOn)="_onLabelUpdateModeOn($event)"\n            (onDragMove)="_onLabelUpdateMove($event)"\n            (onDragStart)="_onLabelUpdateStart($event)">\n          </mbsc-event-list-item>\n        </mbsc-list>\n      </mbsc-popup>\n      <div *ngIf="state.labelDragData && state.labelDragData.draggedEvent && !state.isTouchDrag" class="mbsc-calendar-dragging"></div>\n    </mbsc-calendar-view>\n  '})],MbscEventcalendar);return MbscEventcalendar}(EventcalendarBase);var ListBase=function(_super){__extends(ListBase,_super);function ListBase(){return _super!==null&&_super.apply(this,arguments)||this}ListBase.prototype._render=function(s){this._cssClass=this._className+this._rtl+" mbsc-font mbsc-list"+this._theme;};ListBase=__decorate([core.Directive({selector:"[mbsc-l-b]"})],ListBase);return ListBase}(BaseComponent);var ListHeaderBase=function(_super){__extends(ListHeaderBase,_super);function ListHeaderBase(){return _super!==null&&_super.apply(this,arguments)||this}ListHeaderBase.prototype._render=function(s){this._cssClass=this._className+" mbsc-list-header"+this._theme+this._hb;};ListHeaderBase=__decorate([core.Directive({selector:"[mbsc-lh-b]"})],ListHeaderBase);return ListHeaderBase}(BaseComponent);var MbscList=function(_super){__extends(MbscList,_super);function MbscList(){return _super!==null&&_super.apply(this,arguments)||this}MbscList=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-list",template:"<ng-content></ng-content>"})],MbscList);return MbscList}(ListBase);var MbscListHeader=function(_super){__extends(MbscListHeader,_super);function MbscListHeader(){return _super!==null&&_super.apply(this,arguments)||this}MbscListHeader=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-list-header",template:"<ng-content></ng-content>"})],MbscListHeader);return MbscListHeader}(ListHeaderBase);var MbscListModule=function(){function MbscListModule(){}MbscListModule=__decorate([core.NgModule({declarations:[ListBase,ListHeaderBase,ListItemBase,MbscList,MbscListHeader,MbscListItem],exports:[MbscList,MbscListHeader,MbscListItem],imports:[common.CommonModule]})],MbscListModule);return MbscListModule}();var MbscScheduleEvent=function(_super){__extends(MbscScheduleEvent,_super);function MbscScheduleEvent(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onClick=new core.EventEmitter;_this.onDoubleClick=new core.EventEmitter;_this.onRightClick=new core.EventEmitter;_this.onHoverIn=new core.EventEmitter;_this.onHoverOut=new core.EventEmitter;_this.onDelete=new core.EventEmitter;_this.onDragEnd=new core.EventEmitter;_this.onDragModeOff=new core.EventEmitter;_this.onDragModeOn=new core.EventEmitter;_this.onDragMove=new core.EventEmitter;_this.onDragStart=new core.EventEmitter;return _this}__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscScheduleEvent.prototype,"contentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduleEvent.prototype,"displayTimezone",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduleEvent.prototype,"drag",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScheduleEvent.prototype,"event",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduleEvent.prototype,"eventHeight",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduleEvent.prototype,"exclusiveEndDates",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduleEvent.prototype,"gridEndTime",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduleEvent.prototype,"gridStartTime",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduleEvent.prototype,"hidden",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduleEvent.prototype,"inactive",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduleEvent.prototype,"isDrag",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduleEvent.prototype,"isListing",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduleEvent.prototype,"isTimeline",void 0);__decorate([core.Input(),__metadata("design:type",Date)],MbscScheduleEvent.prototype,"lastDay",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduleEvent.prototype,"resize",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScheduleEvent.prototype,"resource",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduleEvent.prototype,"rtl",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScheduleEvent.prototype,"slot",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscScheduleEvent.prototype,"template",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduleEvent.prototype,"theme",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduleEvent.prototype,"timestamp",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScheduleEvent.prototype,"timezonePlugin",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScheduleEvent.prototype,"onClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScheduleEvent.prototype,"onDoubleClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScheduleEvent.prototype,"onRightClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScheduleEvent.prototype,"onHoverIn",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScheduleEvent.prototype,"onHoverOut",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScheduleEvent.prototype,"onDelete",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScheduleEvent.prototype,"onDragEnd",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScheduleEvent.prototype,"onDragModeOff",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScheduleEvent.prototype,"onDragModeOn",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScheduleEvent.prototype,"onDragMove",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScheduleEvent.prototype,"onDragStart",void 0);MbscScheduleEvent=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(click)":"_onClick($event)","(contextmenu)":"_onRightClick($event)","[attr.data-id]":"event.id","[attr.tabindex]":"0","[attr.title]":"event.tooltip","[class]":"_cssClass","[style.color]":"_style.color","[style.height]":"_style.height","[style.left]":"_style.left","[style.right]":"_style.right","[style.top]":"_style.top","[style.width]":"_style.width"},selector:"mbsc-schedule-event",template:"\n      <div *ngIf=\"_isStart && resize && event.original.editable !== false\" [class]=\"'mbsc-schedule-event-resize mbsc-schedule-event-resize-start' + _rtl +\n        (isDrag ? ' mbsc-schedule-event-resize-start-touch' : '') + (isTimeline ? ' mbsc-timeline-event-resize' : '')\">\n      </div>\n      <div *ngIf=\"_isEnd && resize && event.original.editable !== false\" [class]=\"'mbsc-schedule-event-resize mbsc-schedule-event-resize-end' + _rtl +\n        (isDrag ? ' mbsc-schedule-event-resize-start-touch' : '') + (isTimeline ? ' mbsc-timeline-event-resize' : '')\">\n      </div>\n      <ng-template #default>\n        <div *ngIf=\"!_isAllDay && !isTimeline\" [class]=\"'mbsc-schedule-event-bar' + _theme + _rtl\" ></div>\n        <div\n          [class]=\"'mbsc-schedule-event-background' + (isTimeline ? ' mbsc-timeline-event-background' : '') + (_isAllDay ? ' mbsc-schedule-event-all-day-background' : '') + _theme\"\n          [style.background]=\"event.style.background\"\n        ></div>\n        <div\n          [class]=\"'mbsc-schedule-event-inner' + _theme +\n            (_isAllDay ? ' mbsc-schedule-event-all-day-inner' : '') +\n            (event.cssClass || '')\"\n          [style.color]=\"event.style.color\"\n        >\n          <div [class]=\"'mbsc-schedule-event-title' + (_isAllDay ? ' mbsc-schedule-event-all-day-title' : '') + _theme\">\n            <div *ngIf=\"!contentTemplate\" [innerHTML]=\"_html\"></div>\n            <ng-template *ngIf=\"contentTemplate\"\n              [ngTemplateOutlet]=\"contentTemplate\"\n              [ngTemplateOutletContext]=\"{ $implicit: event }\">\n            </ng-template>\n          </div>\n          <div *ngIf=\"!_isAllDay\" [class]=\"'mbsc-schedule-event-range' + _theme\">\n            {{_rangeText}}\n          </div>\n        </div>\n      </ng-template>\n      <ng-template\n        [ngTemplateOutlet]=\"template || default\"\n        [ngTemplateOutletContext]=\"{ $implicit: event }\">\n      </ng-template>\n      \x3c!-- TRIAL --\x3e\n  "})],MbscScheduleEvent);return MbscScheduleEvent}(ScheduleEventBase);var MbscWeekDay=function(_super){__extends(MbscWeekDay,_super);function MbscWeekDay(){return _super!==null&&_super.apply(this,arguments)||this}__decorate([core.Input(),__metadata("design:type",String)],MbscWeekDay.prototype,"day",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscWeekDay.prototype,"dayNames",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscWeekDay.prototype,"dayTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscWeekDay.prototype,"dayContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscWeekDay.prototype,"events",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWeekDay.prototype,"isToday",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWeekDay.prototype,"largeNames",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscWeekDay.prototype,"resource",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWeekDay.prototype,"rtl",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWeekDay.prototype,"selectable",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWeekDay.prototype,"selected",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscWeekDay.prototype,"theme",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscWeekDay.prototype,"timestamp",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscWeekDay.prototype,"onClick",void 0);MbscWeekDay=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(click)":"_onClick()","[class]":"_cssClass"},selector:"mbsc-week-day",template:"\n    <ng-template *ngIf=\"dayTemplate\" [ngTemplateOutlet]=\"dayTemplate\" [ngTemplateOutletContext]=\"{ $implicit: _data }\"></ng-template>\n    <div *ngIf=\"!dayTemplate\" [class]=\"'mbsc-schedule-header-dayname' + _theme +\n      (s.selected ? ' mbsc-selected' : '' ) +\n      (s.isToday ? ' mbsc-schedule-header-dayname-curr' : '')\">\n      {{dayNames[_day]}}\n    </div>\n    <div *ngIf=\"!dayTemplate\" [class]=\"'mbsc-schedule-header-day' + _theme  + _rtl +\n      (s.selected ? ' mbsc-selected' : '' ) +\n      (s.isToday ? ' mbsc-schedule-header-day-today' : '') +\n      (state.hasHover ? ' mbsc-hover' : '')\">\n      {{day}}\n    </div>\n    <ng-template *ngIf=\"dayContentTemplate\" [ngTemplateOutlet]=\"dayContentTemplate\" [ngTemplateOutletContext]=\"{ $implicit: _data }\"></ng-template>\n  "})],MbscWeekDay);return MbscWeekDay}(WeekDayBase);var MbscScheduler=function(_super){__extends(MbscScheduler,_super);function MbscScheduler(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._defId=DEF_ID;return _this}MbscScheduler.prototype._getCellDate=function(timestamp,ms){return getCellDate(timestamp,ms)};MbscScheduler.prototype._getDayKey=function(index,day){return day.timestamp};MbscScheduler.prototype._getEventKey=function(index,data){return data.event?data.event.uid:index};MbscScheduler.prototype._getDragKey=function(dayEvents){return dayEvents.resource+"__"+dayEvents.key};MbscScheduler.prototype._mounted=function(){this._scrollCont=this.vScrollCont&&this.vScrollCont.nativeElement;this._gridCont=this.vGridCont&&this.vGridCont.nativeElement;this._headerCont=this.vHeaderCont&&this.vHeaderCont.nativeElement;this._timeCont=this.vTimeCont&&this.vTimeCont.nativeElement;this._allDayCont=this.vAllDayCont&&this.vAllDayCont.nativeElement;_super.prototype._mounted.call(this);};__decorate([core.ViewChild("scrollCont",{static:true,read:core.ElementRef}),__metadata("design:type",core.ElementRef)],MbscScheduler.prototype,"vScrollCont",void 0);__decorate([core.ViewChild("gridCont",{static:true,read:core.ElementRef}),__metadata("design:type",core.ElementRef)],MbscScheduler.prototype,"vGridCont",void 0);__decorate([core.ViewChild("headerCont",{static:false,read:core.ElementRef}),__metadata("design:type",core.ElementRef)],MbscScheduler.prototype,"vHeaderCont",void 0);__decorate([core.ViewChild("allDayCont",{static:false,read:core.ElementRef}),__metadata("design:type",core.ElementRef)],MbscScheduler.prototype,"vAllDayCont",void 0);__decorate([core.ViewChild("timeCont",{static:true,read:core.ElementRef}),__metadata("design:type",core.ElementRef)],MbscScheduler.prototype,"vTimeCont",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduler.prototype,"allDayText",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScheduler.prototype,"clickToCreate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScheduler.prototype,"colorsMap",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduler.prototype,"dataTimezone",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduler.prototype,"dateFormat",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduler.prototype,"dateFormatLong",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscScheduler.prototype,"dayNamesMin",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscScheduler.prototype,"dayNamesShort",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscScheduler.prototype,"dayTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscScheduler.prototype,"dayContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscScheduler.prototype,"events",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduler.prototype,"displayTimezone",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduler.prototype,"dragTimeStep",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduler.prototype,"dragToCreate",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduler.prototype,"dragToMove",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduler.prototype,"dragToResize",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduler.prototype,"endDay",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduler.prototype,"endTime",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScheduler.prototype,"eventMap",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscScheduler.prototype,"eventContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"eventOrder",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscScheduler.prototype,"eventTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduler.prototype,"exclusiveEndDates",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"extendDefaultEvent",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduler.prototype,"externalDrop",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduler.prototype,"firstDay",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"getDay",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"getDate",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"getMonth",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"getYear",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduler.prototype,"groupBy",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduler.prototype,"height",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduler.prototype,"invalidateEvent",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScheduler.prototype,"invalidsMap",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduler.prototype,"maxDate",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduler.prototype,"minDate",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduler.prototype,"newEventText",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScheduler.prototype,"refDate",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscScheduler.prototype,"resources",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscScheduler.prototype,"resourceTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduler.prototype,"scroll",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduler.prototype,"selected",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduler.prototype,"showAllDay",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduler.prototype,"showDays",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScheduler.prototype,"showEventTooltip",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduler.prototype,"size",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduler.prototype,"startDay",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduler.prototype,"startTime",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduler.prototype,"timeCellStep",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduler.prototype,"timeFormat",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduler.prototype,"timeLabelStep",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScheduler.prototype,"timezonePlugin",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScheduler.prototype,"type",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScheduler.prototype,"width",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"onCellClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"onCellDoubleClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"onCellRightClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"onEventClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"onEventDoubleClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"onEventRightClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"onEventHoverIn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"onEventHoverOut",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"onEventDelete",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"onEventDragEnd",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScheduler.prototype,"onWeekDayClick",void 0);MbscScheduler=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":'"mbsc-flex-col mbsc-flex-1-1 mbsc-schedule-wrapper" + _theme'},selector:"mbsc-scheduler",template:'\n    <div [class]="\'mbsc-schedule-header mbsc-flex mbsc-flex-none\' + _theme + _hb">\n      <div [class]="\'mbsc-schedule-time-col mbsc-schedule-time-col-empty\' + _theme + _rtl + _hb"></div>\n      <div class="mbsc-flex-1-1 mbsc-schedule-header-wrapper">\n        <div #headerCont class="mbsc-flex">\n          <div *ngIf="type === \'day\' && size === 1" class="mbsc-flex-1-0 mbsc-schedule-resource-group">\n            <div *ngIf="showDays" class="mbsc-flex">\n              <mbsc-week-day *ngFor="let dayData of _weekDays; trackBy: _getDayKey;"\n                class="mbsc-flex-1-1"\n                [day]="dayData.day"\n                [dayNames]="_dayNames"\n                [dayTemplate]="dayTemplate"\n                [dayContentTemplate]="dayContentTemplate"\n                [events]="eventMap[dayData.dateKey]"\n                [isToday]="_isToday(dayData.timestamp)"\n                [largeNames]="_largeDayNames"\n                [onClick]="onWeekDayClick"\n                [rtl]="rtl"\n                [selectable]="true"\n                [selected]="_selectedDay === dayData.timestamp"\n                [theme]="theme"\n                [timestamp]="dayData.timestamp"\n              >\n              </mbsc-week-day>\n            </div>\n            <div *ngIf="resources" class="mbsc-flex">\n              <ng-container *ngFor="let resource of _resources">\n                <div *ngIf="resource.name || resourceTemplate"\n                  [class]="\'mbsc-schedule-resource mbsc-flex-1-0 mbsc-schedule-col-width\' + _theme + _rtl + _hb"\n                >\n                  <div class="mbsc-schedule-resource-title">\n                    <ng-template #default>\n                      {{resource.name}}\n                    </ng-template>\n                    <ng-template\n                      [ngTemplateOutlet]="resourceTemplate || default"\n                      [ngTemplateOutletContext]="{ $implicit: resource }">\n                    </ng-template>\n                  </div>\n                </div>\n              </ng-container>\n            </div>\n          </div>\n          <ng-container *ngIf="type !== \'day\' || size !== 1">\n            <div *ngFor="let events of _events; let i = index; trackBy: _getKey;"\n              [class]="\'mbsc-flex-1-0 mbsc-schedule-resource-group\' + _theme + _rtl"\n            >\n              <ng-container *ngIf="_groupByResource">\n                <div *ngIf="_resources[i].name || resourceTemplate" [class]="\'mbsc-schedule-resource\' + _theme + _rtl + _hb">\n                  <div class="mbsc-schedule-resource-title">\n                    <ng-template #default>\n                      {{_resources[i].name}}\n                    </ng-template>\n                    <ng-template\n                      [ngTemplateOutlet]="resourceTemplate || default"\n                      [ngTemplateOutletContext]="{ $implicit: _resources[i] }">\n                    </ng-template>\n                  </div>\n                </div>\n                <div *ngIf="showDays" class="mbsc-flex">\n                  <mbsc-week-day *ngFor="let dayData of _weekDays; trackBy: _getDayKey;"\n                    class="mbsc-flex-1-0 mbsc-schedule-col-width"\n                    [day]="dayData.day"\n                    [dayNames]="_dayNames"\n                    [dayTemplate]="dayTemplate"\n                    [dayContentTemplate]="dayContentTemplate"\n                    [events]="eventMap[dayData.dateKey]"\n                    [isToday]="_isSingleResource &&_isToday(dayData.timestamp)"\n                    [largeNames]="_largeDayNames"\n                    [onClick]="onWeekDayClick"\n                    [resource]="_resources[i].id"\n                    [rtl]="rtl"\n                    [selectable]="false"\n                    [selected]="_isSingleResource && _isToday(dayData.timestamp)"\n                    [theme]="theme"\n                    [timestamp]="dayData.timestamp"\n                  >\n                  </mbsc-week-day>\n                </div>\n              </ng-container>\n              <ng-container *ngIf="!_groupByResource">\n                <mbsc-week-day *ngIf="showDays"\n                  [day]="events[0].day"\n                  [dayNames]="_dayNames"\n                  [dayTemplate]="dayTemplate"\n                  [dayContentTemplate]="dayContentTemplate"\n                  [events]="eventMap[events[0].key]"\n                  [isToday]="_isSingleResource && _isToday(events[0].timestamp)"\n                  [largeNames]="_largeDayNames"\n                  [onClick]="onWeekDayClick"\n                  [rtl]="rtl"\n                  [selectable]="false"\n                  [selected]="_isToday(events[0].timestamp)"\n                  [theme]="theme"\n                  [timestamp]="events[0].timestamp"\n                >\n                </mbsc-week-day>\n                <div *ngIf="resources" class="mbsc-flex">\n                  <ng-container *ngFor="let resource of _resources">\n                    <div *ngIf="resource.name || resourceTemplate"\n                      [class]="\'mbsc-schedule-resource mbsc-flex-1-0 mbsc-schedule-col-width\' + _theme + _rtl + _hb"\n                    >\n                      <div class="mbsc-schedule-resource-title">\n                        <ng-template #default>\n                          {{resource.name}}\n                        </ng-template>\n                        <ng-template\n                          [ngTemplateOutlet]="resourceTemplate || default"\n                          [ngTemplateOutletContext]="{ $implicit: resource }">\n                        </ng-template>\n                      </div>\n                    </div>\n                  </ng-container>\n                </div>\n              </ng-container>\n            </div>\n          </ng-container>\n        </div>\n      </div>\n      <div class="mbsc-schedule-fake-scroll-y"></div>\n    </div>\n    <div [class]="(state.showShadow ? \'mbsc-schedule-all-day-wrapper-shadow\' : \'\') + _theme">\n      <div *ngIf="showAllDay" [class]="\'mbsc-schedule-all-day-wrapper mbsc-flex-none\' + _theme + _hb">\n        <div [class]="\'mbsc-flex mbsc-schedule-all-day\' + _theme">\n          <div [class]="\'mbsc-schedule-time-col\' + _theme">\n            <div [class]="\'mbsc-schedule-all-day-text\' + _theme">{{allDayText}}</div>\n          </div>\n          <div class="mbsc-flex-col mbsc-flex-1-1 mbsc-schedule-all-day-group-wrapper">\n            <div #allDayCont class="mbsc-flex mbsc-flex-1-1">\n              <div *ngFor="let events of _events; let ind = index; trackBy: _getKey;"\n                [class]="\'mbsc-flex mbsc-flex-1-0 mbsc-schedule-resource-group\' + _theme + _rtl"\n              >\n                <div *ngFor="let dayEvents of events; let index = index; trackBy: _getDayKey;"\n                  [class]="\'mbsc-schedule-all-day-item mbsc-schedule-col-width mbsc-flex-1-0\' + _theme + _rtl + _hb"\n                >\n                  <ng-container *ngFor="let data of dayEvents.allDay; let i = index; trackBy: _getEventKey;">\n                    <mbsc-schedule-event *ngIf="data.showText"\n                      [contentTemplate]="eventContentTemplate"\n                      [displayTimezone]="displayTimezone"\n                      [drag]="dragToMove"\n                      [event]="data.event"\n                      [exclusiveEndDates]="exclusiveEndDates"\n                      [gridEndTime]="_endTime"\n                      [gridStartTime]="_startTime"\n                      [inactive]="state.dragData && state.dragData.draggedEvent && state.dragData.draggedEvent.id === data.event.id"\n                      [lastDay]="dayEvents.lastDay"\n                      [resize]="dragToResize"\n                      [rtl]="rtl"\n                      [theme]="theme"\n                      [template]="eventTemplate"\n                      [timestamp]="dayEvents.timestamp"\n                      [timezonePlugin]="timezonePlugin"\n                      (onClick)="onEventClick($event)"\n                      (onDoubleClick)="onEventDoubleClick($event)"\n                      (onRightClick)="onEventRightClick($event)"\n                      (onHoverIn)="onEventHoverIn($event)"\n                      (onHoverOut)="onEventHoverOut($event)"\n                      (onDelete)="onEventDelete($event)"\n                      (onDragStart)="_onEventDragStart($event)"\n                      (onDragMove)="_onEventDragMove($event)"\n                      (onDragEnd)="_onEventDragEnd($event)"\n                      (onDragModeOn)="_onEventDragModeOn($event)"\n                      (onDragModeOff)="_onEventDragModeOff()"\n                    >\n                    </mbsc-schedule-event>\n                    <div *ngIf="!data.showText"\n                      class="mbsc-schedule-event mbsc-schedule-event-all-day mbsc-schedule-event-all-day-placeholder">\n                      <div [class]="\'mbsc-schedule-event-all-day-inner\' + _theme"></div>\n                    </div>\n                  </ng-container>\n                  <mbsc-schedule-event\n                    *ngIf="state.dragData && state.dragData.originDates && state.dragData.originDates[_getDragKey(dayEvents)] && state.dragData.originDates[_getDragKey(dayEvents)].allDay"\n                    [contentTemplate]="eventContentTemplate"\n                    [displayTimezone]="displayTimezone"\n                    [drag]="dragToMove"\n                    [event]="state.dragData.originDates[_getDragKey(dayEvents)]"\n                    [exclusiveEndDates]="exclusiveEndDates"\n                    [gridEndTime]="_endTime"\n                    [gridStartTime]="_startTime"\n                    [hidden]="state.dragData && !!state.dragData.draggedDates"\n                    [isDrag]="true"\n                    [lastDay]="dayEvents.lastDay"\n                    [resize]="dragToResize"\n                    [resource]="dayEvents.resource"\n                    [rtl]="rtl"\n                    [theme]="theme"\n                    [template]="eventTemplate"\n                    [timestamp]="dayEvents.timestamp"\n                    [timezonePlugin]="timezonePlugin"\n                    (onDragStart)="_onEventDragStart($event)"\n                    (onDragMove)="_onEventDragMove($event)"\n                    (onDragEnd)="_onEventDragEnd($event)"\n                    (onDragModeOff)="_onEventDragModeOff()"\n                  >\n                  </mbsc-schedule-event>\n                  <mbsc-schedule-event *ngIf="state.dragData && state.dragData.draggedDates && state.dragData.draggedDates[_getDragKey(dayEvents)] && state.dragData.draggedDates[_getDragKey(dayEvents)].allDay"\n                    [contentTemplate]="eventContentTemplate"\n                    [displayTimezone]="displayTimezone"\n                    [drag]="dragToMove"\n                    [event]="state.dragData.draggedDates[_getDragKey(dayEvents)]"\n                    [exclusiveEndDates]="exclusiveEndDates"\n                    [gridEndTime]="_endTime"\n                    [gridStartTime]="_startTime"\n                    [isDrag]="true"\n                    [lastDay]="dayEvents.lastDay"\n                    [resize]="dragToResize"\n                    [resource]="dayEvents.resource"\n                    [rtl]="rtl"\n                    [theme]="theme"\n                    [template]="eventTemplate"\n                    [timestamp]="dayEvents.timestamp"\n                    [timezonePlugin]="timezonePlugin"\n                  >\n                  </mbsc-schedule-event>\n                  <div *ngIf="_invalids[dayEvents.resource][_defId][dayEvents.key].allDay"\n                    [class]="\'mbsc-schedule-invalid mbsc-schedule-invalid-all-day\' + _theme"\n                  >\n                    <div class="mbsc-schedule-invalid-text">\n                      {{_invalids[dayEvents.resource][_defId][dayEvents.key].allDay.title}}\n                    </div>\n                  </div>\n                  <div *ngIf="_colors[dayEvents.resource][_defId][dayEvents.key].allDay"\n                    [class]="\'mbsc-schedule-color mbsc-schedule-color-all-day\' + _theme"\n                    [ngStyle]="_colors[dayEvents.resource][_defId][dayEvents.key].allDay.position"\n                  >\n                    <div class="mbsc-schedule-color-text">\n                      {{_colors[dayEvents.resource][_defId][dayEvents.key].allDay.title}}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div [class]="\'mbsc-flex mbsc-flex-1-1 mbsc-schedule-grid-wrapper\' + _theme">\x3c!-- TRIAL --\x3e\n      <div #timeCont [class]="\'mbsc-flex-col mbsc-schedule-time-col mbsc-schedule-time-cont\' + _theme + _rtl">\n        <div class="mbsc-flex mbsc-schedule-time-cont-inner">\n          <div class="mbsc-flex-col mbsc-flex-1-1">\n            <div class="mbsc-flex-col mbsc-flex-1-1 mbsc-schedule-time-cont-pos">\n              <div *ngFor="let v of _times; let i = index; trackBy: _getKey;"\n                [class]="\'mbsc-flex-col mbsc-flex-1-0 mbsc-schedule-time-wrapper\' + _theme + _rtl +\n                  (i === _times.length - 1 ? \' mbsc-schedule-time-wrapper-end\' : \'\') +\n                  (i === 0 && _startCellStyle || i === _times.length - 1 && _endCellStyle ? \' mbsc-flex-none\' : \'\')"\n                [ngStyle]="i === 0 ? _startCellStyle : i === _times.length - 1 ? _endCellStyle : {}"\n              >\n                <div [class]="\'mbsc-flex-1-1 mbsc-schedule-time\' + _theme + _rtl">\n                    {{i === 0 || v % _stepLabel === 0 ? _formatTime(i === 0 ? _startTime : v) : \'\'}}\n                </div>\n\n                <ng-container *ngFor="let t of _timesBetween; let j = index; trackBy: _getKey">\n                  <div *ngIf="v + (j + 1) * _stepLabel > _startTime && v + (j + 1) * _stepLabel < _endTime"\n                    [class]="\'mbsc-flex-1-1 mbsc-schedule-time\' + _theme + _rtl">\n                    {{_formatTime(v + (j + 1) * _stepLabel)}}\n                  </div>\n                </ng-container>\n\n                <div *ngIf="i === _times.length - 1" [class]="\'mbsc-schedule-time mbsc-schedule-time-end\' + _theme + _rtl">\n                  {{_formatTime(_endTime + 1)}}\n                </div>\n              </div>\n              <mbsc-time-indicator *ngIf="_showTimeIndicator"\n                [displayedTime]="_time"\n                [displayedDays]="_days"\n                [displayTimezone]="displayTimezone"\n                [firstDay]="_firstDay"\n                orientation="x"\n                [rtl]="rtl"\n                [scheduleType]="type"\n                [showDayIndicator]="_isSingleResource && !_isMulti && type === \'week\'"\n                [startTime]="_startTime"\n                [theme]="theme"\n                [timeFormat]="timeFormat"\n                [timezonePlugin]="timezonePlugin">\n              </mbsc-time-indicator>\n              \x3c!-- <div *ngIf="_showCursorIndicator && state.cursorMoveData "\n                [class]=\'"mbsc-cursor-indicator mbsc-cursor-indicator-y" + _theme + _rtl\'\n                [ngStyle]="state.cursorMoveData.position"\n              >\n                <div [class]=\'"mbsc-cursor-indicator-time mbsc-cursor-indicator-time-y" + theme\'>{{state.cursorMoveData.time}}</div>\n              </div> --\x3e\n            </div>\n            <div *ngIf="state.hasScrollX" class="mbsc-schedule-fake-scroll-x"></div>\n          </div>\n          <div class="mbsc-schedule-fake-scroll-y"></div>\n        </div>\n      </div>\n      <div #scrollCont [class]="\'mbsc-flex-col mbsc-flex-1-1 mbsc-schedule-grid-scroll\' + _theme" (scroll)="_onScroll()">\n        <div #gridCont class="mbsc-flex mbsc-schedule-grid">\n          <div *ngFor="let events of _events; let ind = index; trackBy: _getKey;"\n            [class]="\'mbsc-flex mbsc-flex-1-0 mbsc-schedule-resource-group\' + _theme + _rtl + _hb"\n          >\n            <div *ngFor="let dayEvents of events; let index = index; trackBy: _getDayKey;"\n              [class]="\'mbsc-flex-col mbsc-flex-1-0 mbsc-schedule-column mbsc-schedule-col-width\' + _theme + _rtl + _hb"\n            >\n              <div [class]="\'mbsc-flex-col mbsc-flex-1-1 mbsc-schedule-column-inner\' + _theme + _rtl + _hb ">\n                <div [class]="\'mbsc-schedule-events\' + _rtl">\n                  <ng-container *ngFor="let data of dayEvents.events[_defId]; trackBy: _getEventKey;">\n                    <mbsc-schedule-event\n                      [contentTemplate]="eventContentTemplate"\n                      [displayTimezone]="displayTimezone"\n                      [drag]="dragToMove"\n                      [event]="data.event"\n                      [exclusiveEndDates]="exclusiveEndDates"\n                      [gridEndTime]="_endTime"\n                      [gridStartTime]="_startTime"\n                      [inactive]="state.dragData && state.dragData.draggedEvent && state.dragData.draggedEvent.id === data.event.id"\n                      [resize]="dragToResize"\n                      [resource]="dayEvents.resource"\n                      [rtl]="rtl"\n                      [theme]="theme"\n                      [template]="eventTemplate"\n                      [timestamp]="dayEvents.timestamp"\n                      [timezonePlugin]="timezonePlugin"\n                      (onClick)="onEventClick($event)"\n                      (onDoubleClick)="onEventDoubleClick($event)"\n                      (onRightClick)="onEventRightClick($event)"\n                      (onHoverIn)="onEventHoverIn($event)"\n                      (onHoverOut)="onEventHoverOut($event)"\n                      (onDelete)="onEventDelete($event)"\n                      (onDragStart)="_onEventDragStart($event)"\n                      (onDragMove)="_onEventDragMove($event)"\n                      (onDragEnd)="_onEventDragEnd($event)"\n                      (onDragModeOn)="_onEventDragModeOn($event)"\n                      (onDragModeOff)="_onEventDragModeOff()"\n                    >\n                    </mbsc-schedule-event>\n                  </ng-container>\n                  <mbsc-schedule-event *ngIf="state.dragData && state.dragData.originDates && state.dragData.originDates[_getDragKey(dayEvents)] && !state.dragData.originDates[_getDragKey(dayEvents)].allDay"\n                    [contentTemplate]="eventContentTemplate"\n                    [displayTimezone]="displayTimezone"\n                    [drag]="dragToMove"\n                    [event]="state.dragData.originDates[_getDragKey(dayEvents)]"\n                    [exclusiveEndDates]="exclusiveEndDates"\n                    [gridEndTime]="_endTime"\n                    [gridStartTime]="_startTime"\n                    [hidden]="state.dragData && !!state.dragData.draggedDates"\n                    [isDrag]="true"\n                    [resize]="dragToResize"\n                    [resource]="dayEvents.resource"\n                    [rtl]="rtl"\n                    [theme]="theme"\n                    [template]="eventTemplate"\n                    [timestamp]="dayEvents.timestamp"\n                    [timezonePlugin]="timezonePlugin"\n                    (onDragStart)="_onEventDragStart($event)"\n                    (onDragMove)="_onEventDragMove($event)"\n                    (onDragEnd)="_onEventDragEnd($event)"\n                    (onDragModeOff)="_onEventDragModeOff()"\n                  >\n                  </mbsc-schedule-event>\n                  <mbsc-schedule-event *ngIf="state.dragData && state.dragData.draggedDates && state.dragData.draggedDates[_getDragKey(dayEvents)] && !state.dragData.draggedDates[_getDragKey(dayEvents)].allDay"\n                    [contentTemplate]="eventContentTemplate"\n                    [displayTimezone]="displayTimezone"\n                    [drag]="dragToMove"\n                    [event]="state.dragData.draggedDates[_getDragKey(dayEvents)]"\n                    [exclusiveEndDates]="exclusiveEndDates"\n                    [gridEndTime]="_endTime"\n                    [gridStartTime]="_startTime"\n                    [isDrag]="true"\n                    [resize]="dragToResize"\n                    [rtl]="rtl"\n                    [theme]="theme"\n                    [template]="eventTemplate"\n                    [timestamp]="dayEvents.timestamp"\n                    [timezonePlugin]="timezonePlugin"\n                  >\n                  </mbsc-schedule-event>\n                </div>\n                <ng-container *ngIf="_invalids[dayEvents.resource][_defId][dayEvents.key].invalids">\n                  <div\n                    [class]="\'mbsc-schedule-invalid\' + invalid.cssClass + _theme"\n                    [ngStyle]="invalid.position"\n                    *ngFor="let invalid of _invalids[dayEvents.resource][_defId][dayEvents.key].invalids; let indx = index; trackBy: _getKey;"\n                  >\n                    <div class="mbsc-schedule-invalid-text">\n                      {{_invalids[dayEvents.resource][_defId][dayEvents.key].allDay ? \'\' : invalid.title || \'\'}}\n                    </div>\n                  </div>\n                </ng-container>\n                <ng-container *ngIf="_colors[dayEvents.resource][_defId][dayEvents.key].colors">\n                  <div\n                    [class]="\'mbsc-schedule-color\' + color.cssClass + _theme"\n                    [ngStyle]="color.position"\n                    *ngFor="let color of _colors[dayEvents.resource][_defId][dayEvents.key].colors; let indx = index; trackBy: _getKey;"\n                  >\n                    <div class="mbsc-schedule-color-text">\n                      {{color.title}}\n                    </div>\n                  </div>\n                </ng-container>\n                <div *ngFor="let v of _times; let i = index; trackBy: _getKey;"\n                  (click)="onCellClick({ date: _getCellDate(dayEvents.timestamp, v), domEvent: $event, resource: dayEvents.resource, source: \'schedule\' })"\n                  (dblclick)="onCellDoubleClick({ date: _getCellDate(dayEvents.timestamp, v), domEvent: $event, resource: dayEvents.resource, source: \'schedule\' })"\n                  (contextmenu)="onCellRightClick({ date: _getCellDate(dayEvents.timestamp, v), domEvent: $event, resource: dayEvents.resource, source: \'schedule\' })"\n                  [class]="\'mbsc-schedule-item mbsc-flex-1-0\' + _theme + _hb +\n                    (i === _times.length - 1 ? \' mbsc-schedule-item-last\' : \'\') +\n                    (i === 0 && _startCellStyle || i === _times.length - 1 && _endCellStyle ? \' mbsc-flex-none\' : \'\')"\n                  [ngStyle]="i === 0 ? _startCellStyle : _times.length - 1 === i ? _endCellStyle : {}"\n                >\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div *ngIf="state.dragData && !state.isTouchDrag" class="mbsc-calendar-dragging"></div>\n  '})],MbscScheduler);return MbscScheduler}(SchedulerBase);var MbscTimeIndicator=function(_super){__extends(MbscTimeIndicator,_super);function MbscTimeIndicator(){return _super!==null&&_super.apply(this,arguments)||this}__decorate([core.Input(),__metadata("design:type",String)],MbscTimeIndicator.prototype,"cssClass",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeIndicator.prototype,"displayedTime",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeIndicator.prototype,"displayedDays",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeIndicator.prototype,"displayTimezone",void 0);__decorate([core.Input(),__metadata("design:type",Date)],MbscTimeIndicator.prototype,"firstDay",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeIndicator.prototype,"orientation",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscTimeIndicator.prototype,"rtl",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeIndicator.prototype,"scheduleType",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscTimeIndicator.prototype,"showDayIndicator",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeIndicator.prototype,"startTime",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeIndicator.prototype,"theme",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeIndicator.prototype,"timeFormat",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscTimeIndicator.prototype,"timezonePlugin",void 0);MbscTimeIndicator=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-time-indicator",template:'\n    <div [class]="_cssClass" [ngStyle]="_pos">\n      <div [class]="\'mbsc-schedule-time-indicator-time mbsc-schedule-time-indicator-time-\' + orientation + _theme + _rtl">\n        {{_time}}\n      </div>\n      <div *ngIf="showDayIndicator"\n        [class]="\'mbsc-schedule-time-indicator-day\' + _theme"\n        [ngStyle]="_dayPos"\n      ></div>\n    </div>\n  '})],MbscTimeIndicator);return MbscTimeIndicator}(TimeIndicatorBase);var MbscTimeline=function(_super){__extends(MbscTimeline,_super);function MbscTimeline(){return _super!==null&&_super.apply(this,arguments)||this}MbscTimeline.prototype._getCellDate=function(timestamp,ms){return getCellDate(timestamp,ms)};MbscTimeline.prototype._getDayKey=function(index,day){return day.timestamp};MbscTimeline.prototype._getEventKey=function(index,data){return data.event?data.event.uid:index};MbscTimeline.prototype._getDragKey=function(dayEvents,slotId){return dayEvents.resource+"__"+slotId+"__"+dayEvents.key};MbscTimeline.prototype._mounted=function(){var _this=this;this._headerCont=this.vHeaderCont&&this.vHeaderCont.nativeElement;this._scrollCont=this.vScrollCont&&this.vScrollCont.nativeElement;this._gridCont=this.vGridCont&&this.vGridCont.nativeElement;this._resCont=this.vResCont&&this.vResCont.nativeElement;this._fillMonthDays();this._fillWeekDays();this.vMonthDays.changes.subscribe((function(){_this._fillMonthDays();}));this.vWeekDays.changes.subscribe((function(){_this._fillWeekDays();}));_super.prototype._mounted.call(this);};MbscTimeline.prototype._fillMonthDays=function(){var _this=this;this.vMonthDays.forEach((function(m,i){_this._dayRefs[i].month=m.nativeElement;}));};MbscTimeline.prototype._fillWeekDays=function(){var _this=this;this.vWeekDays.forEach((function(w,i){_this._dayRefs[i].day=w.nativeElement;}));};__decorate([core.ViewChild("scrollCont",{static:true,read:core.ElementRef}),__metadata("design:type",core.ElementRef)],MbscTimeline.prototype,"vScrollCont",void 0);__decorate([core.ViewChild("gridCont",{static:true,read:core.ElementRef}),__metadata("design:type",core.ElementRef)],MbscTimeline.prototype,"vGridCont",void 0);__decorate([core.ViewChild("headerCont",{static:true,read:core.ElementRef}),__metadata("design:type",core.ElementRef)],MbscTimeline.prototype,"vHeaderCont",void 0);__decorate([core.ViewChild("resCont",{static:false,read:core.ElementRef}),__metadata("design:type",core.ElementRef)],MbscTimeline.prototype,"vResCont",void 0);__decorate([core.ViewChildren("monthDays",{static:false,read:core.ElementRef}),__metadata("design:type",core.QueryList)],MbscTimeline.prototype,"vMonthDays",void 0);__decorate([core.ViewChildren("weekDays",{static:false,read:core.ElementRef}),__metadata("design:type",core.QueryList)],MbscTimeline.prototype,"vWeekDays",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"allDayText",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscTimeline.prototype,"clickToCreate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscTimeline.prototype,"colorsMap",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"dateFormat",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"dateFormatLong",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"dataTimezone",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscTimeline.prototype,"dayNames",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscTimeline.prototype,"dayNamesMin",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscTimeline.prototype,"dayNamesShort",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"displayTimezone",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeline.prototype,"dragTimeStep",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscTimeline.prototype,"dragToCreate",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscTimeline.prototype,"dragToMove",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscTimeline.prototype,"dragToResize",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeline.prototype,"endDay",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"endTime",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscTimeline.prototype,"eventMap",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscTimeline.prototype,"eventContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"eventOrder",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscTimeline.prototype,"eventTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscTimeline.prototype,"exclusiveEndDates",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"extendDefaultEvent",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscTimeline.prototype,"externalDrop",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscTimeline.prototype,"eventList",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeline.prototype,"firstDay",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"getDay",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"getDate",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"getMonth",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"getYear",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"groupBy",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeline.prototype,"height",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"invalidateEvent",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscTimeline.prototype,"invalidsMap",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeline.prototype,"maxDate",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeline.prototype,"minDate",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscTimeline.prototype,"monthNames",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscTimeline.prototype,"monthNamesShort",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"newEventText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"nextIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"nextIconRtl",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"downIcon",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscTimeline.prototype,"refDate",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscTimeline.prototype,"resources",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscTimeline.prototype,"resourceHeaderTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscTimeline.prototype,"resourceTemplate",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"rowHeight",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeline.prototype,"scroll",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeline.prototype,"selected",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscTimeline.prototype,"showAllDay",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscTimeline.prototype,"showDays",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscTimeline.prototype,"showEventTooltip",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeline.prototype,"size",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscTimeline.prototype,"slots",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscTimeline.prototype,"slotTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeline.prototype,"startDay",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"startTime",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeline.prototype,"timeCellStep",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"timeFormat",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeline.prototype,"timeLabelStep",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscTimeline.prototype,"timezonePlugin",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeline.prototype,"type",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscTimeline.prototype,"width",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"onCellClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"onCellDoubleClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"onCellRightClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"onEventClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"onEventDoubleClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"onEventRightClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"onEventHoverIn",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"onEventHoverOut",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"onEventDelete",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"onEventDragEnd",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeline.prototype,"onWeekDayClick",void 0);MbscTimeline=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":'"mbsc-timeline mbsc-flex-1-1 mbsc-flex-col" + (resources ? "" : " mbsc-timeline-no-resource") + _theme + _rtl'},selector:"mbsc-timeline",template:'\n    \x3c!-- TRIAL --\x3e\n    <div [class]="\'mbsc-flex-none\' + _headerClass"></div>\n    <div [class]="\'mbsc-timeline-header mbsc-flex\' + _theme + _rtl + _hb">\n      <div *ngIf="!!resources" [class]="\'mbsc-timeline-resource-empty mbsc-timeline-resource-col\' + _headerClass + _theme + _rtl + _hb">\n        <div class="mbsc-timeline-resource-header">\n          <ng-template [ngTemplateOutlet]="resourceHeaderTemplate"></ng-template>\n        </div>\n      </div>\n      <div #headerCont class="mbsc-timeline-header-time-cont mbsc-flex-1-1">\n        <div *ngIf="_isMulti" class="mbsc-flex">\n          <div *ngFor="let d of _weekDays; trackBy: _getKey;" [class]="\'mbsc-timeline-month mbsc-flex-1-1\' + _theme + _rtl + _hb +\n            (d.last ? \' mbsc-timeline-day\' : \'\')">\n            <div [class]="\'mbsc-timeline-header-month\' + _theme + _rtl + _hb + (d.last ? \' mbsc-timeline-header-month-last\' : \'\')">\n              <div #monthDays [class]="\'mbsc-timeline-header-month-text\' + _theme + (d.last ? \' mbsc-timeline-header-month-text-last\' : \'\')">\n                {{d.month || \' \'}}\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="mbsc-flex">\n          <div *ngFor="let d of _weekDays; trackBy: _getKey;"\n            [class]="\'mbsc-timeline-day mbsc-flex-1-1\' + _theme + _rtl + _hb +\n              (type === \'month\' ? \' mbsc-timeline-day-month\' : \'\')"\n          >\n            <div [class]="\'mbsc-timeline-header-date\' + _theme + _rtl + _hb">\n              <div #weekDays [class]="\'mbsc-timeline-header-date-text\' + _rtl">\n                {{d.date}}\n              </div>\n            </div>\n            <div *ngIf="_hasSlots" [class]="\'mbsc-flex mbsc-timeline-slots\' + _theme">\n              <div *ngFor="let slot of _slots"\n                [class]="\'mbsc-timeline-slot mbsc-timeline-slot-header\' + _rtl + _theme"\n              >\n                <div class="mbsc-timeline-slot-title">\n                  <ng-template #defaultSlot>\n                      {{slot.name}}\n                    </ng-template>\n                    <ng-template\n                      [ngTemplateOutlet]="slotTemplate || defaultSlot"\n                      [ngTemplateOutletContext]="{ $implicit: { slot: slot, date: d.dateObj }}">\n                    </ng-template>\n                  </div>\n              </div>\n            </div>\n            <div class="mbsc-flex">\n              <div *ngFor="let t of _times; let i = index; let firstTime = first; let lastTime = last; trackBy: _getKey;"\n                [ngStyle]="firstTime ? _startCellStyle : lastTime ? _endCellStyle : {}"\n                [class]="\'mbsc-flex mbsc-flex-1-1 mbsc-timeline-header-column\' + _rtl + _theme + _hb +\n                  (!_displayTime || _hasSlots ? \' mbsc-timeline-no-height\' : \'\') +\n                  (_stepLabel > _stepCell && (_times[i + 1] % _stepLabel) ? \' mbsc-timeline-no-border\' : \'\') +\n                  (firstTime && _startCellStyle || lastTime && _endCellStyle ? \' mbsc-flex-none\' : \'\')"\n              >\n                <div [class]="\'mbsc-timeline-header-time mbsc-flex-1-1 \' + _theme">\n                  {{_displayTime && (firstTime || t % _stepLabel === 0) ? _formatTime(firstTime ? _startTime : t) : \'\'}}\n                </div>\n                <ng-container *ngFor="let t of _timesBetween; let j = index; trackBy: _getKey">\n                  <div *ngIf="t + (j + 1) * _stepLabel > _startTime && t + (j + 1) * _stepLabel < _endTime"\n                    [class]="\'mbsc-timeline-header-time mbsc-flex-1-1\' + _theme + _rtl">\n                    {{_formatTime(t + (j + 1) * _stepLabel)}}\n                  </div>\n                </ng-container>\n              </div>\n            </div>\n          </div>\n        </div>\n        <mbsc-time-indicator *ngIf="_showTimeIndicator"\n          [displayedTime]="_time"\n          [displayedDays]="_days"\n          [displayTimezone]="displayTimezone"\n          [firstDay]="_firstDay"\n          orientation="y"\n          [rtl]="rtl"\n          [scheduleType]="type"\n          [startTime]="_startTime"\n          [theme]="theme"\n          [timeFormat]="timeFormat"\n          [timezonePlugin]="timezonePlugin"\n          >\n        </mbsc-time-indicator>\n        \x3c!-- <div *ngIf="_showCursorIndicator && state.cursorMoveData "\n          [class]=\'"mbsc-cursor-indicator mbsc-cursor-indicator-x" + _theme\'\n          [ngStyle]="state.cursorMoveData.position"\n        >\n          <div [class]=\'"mbsc-cursor-indicator-time mbsc-cursor-indicator-time-x" + theme\'>{{state.cursorMoveData.time}}</div>\n        </div> --\x3e\n      </div>\n      <div *ngIf="state.hasScrollY" class="mbsc-schedule-fake-scroll-y"></div>\n    </div>\n    <div #scrollCont [class]="\'mbsc-timeline-grid-scroll mbsc-flex mbsc-flex-1-1\' + _theme + _rtl + _hb" (scroll)="_onScroll()">\n      <div class="mbsc-flex mbsc-flex-1-1">\n        <div *ngIf="!!resources" #resCont [class]="\'mbsc-timeline-resources mbsc-timeline-resource-col mbsc-flex-col\' + _theme + _rtl">\n          <div *ngIf="!_hasSticky" [class]="\'mbsc-flex-none\' + _headerClass"></div>\n          <div [class]="\'mbsc-timeline-resource-bg mbsc-flex-1-1\' + (_hasHierarchy ? \'\' : \' mbsc-flex-col\') + _theme">\n            <ng-container *ngFor="let resource of resources">\n              \x3c!-- Define the recursive template. --\x3e\n              <ng-template #resourceTempRef let-res="res" let-depth="depth">\n                <div [class]="\'mbsc-timeline-resource\' + _theme + _rtl + _hb + (res.children ? \' mbsc-timeline-parent mbsc-flex\' : \'\')"\n                  [style.minHeight.px]="_setRowHeight ? _eventRows[res.id] * _eventHeight + 10 : undefined"\n                  [style.paddingLeft.em]="rtl ? undefined : depth * 1.75"\n                  [style.paddingRight.em]="rtl ? depth * 1.75 : undefined"\n                >\n                  <mbsc-icon *ngIf="res.children"\n                    [class]="\'mbsc-timeline-resource-icon\' + _theme + _rtl + _hb"\n                    [svg]="res.collapsed ? (rtl ? s.nextIconRtl : s.nextIcon) : s.downIcon"\n                    [theme]="s.theme"\n                    (click)="_onParentClick(res)"\n                  >\n                  </mbsc-icon>\n                  <div [class]="\'mbsc-timeline-resource-title\' + (res.children ? \' mbsc-flex-1-1\' : \'\')">\n                    <ng-template #default>\n                      {{res.name}}\n                    </ng-template>\n                    <ng-template\n                      [ngTemplateOutlet]="resourceTemplate || default"\n                      [ngTemplateOutletContext]="{ $implicit: res }">\n                    </ng-template>\n                  </div>\n                </div>\n                <div *ngIf="res.children && !res.collapsed" class="mbsc-timeline-resource-children">\n                  <ng-template ngFor let-child [ngForOf]="res.children">\n                    \x3c!-- Invoke the recursive template. --\x3e\n                    <ng-template\n                      [ngTemplateOutlet]="resourceTempRef"\n                      [ngTemplateOutletContext]="{ res: child, depth: depth + 1 }">\n                    </ng-template>\n                  </ng-template>\n                </div>\n              </ng-template>\n              \x3c!-- Initiate the recursive template rendering. --\x3e\n              <ng-template\n                [ngTemplateOutlet]="resourceTempRef"\n                [ngTemplateOutletContext]="{ res: resource, depth: 0 }">\n              </ng-template>\n            </ng-container>\n          </div>\n      </div>\n        <div *ngIf="!_hasSticky && !!resources" class="mbsc-timeline-resource-col"></div>\n        <div class="mbsc-flex-col mbsc-flex-1-1">\n          \x3c!-- The extra flex div is needed for the div height to expand correctly --\x3e\n          <div class="mbsc-flex-col mbsc-flex-1-1">\n            <div #gridCont [class]="\'mbsc-timeline-grid mbsc-flex-col\' + (_hasHierarchy ? \'\' : \' mbsc-flex-1-1\')">\n              <ng-container *ngFor="let r of (resources || _resources)">\n                \x3c!-- Define the recursive template. --\x3e\n                <ng-template #rowTemplate let-res="res">\n                  <div\n                    [class]="\'mbsc-flex mbsc-timeline-row\' + _theme + _hb + (res.children ? \' mbsc-timeline-parent\' : \'\')"\n                    [style.minHeight.px]="_setRowHeight ? _eventRows[res.id] * _eventHeight + 10 : undefined"\n                  >\n                    <div *ngFor="let dayEvents of _events[_resources.indexOf(res)]; let lastEvent = last; trackBy: _getDayKey;"\n                      [class]="\'mbsc-timeline-day mbsc-flex mbsc-flex-1-1\' + _theme + _rtl + _hb +\n                        (type === \'month\' ? \' mbsc-timeline-day-month\' : \'\')"\n                    >\n                      <ng-container *ngFor="let slot of _slots; let lastSlot = last;">\n                        <div [class]="\'mbsc-flex mbsc-flex-1-1\' + (_hasSlots ? \' mbsc-timeline-slot\' : \'\')">\n                          <div class="mbsc-timeline-events">\n                            <ng-container *ngFor="let data of dayEvents.events[slot.id]; trackBy: _getEventKey;">\n                              <mbsc-schedule-event *ngIf="data.showText"\n                                [contentTemplate]="eventContentTemplate"\n                                [displayTimezone]="displayTimezone"\n                                [drag]="dragToMove"\n                                [event]="data.event"\n                                [eventHeight]="_setRowHeight ? _eventHeight : undefined"\n                                [exclusiveEndDates]="exclusiveEndDates"\n                                [gridEndTime]="_endTime"\n                                [gridStartTime]="_startTime"\n                                [inactive]="state.dragData && state.dragData.draggedEvent && state.dragData.draggedEvent.id === data.event.id"\n                                [isTimeline]="true"\n                                [isListing]="eventList"\n                                [lastDay]="dayEvents.lastDay"\n                                [resize]="dragToResize"\n                                [resource]="dayEvents.resource"\n                                [rtl]="rtl"\n                                [slot]="slot.id"\n                                [theme]="theme"\n                                [template]="eventTemplate"\n                                [timestamp]="dayEvents.timestamp"\n                                [timezonePlugin]="timezonePlugin"\n                                (onClick)="onEventClick($event)"\n                                (onDoubleClick)="onEventDoubleClick($event)"\n                                (onRightClick)="onEventRightClick($event)"\n                                (onHoverIn)="onEventHoverIn($event)"\n                                (onHoverOut)="onEventHoverOut($event)"\n                                (onDelete)="onEventDelete($event)"\n                                (onDragStart)="_onEventDragStart($event)"\n                                (onDragMove)="_onEventDragMove($event)"\n                                (onDragEnd)="_onEventDragEnd($event)"\n                                (onDragModeOn)="_onEventDragModeOn($event)"\n                                (onDragModeOff)="_onEventDragModeOff()"\n                              >\n                              </mbsc-schedule-event>\n                              <div *ngIf="!data.showText"\n                                class="mbsc-schedule-event mbsc-timeline-event-listing mbsc-schedule-event-all-day-placeholder">\n                                <div [class]="\'mbsc-schedule-event-all-day-inner\' + _theme"></div>\n                              </div>\n                            </ng-container>\n                            <mbsc-schedule-event *ngIf="state.dragData && state.dragData.originDates && state.dragData.originDates[_getDragKey(dayEvents, slot.id)]"\n                              [contentTemplate]="eventContentTemplate"\n                              [displayTimezone]="displayTimezone"\n                              [drag]="dragToMove"\n                              [event]="state.dragData.originDates[_getDragKey(dayEvents, slot.id)]"\n                              [exclusiveEndDates]="exclusiveEndDates"\n                              [gridEndTime]="_endTime"\n                              [gridStartTime]="_startTime"\n                              [hidden]="state.dragData && !!state.dragData.draggedDates"\n                              [isDrag]="true"\n                              [isTimeline]="true"\n                              [isListing]="eventList"\n                              [lastDay]="_lastDay"\n                              [resize]="dragToResize"\n                              [resource]="dayEvents.resource"\n                              [rtl]="rtl"\n                              [slot]="slot.id"\n                              [theme]="theme"\n                              [template]="eventTemplate"\n                              [timestamp]="dayEvents.timestamp"\n                              [timezonePlugin]="timezonePlugin"\n                              (onDragStart)="_onEventDragStart($event)"\n                              (onDragMove)="_onEventDragMove($event)"\n                              (onDragEnd)="_onEventDragEnd($event)"\n                              (onDragModeOff)="_onEventDragModeOff()"\n                            >\n                            </mbsc-schedule-event>\n                            <mbsc-schedule-event *ngIf="state.dragData && state.dragData.draggedDates && state.dragData.draggedDates[_getDragKey(dayEvents, slot.id)]"\n                              [contentTemplate]="eventContentTemplate"\n                              [displayTimezone]="displayTimezone"\n                              [drag]="dragToMove"\n                              [event]="state.dragData.draggedDates[_getDragKey(dayEvents, slot.id)]"\n                              [exclusiveEndDates]="exclusiveEndDates"\n                              [gridEndTime]="_endTime"\n                              [gridStartTime]="_startTime"\n                              [isDrag]="true"\n                              [isTimeline]="true"\n                              [isListing]="eventList"\n                              [lastDay]="_lastDay"\n                              [resize]="dragToResize"\n                              [resource]="dayEvents.resource"\n                              [rtl]="rtl"\n                              [slot]="slot.id"\n                              [theme]="theme"\n                              [template]="eventTemplate"\n                              [timestamp]="dayEvents.timestamp"\n                              [timezonePlugin]="timezonePlugin"\n                            >\n                            </mbsc-schedule-event>\n                          </div>\n                          <ng-container *ngFor="let invalid of _invalids[dayEvents.resource][slot.id][dayEvents.key].invalids">\n                            <div *ngIf="invalid.position"\n                              [class]="\'mbsc-schedule-invalid mbsc-timeline-invalid\' + invalid.cssClass + _theme"\n                              [ngStyle]="invalid.position"\n                            >\n                              <div class="mbsc-schedule-invalid-text">\n                                {{_invalids[dayEvents.resource][slot.id][dayEvents.key].allDay ? \'\' : invalid.title || \'\'}}\n                              </div>\n                            </div>\n                          </ng-container>\n                          <div *ngFor="let color of _colors[dayEvents.resource][slot.id][dayEvents.key].colors"\n                            [class]="\'mbsc-schedule-color mbsc-timeline-color\' + color.cssClass + _theme"\n                            [ngStyle]="color.position"\n                          >\n                            <div class="mbsc-schedule-color-text">\n                              {{color.title}}\n                            </div>\n                          </div>\n                          <div *ngFor="let v of _times; let firstTime = first; let lastTime = last; trackBy: _getKey;"\n                            (click)="onCellClick({ date: _getCellDate(dayEvents.timestamp, v), domEvent: $event, resource: dayEvents.resource, slot: slot.id, source: \'timeline\' })"\n                            (dblclick)="onCellDoubleClick({ date: _getCellDate(dayEvents.timestamp, v), domEvent: $event, resource: dayEvents.resource, slot: slot.id, source: \'timeline\' })"\n                            (contextmenu)="onCellRightClick({ date: _getCellDate(dayEvents.timestamp, v), domEvent: $event, resource: dayEvents.resource, slot: slot.id, source: \'timeline\' })"\n                            [ngStyle]="firstTime ? _startCellStyle : lastTime ? _endCellStyle : {}"\n                            [class]="\'mbsc-timeline-column mbsc-flex-1-1\' + _rtl + _theme + _hb +\n                              (firstTime && _startCellStyle || lastTime && _endCellStyle ? \' mbsc-flex-none\' : \'\')"\n                          >\n                          </div>\n                        </div>\n                      </ng-container>\n                    </div>\n                  </div>\n                  <div *ngIf="res.children && !res.collapsed" class="mbsc-timeline-resource-children">\n                    <ng-template ngFor let-child [ngForOf]="res.children">\n                      \x3c!-- Invoke the recursive template. --\x3e\n                      <ng-template\n                        [ngTemplateOutlet]="rowTemplate"\n                        [ngTemplateOutletContext]="{ res: child }">\n                      </ng-template>\n                    </ng-template>\n                  </div>\n                </ng-template>\n                \x3c!-- Initiate the recursive template rendering. --\x3e\n                <ng-template\n                  [ngTemplateOutlet]="rowTemplate"\n                  [ngTemplateOutletContext]="{ res: r }">\n                </ng-template>\n              </ng-container>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div *ngIf="state.dragData && !state.isTouchDrag" class="mbsc-calendar-dragging"></div>\n  '})],MbscTimeline);return MbscTimeline}(TimelineBase);var MbscEventcalendarModule=function(){function MbscEventcalendarModule(){}MbscEventcalendarModule=__decorate([core.NgModule({declarations:[EventcalendarBase,MbscEventcalendar,MbscEventListDayDirective,MbscEventListItem,MbscScheduleEvent,MbscScheduler,MbscTimeline,MbscWeekDay,MbscTimeIndicator,ScheduleEventBase,SchedulerBase,STBase,TimeIndicatorBase,TimelineBase,WeekDayBase],exports:[MbscEventcalendar,MbscEventListDayDirective,MbscEventListItem,MbscCalendarHeaderModule,MbscDraggableModule],imports:[common.CommonModule,MbscCalendarHeaderModule,MbscCalendarViewModule,MbscIconModule,MbscListModule,MbscPopupModule]})],MbscEventcalendarModule);return MbscEventcalendarModule}();function getIonInput(el,cb,nr){if(nr===void 0){nr=0;}if(nr>10){delete el.__mbscTimer;cb(el);}else {clearTimeout(el.__mbscTimer);el.__mbscTimer=setTimeout((function(){if(el.getInputElement){el.getInputElement().then((function(inp){if(inp){delete el.__mbscTimer;cb(inp);}else {getIonInput(el,cb,nr+1);}}));}else {getIonInput(el,cb,nr+1);}}),10);}}function isIonInput(el){return el.getInputElement||el.tagName&&el.tagName.toLowerCase()==="ion-input"}var PickerBase=function(_super){__extends(PickerBase,_super);function PickerBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._nullSupport=true;_this._onInputClick=function(ev){if(!_this.s.disabled){_this._focusElm=ev.target;_this._anchor=_this.s.anchor||_this._focusElm;_this.open();}};_this._onInputFocus=function(ev){if(_this._preventShow){_this._preventShow=false;}else {_this._onInputClick(ev);}};_this._onInputMouseDown=function(ev){ev.preventDefault();};_this._onInputKey=function(ev){if(ev.keyCode===SPACE||ev.keyCode===ENTER){ev.preventDefault();_this._onInputClick(ev);}};_this._onInputChange=function(ev,val){var value=ev.detail||(val!==UNDEFINED?val:ev.target.value);if(value!==_this._tempValueText&&!_this._preventChange){_this._readValue(value);_this._valueTextChange=value!==_this._tempValueText;var newValue=isEmpty(value)?null:_this._get(_this._tempValueRep);_this.value=newValue;_this._change(newValue);}_this._preventChange=false;};_this._onResize=function(args){_this._hook("onResize",args);};_this._onWrapperResize=function(){if(_this._wrapper){_this._onResize({windowWidth:_this._wrapper.offsetWidth});}};_this._onPopupClose=function(args){if(/cancel|esc|overlay|scroll/.test(args.source)){_this._hook("onCancel",{value:_this.value,valueText:_this._valueText});}_this.close();};_this._onPopupClosed=function(args){if(args.focus){_this._preventShow=true;}_this._hook("onClosed",args);_this._onClosed();};_this._onPopupKey=function(args){if(args.keyCode===13){_this._onEnterKey(args);}};_this._onPopupOpen=function(args){args.value=_this.value;args.valueText=_this._valueText;_this._hook("onOpen",args);};_this._onWinFocus=function(){if(_this._win.document.activeElement===_this._focusElm){_this._preventShow=true;}};_this._onButtonClick=function(_a){var domEvent=_a.domEvent,button=_a.button;if(button.name==="set"){_this.set();}if(_this._popup){_this._popup._onButtonClick({domEvent:domEvent,button:button});}};_this._setInput=function(inp){_this._el=inp&&inp.nativeElement?inp.nativeElement:inp;_this._isMbsc=!!inp&&inp._mbsc;};_this._setPopup=function(popup){_this._popup=popup;};_this._setWrapper=function(wrapper){_this._wrapper=wrapper;};return _this}PickerBase.prototype.open=function(){if(this._inst){this._inst.open();return}if(this.s.isOpen===UNDEFINED){this.setState({isOpen:true});}};PickerBase.prototype.close=function(){if(this.s.display==="inline"){return}if(this._inst){this._inst.close();return}var args={value:this.value,valueText:this._valueText};if(this.s.isOpen===UNDEFINED){this.setState({isOpen:false});}this._hook("onClose",args);};PickerBase.prototype.set=function(){this._valueRep=this._copy(this._tempValueRep);this._valueText=this._tempValueText;this._value=this.value=this._get(this._valueRep);this._change(this.value);};PickerBase.prototype.position=function(){if(this._inst){this._inst.position();return}if(this._popup){this._popup.position();}};PickerBase.prototype.isVisible=function(){if(this._inst){return this._inst.isVisible()}return !!this._popup&&this._popup.isVisible()};PickerBase.prototype.getVal=function(){return this._get(this._valueRep)};PickerBase.prototype.setVal=function(value){this.value=value;this.setState({value:value});};PickerBase.prototype.getTempVal=function(){return this._get(this._tempValueRep)};PickerBase.prototype.setTempVal=function(value){this._tempValueSet=true;this._tempValueRep=this._parse(value);this._setOrUpdate(true);};PickerBase.prototype._shouldValidate=function(s,prevS){return false};PickerBase.prototype._valueEquals=function(v1,v2){return v1===v2};PickerBase.prototype._render=function(s,state){var _this=this;var props=this.props||{};var resp=this._respProps||{};var prevS=this._prevS;if(!this._touchUi){s.display=resp.display||props.display||options.display||"anchored";s.showArrow=resp.showArrow||props.showArrow||false;}if(s.display==="bubble"){s.display="anchored";}this._scrollLock=s.scrollLock;var isOpen=s.isOpen!==UNDEFINED?s.isOpen:state.isOpen;var controlled=s.value!==UNDEFINED;var value=controlled?s.value:state.value===UNDEFINED?s.defaultValue:state.value;this._showInput=s.showInput!==UNDEFINED?s.showInput:s.display!=="inline"&&s.element===UNDEFINED;if(!this._buttons||s.buttons!==prevS.buttons||s.display!==prevS.display||s.setText!==prevS.setText||s.cancelText!==prevS.cancelText||s.closeText!==prevS.closeText||s.touchUi!==prevS.touchUi){this._buttons=processButtons(this,s.buttons||(s.display!=="inline"&&(s.display!=="anchored"||this._touchUi)?["cancel","set"]:[]));this._live=true;if(this._buttons&&this._buttons.length){for(var _i=0,_a=this._buttons;_i<_a.length;_i++){var b=_a[_i];if(b.name==="ok"||b.name==="set"){this._live=false;}}}}var valueChange=!this._valueEquals(value,this._value);if(valueChange||this._tempValueRep===UNDEFINED||this._shouldValidate(s,prevS)||s.defaultSelection!==prevS.defaultSelection||s.invalid!==prevS.invalid||s.valid!==prevS.valid){this._readValue(value);var newValue_1=this._get(this._tempValueRep);var validationChange_1=!this._valueEquals(value,newValue_1)&&(!this._nullSupport||!isEmpty(value));this._setHeader();clearTimeout(this._handler);this._handler=setTimeout((function(){_this.value=value;if(validationChange_1){_this._change(newValue_1);}if(!_this._valueEquals(_this._tempValue,newValue_1)&&_this._inst===UNDEFINED){_this._hook("onTempChange",{value:newValue_1});}}));}if(s.headerText!==prevS.headerText){this._setHeader();}if(isOpen&&!this._isOpen){if(!this._tempValueSet||this._live){var tempValue=this._get(this._tempValueRep);var parsedValue_1=this._get(this._valueRep);this._tempValueRep=this._copy(this._valueRep);this._tempValueText=this._format(this._tempValueRep);this._tempValue=tempValue;this._setHeader();if(!this._valueEquals(tempValue,parsedValue_1)){setTimeout((function(){_this._hook("onTempChange",{value:parsedValue_1});}));}}this._onOpen();}this._anchorAlign=s.anchorAlign||(this._touchUi?"center":"start");this._cssClass="mbsc-picker "+(s.cssClass||"");this._isOpen=isOpen;this._maxWidth=s.maxWidth;this._valueTextChange=this._valueTextChange||this._oldValueText!==this._valueText;this._oldValueText=this._valueText;this._value=value;this._shouldInitInput=this._shouldInitInput||s.display!==prevS.display||s.element!==prevS.element||s.showOnFocus!==prevS.showOnFocus||s.showOnClick!==prevS.showOnClick;};PickerBase.prototype._updated=function(){var _this=this;var s=this.s;var input=this._input;if(this._shouldInitInput&&!this._inst){this._resetEl(this._prevS.display);this._shouldInitInput=false;var el=s.element||this._el;if(el){if(isIonInput(el)){getIonInput(el,(function(inp){_this._el=inp;_this._initEl();}));}else if(el.vInput){this._el=el.vInput.nativeElement;}else {this._el=el;}}this._initEl();}if(this._valueTextChange&&input){this._write(input);}this._valueTextChange=false;this._anchor=s.anchor||this._focusElm||s.element||this._el;};PickerBase.prototype._writeValue=function(elm,text,value){var oldValue=elm.value;elm.value=text;return oldValue!==text};PickerBase.prototype._destroy=function(){this._resetEl(this.s.display);};PickerBase.prototype._setHeader=function(){var headerText=this.s.headerText;this._headerText=headerText?headerText.replace(/\{value\}/i,this._tempValueText||"&nbsp;"):UNDEFINED;};PickerBase.prototype._setOrUpdate=function(preventChange){var value=this._get(this._tempValueRep);this._tempValue=value;this._tempValueText=this._format(this._tempValueRep);this._setHeader();if(!preventChange){this._hook("onTempChange",{value:value});}if(this._live){this.set();}else {this.forceUpdate();}};PickerBase.prototype._copy=function(value){return value};PickerBase.prototype._format=function(value){return value};PickerBase.prototype._get=function(value){return value};PickerBase.prototype._parse=function(valueText){return valueText};PickerBase.prototype._validate=function(){};PickerBase.prototype._onClosed=function(){};PickerBase.prototype._onOpen=function(){};PickerBase.prototype._onParse=function(){};PickerBase.prototype._onEnterKey=function(args){this.set();this.close();};PickerBase.prototype._change=function(value){if(this.s.value===UNDEFINED){this.setState({value:value});}this._hook("onChange",{value:value,valueText:this._tempValueText});};PickerBase.prototype._readValue=function(value){this._tempValueRep=this._parse(value);this._onParse();this._validate();this._tempValueText=this._format(this._tempValueRep);this._valueRep=this._copy(this._tempValueRep);this._valueText=!isEmpty(value)?this._tempValueText:"";};PickerBase.prototype._initEl=function(){var s=this.s;var el=this._el;if(this._wrapper&&s.display==="inline"){this._observer=resizeObserver(this._wrapper,this._onWrapperResize,this._zone);}if(!el||el.nodeType!==1){return}var isInput=matches(el,"input,select");var input=el;this._win=getWindow(el);if(isInput){this._input=input;this._readOnly=input.readOnly;}if(s.display!=="inline"){if(!this._isMbsc){this._unlisten=gestureListener(el,{click:true});}if((s.showOnClick||s.showOnFocus)&&isInput){input.readOnly=true;}if(s.showOnClick){listen(el,CLICK,this._onInputClick);listen(el,MOUSE_DOWN,this._onInputMouseDown);listen(el,KEY_DOWN,this._onInputKey);}if(s.showOnFocus){listen(this._win,FOCUS,this._onWinFocus);listen(el,FOCUS,this._onInputFocus);}listen(el,CHANGE,this._onInputChange);}if(isInput){this._write(input);}};PickerBase.prototype._resetEl=function(display){if(display!=="inline"){if(this._input){this._input.readOnly=this._readOnly;}if(this._unlisten){this._unlisten();}var el=this._el;if(el){unlisten(el,CLICK,this._onInputClick);unlisten(el,MOUSE_DOWN,this._onInputMouseDown);unlisten(el,KEY_DOWN,this._onInputKey);unlisten(el,FOCUS,this._onInputFocus);unlisten(el,CHANGE,this._onInputChange);unlisten(this._win,FOCUS,this._onWinFocus);}}if(this._observer){this._observer.detach();this._observer=null;}};PickerBase.prototype._write=function(input){var value=this._value;var changed=this._writeValue(input,this._valueText||"",value);if(changed){this._preventChange=true;trigger(input,INPUT);trigger(input,CHANGE);}var mbscInput=input.__mbscFormInst;if(mbscInput){mbscInput.setOptions({pickerMap:this.s.valueMap,pickerValue:value});}};PickerBase.defaults={cancelText:"Cancel",closeText:"Close",okText:"Ok",setText:"Set"};PickerBase=__decorate([core.Directive({selector:"[mbsc-p-b]"})],PickerBase);return PickerBase}(BaseComponent);var modules={};var RANGE_SEPARATOR=" - ";var CALENDAR_CTRL=["calendar"];function notActive(active){return active==="start"?"end":"start"}function getPresetRange(timestamp,s){var date=new Date(timestamp);var firstSelectDay=s.firstSelectDay!==UNDEFINED?s.firstSelectDay:s.firstDay;var start=getFirstDayOfWeek(date,s,firstSelectDay);var end=new Date(start.getFullYear(),start.getMonth(),start.getDate()+s.selectSize-1);return {start:start,end:end}}var DatepickerBase=function(_super){__extends(DatepickerBase,_super);function DatepickerBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._iso={};_this._onActiveChange=function(ev){_this._active=ev.date;_this.forceUpdate();};_this._onResize=function(ev){var viewportWidth=ev.windowWidth;ev.cancel=_this.state.width!==viewportWidth;_this.setState({isLarge:ev.isLarge,maxPopupWidth:ev.maxPopupWidth,width:viewportWidth,widthType:viewportWidth>600?"md":"sm"});};_this._onDayHoverIn=function(_a){var date=_a.date,hidden=_a.hidden;_this.setState({hoverDate:hidden?UNDEFINED:+date});};_this._onDayHoverOut=function(_a){var date=_a.date;if(_this.state.hoverDate===+date){_this.setState({hoverDate:UNDEFINED});}};_this._onCellClick=function(args){_this._lastSelected=new Date(args.date);args.active=_this._activeSelect;_this._hook("onCellClick",args);};_this._onCalendarChange=function(ev){_this._tempValueSet=false;var date=ev.value;var s=_this.s;var isPreset=s.select==="preset-range";var isRange=s.select==="range";var newSelection=isRange&&_this._newSelection;if(_this._hasTime&&_this._selectedTime&&!isRange){if(_this.s.selectMultiple){var lastSelection=date[date.length-1];if(lastSelection){lastSelection.setHours(_this._selectedTime.getHours(),_this._selectedTime.getMinutes());}}else {date.setHours(_this._selectedTime.getHours(),_this._selectedTime.getMinutes());}}if(isRange||isPreset){var oldRangeDate=_this._getDate(_this._tempValueRep).filter((function(v){return v!==null}));var oldRange=oldRangeDate.map((function(dateValue){return +dateValue}));var oldRangeCut_1=oldRangeDate.map((function(v){return +getDateOnly(v)}));var newValue=date.filter((function(v){return oldRangeCut_1.indexOf(+v)<0}))[0];if(isPreset){if(newValue){var _a=getPresetRange(+newValue,s),start=_a.start,end=_a.end;_this._tempValueRep.start=+start;_this._tempValueRep.end=+end;}}else {var cycle=!_this._hasTime;var cycleAndLabels=_this._renderControls;var activeSelect=_this._activeSelect;var notActiveSelect=notActive(activeSelect);if(newValue){if(_this._hasTime&&_this._selectedTime){newValue.setHours(_this._selectedTime.getHours(),_this._selectedTime.getMinutes(),_this._selectedTime.getSeconds(),_this._selectedTime.getMilliseconds());}switch(oldRange.length){case 0:_this._tempValueRep={};_this._tempValueRep[activeSelect]=+newValue;break;case 1:{if(cycleAndLabels){_this._tempValueRep[activeSelect]=+newValue;break}if(oldRange[0]>+newValue||_this._activeSelect==="start"){if(_this._hasTime){_this._tempValueRep[activeSelect]=+newValue;}else {_this._tempValueRep={start:+newValue};cycle=false;}}else {_this._tempValueRep.end=+newValue;}break}case 2:{if(cycleAndLabels){_this._tempValueRep[activeSelect]=+newValue;break}if(oldRange[0]>+newValue||_this._activeSelect==="start"){if(_this._hasTime){_this._tempValueRep[activeSelect]=+newValue;}else {_this._tempValueRep={start:+newValue};if(_this._activeSelect==="end"){cycle=false;}}}else if(_this._activeSelect==="end"){_this._tempValueRep.end=+newValue;}break}}if(cycleAndLabels&&_this._tempValueRep.start&&_this._tempValueRep.end&&_this._tempValueRep.start>_this._tempValueRep.end){_this._tempValueRep={start:+newValue};_this._setActiveSelect("end");}}else {var newDate=void 0;if(oldRange.length===1){newDate=new Date(oldRange[0]);}else {newDate=_this._lastSelected;}if(_this._hasTime&&_this._selectedTime){newDate.setHours(_this._selectedTime.getHours(),_this._selectedTime.getMinutes(),_this._selectedTime.getSeconds(),_this._selectedTime.getMilliseconds());}else if(_this._activeSelect==="end"){newDate.setHours(23,59,59,999);}if(cycleAndLabels||_this._hasTime){_this._tempValueRep[activeSelect]=+newDate;}else if(_this._activeSelect==="start"){_this._tempValueRep={start:+newDate};}else {_this._tempValueRep.end=+newDate;}}var tempValueRep=_this._tempValueRep;if(tempValueRep.start&&tempValueRep.end){if(tempValueRep.start>tempValueRep.end){tempValueRep.end=UNDEFINED;}if(s.minRange&&tempValueRep.end){var newEnd=_this._hasTime?tempValueRep.start+s.minRange:+addDays(new Date(tempValueRep.start),s.minRange-1);if(tempValueRep.end<newEnd&&(!_this._hasTime||activeSelect==="start")){tempValueRep.end=UNDEFINED;}}if(s.maxRange&&tempValueRep.end){var newEnd=_this._hasTime?tempValueRep.start+s.maxRange:+addDays(new Date(tempValueRep.start),s.maxRange)-1;if(tempValueRep.end>newEnd&&(!_this._hasTime||activeSelect==="start")){tempValueRep.end=UNDEFINED;}}if(tempValueRep.end&&activeSelect==="start"&&!s.inRangeInvalid&&s.invalid!==UNDEFINED){var nextInvalid=getNextOccurence(s.invalid,new Date(tempValueRep.start),s);if(nextInvalid!==null&&+nextInvalid<tempValueRep.end){tempValueRep.end=UNDEFINED;}}}if(cycle&&(_this._newSelection||!_this._renderControls||_this._newSelection===UNDEFINED&&_this.s.display==="inline")){_this._setActiveSelect(notActiveSelect);_this._newSelection=false;}}}else {_this._tempValueRep={date:{}};if(_this.s.selectMultiple){for(var _i=0,date_1=date;_i<date_1.length;_i++){var dateVal=date_1[_i];_this._tempValueRep.date[+dateVal]=dateVal;}}else {if(_this._hasTime){var time=_this._selectedTime||new Date;date.setHours(time.getHours(),time.getMinutes(),time.getSeconds(),time.getMilliseconds());}_this._tempValueRep.date[+date]=date;}}_this._setOrUpdate();if(_this._live&&((!_this.s.selectMultiple||isRange)&&!_this._hasTime&&(!isRange||_this._tempValueRep.start&&_this._tempValueRep.end&&!newSelection))){_this.close();}};_this._onDatetimeChange=function(ev){var s=_this.s;var isRange=s.select==="range";var date=_this._hasTime?ev.value:getDateOnly(ev.value);var d=+date;_this._tempValueSet=false;if(isRange){if(_this._activeSelect==="start"){if(_this._hasTime&&_this._selectedTime){date.setHours(_this._selectedTime.getHours(),_this._selectedTime.getMinutes(),_this._selectedTime.getSeconds(),_this._selectedTime.getMilliseconds());}_this._tempValueRep.start=d;if(_this._tempValueRep.end){var minRange=s.minRange&&!_this._hasTime?(s.minRange-1)*24*60*60*1e3-1:s.minRange||0;var range=_this._tempValueRep.end-_this._tempValueRep.start;if(range<minRange){_this._tempValueRep.end=UNDEFINED;}}}else {if(_this._hasTime){if(_this._selectedTime){date.setHours(_this._selectedTime.getHours(),_this._selectedTime.getMinutes(),_this._selectedTime.getSeconds(),_this._selectedTime.getMilliseconds());}}else if(_this._tempValueRep.start===+getDateOnly(date)){date.setHours(23,59,59,999);}_this._tempValueRep.end=+date;}}else {if(_this._hasTime&&_this._hasDate&&s.controls.indexOf("datetime")<0){var time=_this._selectedTime||new Date;date.setHours(time.getHours(),time.getMinutes(),time.getSeconds(),time.getMilliseconds());}else {_this._selectedTime=new Date(date);}_this._tempValueRep={date:{}};_this._tempValueRep.date[+date]=date;}_this._setOrUpdate();};_this._onTimePartChange=function(ev){_this._tempValueSet=false;var isRange=_this.s.select==="range";var date=ev.value;_this._selectedTime=date;if(isRange){var values=_this._getDate(_this._tempValueRep);var valueIndex=_this._activeSelect==="start"?0:1;if(values[valueIndex]){var value=new Date(values[valueIndex]);value.setHours(date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());values[valueIndex]=value;if(_this._activeSelect==="start"&&+value>=+values[1]){values.length=1;}_this._tempValueRep=_this._parse(values);}else {_this._selectedTime.setHours(date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());}}else if(!_this.s.selectMultiple){var value=_this._getDate(_this._tempValueRep);if(value){value.setHours(date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());_this._tempValueRep={date:{}};_this._tempValueRep.date[+value]=value;}else {_this._selectedTime.setHours(date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds());if(_this._live){_this.forceUpdate();}}}_this._setOrUpdate();};_this._changeActiveTab=function(ev){_this.setState({activeTab:ev.target.value});};_this._changeActiveSelect=function(ev){var active=ev.target.value;_this._setActiveSelect(active);_this.setActiveDate(active);};_this._onInputClickRange=function(ev){_this._activateBasedOnInput(ev.target);_this._onInputClick(ev);};_this._onInputKeyRange=function(ev){_this._activateBasedOnInput(ev.target);_this._onInputKey(ev);};_this._onInputFocusRange=function(ev){_this._activateBasedOnInput(ev.target);_this._onInputFocus(ev);};_this._onInputChangeRange=function(ev){var startInput=_this._startInput;var endInput=_this._endInput;var value=(startInput?startInput.value:"")+(endInput&&endInput.value?RANGE_SEPARATOR+endInput.value:"");_this._onInputChange(ev,value);};_this._clearEnd=function(){_this._tempValueRep.end=UNDEFINED;if(_this._hasTimegrid){_this._selectedTime=UNDEFINED;}_this._setOrUpdate();};_this._clearStart=function(){_this._tempValueRep={};_this._newSelection=true;if(_this._hasTimegrid){_this._selectedTime=UNDEFINED;}_this._setOrUpdate();};_this._activateBasedOnInput=function(inp){var activate=inp===_this._startInput||_this._renderControls?"start":"end";_this._setActiveSelect(activate);};_this._proxy=function(args){_this._hook(args.type,args);};return _this}DatepickerBase.prototype.setActiveDate=function(active){var notActiveSelect=notActive(active);this._activeSelect=active;var activeValue=this._tempValueRep[active];var notActiveValue=this._tempValueRep[notActiveSelect];if(this._tempValueRep.start&&this._tempValueRep.end||!activeValue&&notActiveValue){this._newSelection=false;}else if(activeValue&&!notActiveValue){this._newSelection=true;}this._active=activeValue;if(!activeValue&&this._hasTimegrid){this._selectedTime=UNDEFINED;}this.forceUpdate();};DatepickerBase.prototype.getTempVal=function(){return _super.prototype.getTempVal.call(this)};DatepickerBase.prototype.setTempVal=function(value){_super.prototype.setTempVal.call(this,value);};DatepickerBase.prototype.navigate=function(date){this._active=+makeDate(date);this.forceUpdate();};DatepickerBase.prototype._shouldValidate=function(s,prevS){return s.controls!==prevS.controls||s.dateFormat!==prevS.dateFormat||s.timeFormat!==prevS.timeFormat||s.locale!==prevS.locale||s.min!==prevS.min||s.max!==prevS.max};DatepickerBase.prototype._valueEquals=function(v1,v2){var side1=isArray(v1)&&v1.length===0||v1===UNDEFINED||v1===null;var side2=isArray(v2)&&v2.length===0||v2===UNDEFINED||v2===null;return side1&&side1===side2||dateValueEquals(v1,v2,this.s)};DatepickerBase.prototype._init=function(){if(this.props.modules){this.props.modules.forEach((function(module){modules[module._name]=module;}));}};DatepickerBase.prototype._render=function(s,state){var _this=this;if(s.inRangeInvalid){s.rangeEndInvalid=false;}if(s.select==="preset-range"){s.controls=CALENDAR_CTRL;}var prevS=this._prevS;s.buttons;var calendarSize=s.calendarSize;s.children;s.className;var controls=s.controls;s.cssClass;s.element;s.onDestroy;s.onInit;s.onTempChange;s.responsive;var select=s.select,selectMultiple=s.selectMultiple,tabs=s.tabs,other=__rest(s,["buttons","calendarSize","children","className","controls","cssClass","element","onDestroy","onInit","onTempChange","responsive","select","selectMultiple","tabs"]);var widthType=state.widthType||"sm";var isRange=select!=="date";this._renderTabs=controls.length>1&&(tabs==="auto"?widthType==="sm":tabs);if(select!==prevS.select&&this._tempValueRep){if(isRange&&this._tempValueRep.date){var _a=Object.keys(this._tempValueRep.date).map((function(v){return +v})).sort(),start=_a[0],end=_a[1];this._tempValueRep.start=start;this._tempValueRep.end=end;this._tempValueRep.date=UNDEFINED;this._tempValueText=this._format(this._tempValueRep);setTimeout((function(){_this.set();}));}else if(!isRange&&(this._tempValueRep.start||this._tempValueRep.end)){if(!this._tempValueRep.date){this._tempValueRep.date={};}var first=this._tempValueRep.start||this._tempValueRep.end;this._tempValueRep.date[first]=new Date(first);var second=this._tempValueRep.end||this._tempValueRep.start;if(second!==first&&s.selectMultiple){this._tempValueRep.date[second]=new Date(second);}this._tempValueRep.start=UNDEFINED;this._tempValueRep.end=UNDEFINED;this._tempValueText=this._format(this._tempValueRep);setTimeout((function(){_this.set();}));}}if(s.min!==prevS.min){this._min=isEmpty(s.min)?UNDEFINED:makeDate(s.min,s,s.dateFormat);}if(s.max!==prevS.max){this._max=isEmpty(s.max)?UNDEFINED:makeDate(s.max,s,s.dateFormat);}if(s.minTime!==prevS.minTime){this._minTime=isEmpty(s.minTime)?UNDEFINED:makeDate(s.minTime,s,s.timeFormat);}if(s.maxTime!==prevS.maxTime){this._maxTime=isEmpty(s.maxTime)?UNDEFINED:makeDate(s.maxTime,s,s.timeFormat);}if(controls!==prevS.controls){this._controls=[];this._hasCalendar=false;this._hasDate=false;this._hasTime=false;this._hasTimegrid=false;this._controlsClass="";for(var _i=0,_b=controls;_i<_b.length;_i++){var control=_b[_i];if(control==="time"||control==="datetime"){this._hasTime=true;}if(control==="timegrid"){this._hasTime=true;this._hasTimegrid=true;}if(control==="calendar"||control==="date"||control==="datetime"){this._hasDate=true;}if(control==="calendar"){this._hasCalendar=true;}this._controls.push({Component:modules[control==="calendar"?"Calendar":control==="timegrid"?"Timegrid":"Datetime"],name:control,title:control==="time"||control==="timegrid"?s.timeText:s.dateText});this._controlsClass+=" mbsc-datepicker-control-"+control;}if(!this._hasTime){this._selectedTime=UNDEFINED;}}this._renderControls=isRange&&select!=="preset-range"&&(s.showRangeLabels!==UNDEFINED?s.showRangeLabels:true);this._nullSupport=s.display!=="inline"||select!=="date"||s.selectMultiple===true;var format="";if(this._hasDate){format+=s.dateFormat;}if(this._hasTime){format+=(this._hasDate?s.separator:"")+s.timeFormat;}this._valueFormat=format;this._activeTab=state.activeTab||s.controls[0];_super.prototype._render.call(this,s,state);if(s.headerText!==prevS.headerText||s.selectCounter!==prevS.selectCounter||s.selectMultiple!==prevS.selectMultiple){this._setHeader();}this._scrollLock=s.scrollLock!==UNDEFINED?s.scrollLock:!this._hasTimegrid;this._showInput=s.showInput!==UNDEFINED?s.showInput:this._showInput&&(!isRange||!s.startInput&&!s.endInput);this._shouldInitInputs=this._shouldInitInputs||select!==prevS.select||s.startInput!==prevS.startInput||s.endInput!==prevS.endInput||s.showOnClick!==prevS.showOnClick||s.showOnFocus!==prevS.showOnFocus;this._shouldInitInput=this._shouldInitInput||this._shouldInitInputs;if(controls!==prevS.controls||s.dateWheels!==prevS.dateWheels||s.timeWheels!==prevS.timeWheels||s.dateFormat!==prevS.dateFormat||s.timeFormat!==prevS.timeFormat){var dateParts=s.dateWheels||s.dateFormat;var timeParts=s.timeWheels||s.timeFormat;var isoParts=this._iso={};if(this._hasDate){if(/y/i.test(dateParts)){isoParts.y=1;}if(/M/.test(dateParts)){isoParts.y=1;isoParts.m=1;}if(/d/i.test(dateParts)){isoParts.y=1;isoParts.m=1;isoParts.d=1;}}if(this._hasTime){if(/h/i.test(timeParts)){isoParts.h=1;}if(/m/.test(timeParts)){isoParts.i=1;}if(/s/i.test(timeParts)){isoParts.s=1;}}}var setButtonDisabled;if(isRange){if(this._activeSelect===UNDEFINED){this._setActiveSelect("start",true);}setButtonDisabled=this._selectionNotReady();}else {this._activeSelect=UNDEFINED;setButtonDisabled=false;}if(this._buttons){var setBtn=find(this._buttons,(function(btn){return btn.name==="set"}));if(setBtn&&setBtn.disabled!==setButtonDisabled){setBtn.disabled=setButtonDisabled;this._buttons=this._buttons.slice();}}var activeSelect=this._activeSelect;this._needsWidth=(s.display==="anchored"||s.display==="center"||s.display!=="inline"&&state.isLarge||controls.length>1&&!tabs)&&s.width===UNDEFINED;var maxDate=s.max!==UNDEFINED?makeDate(s.max,s,format):UNDEFINED;var minDate=s.min!==UNDEFINED?makeDate(s.min,s,format):UNDEFINED;this._maxLimited=maxDate;this._minLimited=minDate;var selectedStart=this._tempValueRep.start;if(selectedStart){var startDate=new Date(this._tempValueRep.start);this._nextInvalid=this._prevStart!==this._tempValueRep.start||prevS.invalid!==s.invalid?getNextOccurence(s.invalid||[],startDate,s):this._nextInvalid;}var endSelection=activeSelect==="end"&&selectedStart;if(endSelection){if(!s.inRangeInvalid){var nextInvalid=this._nextInvalid;if(nextInvalid){if(s.rangeEndInvalid){this._maxLimited=new Date(+addDays(nextInvalid,1)-1);}else {this._maxLimited=new Date(+nextInvalid-1);}}}if(!this._hasCalendar||this._hasTime){if(!this._minLimited||makeDate(this._minLimited,s,format)<new Date(selectedStart)){this._minLimited=new Date(this._tempValueRep.start);}}}this._minTimeLimited=this._minLimited;if(endSelection){if(s.minRange){var minLimited=this._hasTime?this._tempValueRep.start+s.minRange:+addDays(new Date(this._tempValueRep.start),s.minRange)-1;if(!this._minLimited||+makeDate(this._minLimited,s,format)<minLimited){this._minLimited=new Date(minLimited);this._minTimeLimited=this._minLimited;}}if(this._minTimeLimited===UNDEFINED&&this._tempValueRep.start&&this._tempValueRep.end){this._minTimeLimited=new Date(+this._tempValueRep.start);}if(s.maxRange!==UNDEFINED){var maxLimited=this._hasTime?this._tempValueRep.start+s.maxRange:+addDays(new Date(this._tempValueRep.start),s.maxRange)-1;if(!this._maxLimited||+makeDate(this._maxLimited,s,format)>maxLimited){this._maxLimited=new Date(maxLimited);}}}for(var _c=0,_d=this._controls;_c<_d.length;_c++){var control=_d[_c];var options=__assign({},other,{display:"inline",max:this._maxLimited,min:this._minLimited});if(s.rangeEndInvalid&&endSelection&&this._nextInvalid){options.valid=(options.valid||[]).concat([this._nextInvalid]);}if(control.name==="calendar"){options.min=this._minLimited?getDateOnly(this._minLimited):UNDEFINED;options.max=this._maxLimited?getDateOnly(this._maxLimited):UNDEFINED;options.selectRange=isRange;options.width=this._needsWidth?PAGE_WIDTH*getPageNr(s.pages,state.maxPopupWidth):UNDEFINED;if(s.calendarType==="week"&&calendarSize){options.weeks=calendarSize;}else {options.size=calendarSize;}var pages=s.pages==="auto"?3:s.pages||1;this._maxWidth=s.maxWidth||(pages>2?PAGE_WIDTH*pages:UNDEFINED);if(isRange){var valueDate=this._getDate(this._tempValueRep);var values=valueDate.filter((function(v){return v!==null})).map((function(v){return +getDateOnly(v)})).filter((function(v,ind,arr){return arr.indexOf(v)===ind})).map((function(v){return new Date(v)}));options.value=values;if(s.rangeHighlight){options.rangeStart=valueDate[0]&&+getDateOnly(valueDate[0]);options.rangeEnd=valueDate[1]&&+getDateOnly(valueDate[1]);options.onDayHoverIn=this._onDayHoverIn;options.onDayHoverOut=this._onDayHoverOut;if(select==="preset-range"){if(state.hoverDate){var _e=getPresetRange(state.hoverDate,s),start=_e.start,end=_e.end;options.hoverStart=+start;options.hoverEnd=+end;}}else {if(activeSelect==="end"&&valueDate[0]){options.hoverStart=options.rangeEnd||options.rangeStart;options.hoverEnd=state.hoverDate;}if(activeSelect==="start"&&valueDate[1]&&this._renderControls){options.hoverStart=state.hoverDate;options.hoverEnd=options.rangeStart||options.rangeEnd;}}}}else {options.selectMultiple=selectMultiple;options.value=this._getDate(this._tempValueRep);}var vals=isArray(options.value)?options.value:[options.value];var min=options.min?+options.min:-Infinity;var max=options.max?+options.max:Infinity;var selected=void 0;for(var _f=0,vals_1=vals;_f<vals_1.length;_f++){var val=vals_1[_f];if(!selected&&val>=min&&val<=max){selected=+val;}}if(selected!==this._selectedDate||this._active===UNDEFINED||s.min!==prevS.min||s.max!==prevS.max){this._selectedDate=selected;this._active=constrain(selected?+getDateOnly(new Date(selected)):this._active||+getDateOnly(new Date),min,max);}var viewFormat=s.dateWheels||s.dateFormat;var selectedView=/d/i.test(viewFormat)?MONTH_VIEW:/m/i.test(viewFormat)?YEAR_VIEW:/y/i.test(viewFormat)?MULTI_YEAR_VIEW:MONTH_VIEW;options.active=this._active;options.onActiveChange=this._onActiveChange;options.onChange=this._onCalendarChange;options.onCellClick=this._onCellClick;options.onCellHoverIn=this._proxy;options.onCellHoverOut=this._proxy;options.onLabelClick=this._proxy;options.onPageChange=this._proxy;options.onPageLoaded=this._proxy;options.onPageLoading=this._proxy;options.selectView=selectedView;}else {var tempValueKeys=Object.keys(this._tempValueRep.date||{});options.displayStyle=(s.display==="bottom"||s.display==="top")&&(this._hasCalendar||this._renderTabs)?"center":s.display;options.mode=control.name;if((control.name==="time"||control.name==="timegrid")&&this._hasDate){options.onChange=this._onTimePartChange;if(isRange){var alreadySelectedOne=this._tempValueRep[activeSelect];var selectedTime=void 0;if(this._selectedTime){if(!this._minTimeLimited||this._selectedTime>this._minTimeLimited){selectedTime=this._selectedTime;}else {selectedTime=new Date(this._minTimeLimited);selectedTime.setHours(this._selectedTime.getHours(),this._selectedTime.getMinutes(),this._selectedTime.getSeconds(),this._selectedTime.getMilliseconds());}}this._selectedTime=alreadySelectedOne?new Date(alreadySelectedOne):selectedTime||(control.name==="time"?new Date:UNDEFINED);options.value=this._selectedTime;}else if(!s.selectMultiple){var alreadyDate=this._tempValueRep.date&&this._tempValueRep.date[tempValueKeys[0]]||this._selectedTime||null;options.value=alreadyDate;}options.min=this._minTimeLimited;options.max=this._maxLimited;}else {options.onChange=this._onDatetimeChange;if(isRange){var n=this._tempValueRep[activeSelect];var m=this._tempValueRep[notActive(activeSelect)];options.value=n?new Date(n):m?new Date(m):null;}else {var value=this._tempValueRep.date&&this._tempValueRep.date[tempValueKeys[0]];var passed=value;if(value){if(!this._hasTime){passed=getDateOnly(value);}}options.value=passed||null;}}if(control.name==="time"||control.name==="timegrid"){var selectedOrDefault=options.value||constrainDate(new Date,options.min,options.max);if(this._minTime){var minTime=new Date(this._minTime);var min=new Date(selectedOrDefault.getFullYear(),selectedOrDefault.getMonth(),selectedOrDefault.getDate(),minTime.getHours(),minTime.getMinutes(),minTime.getSeconds(),minTime.getMilliseconds());if(!options.min||min>options.min){options.min=min;}}if(this._maxTime){var maxTime=new Date(this._maxTime);var max=new Date(selectedOrDefault.getFullYear(),selectedOrDefault.getMonth(),selectedOrDefault.getDate(),maxTime.getHours(),maxTime.getMinutes(),maxTime.getSeconds(),maxTime.getMilliseconds());if(!options.max||max<options.max){options.max=max;}}}}control.options=options;}this._prevStart=this._tempValueRep.start;};DatepickerBase.prototype._updated=function(){var s=this.s;if(this._shouldInitInputs){this._clearInputHandlers(this._startInput,this._startInputReadOnly);this._clearInputHandlers(this._endInput,this._endInputReadOnly);if(s.select==="range"){var startInput=s.startInput;if(startInput){this._setupInput("start",startInput);}var endInput=s.endInput;if(endInput){this._setupInput("end",endInput);}if(s.element&&(this._startInput===s.element||this._endInput===s.element)){this._shouldInitInput=false;clearTimeout(s.element.__mbscTimer);}}this._shouldInitInputs=false;}var valueTextChange=this._valueTextChange;_super.prototype._updated.call(this);if(s.select==="range"){if(this._startInput&&valueTextChange){this._startInput.value=this._getValueText("start");this._preventChange=true;trigger(this._startInput,INPUT);trigger(this._startInput,CHANGE);}if(this._endInput&&valueTextChange){this._endInput.value=this._getValueText("end");this._preventChange=true;trigger(this._endInput,INPUT);trigger(this._endInput,CHANGE);}}};DatepickerBase.prototype._onEnterKey=function(args){if(!this._selectionNotReady()){_super.prototype._onEnterKey.call(this,args);}};DatepickerBase.prototype._setupInput=function(i,input){var _this=this;var setInput=function(inp){if(!_this._win){_this._win=getWindow(inp);}inp.value=_this._getValueText(i);trigger(inp,INPUT);trigger(inp,CHANGE);_this._setupInputHandlers(inp);if(i==="start"){_this._startInput=inp;_this._startInputReadOnly=inp.readOnly;}else {_this._endInput=inp;_this._endInputReadOnly=inp.readOnly;}if(_this.s.showOnClick||_this.s.showOnFocus){inp.readOnly=true;}};if(input){if(isIonInput(input)){getIonInput(input,setInput);}else if(input.vInput){setInput(input.vInput.nativeElement);}else if(input._el){setInput(input._el);}else if(input.nodeType===1){setInput(input);}else if(isString(input)){var inputElement=doc.querySelector(input);if(inputElement){setInput(inputElement);}}}};DatepickerBase.prototype._destroy=function(){this._clearInputHandlers(this._startInput,this._startInputReadOnly);this._clearInputHandlers(this._endInput,this._endInputReadOnly);};DatepickerBase.prototype._setupInputHandlers=function(el){if(this.s.showOnClick){listen(el,CLICK,this._onInputClickRange);listen(el,MOUSE_DOWN,this._onInputMouseDown);listen(el,KEY_DOWN,this._onInputKeyRange);}if(this.s.showOnFocus){listen(el,FOCUS,this._onInputFocusRange);listen(getWindow(el),FOCUS,this._onWinFocus);}listen(el,CHANGE,this._onInputChangeRange);};DatepickerBase.prototype._clearInputHandlers=function(el,readOnly){if(el){el.readOnly=readOnly;unlisten(el,CLICK,this._onInputClickRange);unlisten(el,MOUSE_DOWN,this._onInputMouseDown);unlisten(el,KEY_DOWN,this._onInputKeyRange);unlisten(el,FOCUS,this._onInputFocusRange);unlisten(el,CHANGE,this._onInputChangeRange);unlisten(getWindow(el),FOCUS,this._onWinFocus);}};DatepickerBase.prototype._setHeader=function(){var s=this.s;if(s.selectCounter&&s.selectMultiple){var count=Object.keys(this._tempValueRep&&this._tempValueRep.date||{}).length;this._headerText=(count>1?s.selectedPluralText||s.selectedText:s.selectedText).replace(/{count}/,""+count);}else {_super.prototype._setHeader.call(this);}};DatepickerBase.prototype._validate=function(){if(this._max<=this._min){return}var s=this.s;var min=this._min?+this._min:-Infinity;var max=this._max?+this._max:Infinity;if(s.select==="date"){var values=this._tempValueRep.date;if(!s.selectMultiple){for(var _i=0,_a=Object.keys(values);_i<_a.length;_i++){var key=_a[_i];var d=values[key];var validated=getClosestValidDate(d,s,min,max);if(+validated!==+d){delete values[key];values[+getDateOnly(validated)]=validated;}}}}else {var range=this._getDate(this._tempValueRep);var startDate=range[0],endDate=range[1];if(startDate){startDate=getClosestValidDate(startDate,s,min,max);if(!s.inRangeInvalid&&(!this._prevStart||this._prevStart!==+startDate)){this._nextInvalid=getNextOccurence(s.invalid||[],startDate,s);}}if(endDate){if(!s.inRangeInvalid&&this._nextInvalid&&this._nextInvalid<=endDate){endDate=s.rangeEndInvalid?this._nextInvalid:addDays(this._nextInvalid,-1);}else {endDate=getClosestValidDate(endDate,s,min,max);}}if(startDate&&endDate&&startDate>endDate){if(this._activeSelect==="end"){startDate=endDate;}else {endDate=startDate;}}if(startDate){this._prevStart=this._tempValueRep.start=+startDate;}if(endDate){this._tempValueRep.end=+endDate;}}};DatepickerBase.prototype._copy=function(value){return __assign({},value)};DatepickerBase.prototype._format=function(valueRep){var s=this.s;var ret=[];if(!s){return ""}if(s.select==="date"){var vRep=valueRep.date;for(var i in vRep){if(vRep[i]!==UNDEFINED&&vRep[i]!==null){ret.push(formatDate(this._valueFormat,vRep[i],s));}}return s.selectMultiple?ret.join(", "):ret[0]}else {if(valueRep.start){ret.push(formatDate(this._valueFormat,new Date(valueRep.start),s));}if(valueRep.end){if(!ret.length){ret.push("");}ret.push(formatDate(this._valueFormat,new Date(valueRep.end),s));}this._tempStartText=ret[0]||"";this._tempEndText=ret[1]||"";return ret.join(RANGE_SEPARATOR)}};DatepickerBase.prototype._parse=function(value){var s=this.s;var ret={};var isRange=s.select==="range";var isMultiple=s.selectMultiple;var values=[];if(isEmpty(value)){var def=s.defaultSelection;value=isMultiple||isRange?def:def===null||this._live&&s.display!=="inline"?null:def||new Date;}if(isString(value)&&(isRange||isMultiple)){values=value.split(isRange?RANGE_SEPARATOR:",");}else if(isArray(value)){values=value;}else if(value&&!isArray(value)){values=[value];}if(isRange){var start=values[0],end=values[1];var startDate=makeDate(start,s,this._valueFormat,this._iso);var endDate=makeDate(end,s,this._valueFormat,this._iso);ret.start=startDate?+startDate:UNDEFINED;ret.end=endDate?+endDate:UNDEFINED;}else {ret.date={};for(var _i=0,values_1=values;_i<values_1.length;_i++){var val=values_1[_i];if(val!==null&&val!==""){var date=makeDate(val,s,this._valueFormat,this._iso);var key=+getDateOnly(date);ret.date[key]=date;if(this._hasTime){this._selectedTime=new Date(date);}}}}return ret};DatepickerBase.prototype._getDate=function(value){var s=this.s;var isRange=s.select!=="date";if(isRange){var start=value.start?new Date(value.start):null;var end=value.end?new Date(value.end):null;if(!start&&!end){return []}return [start,end]}if(s.selectMultiple){var valueArray=[];var dates=value.date;if(dates){for(var _i=0,_a=Object.keys(dates);_i<_a.length;_i++){var v=_a[_i];valueArray.push(new Date(+v));}}return valueArray}var valueKeys=Object.keys(value.date||{});if(!valueKeys.length){return null}return new Date(value.date[valueKeys[0]])};DatepickerBase.prototype._get=function(value){var s=this.s;var valueFormat=this._valueFormat;var isoParts=this._iso;var valueDate=this._getDate(value);if(isArray(valueDate)){return valueDate.map((function(date){return date?returnDate(date,s,valueFormat,isoParts):null}))}else if(valueDate===null){return null}else {return returnDate(valueDate,s,valueFormat,isoParts)}};DatepickerBase.prototype._onClosed=function(){this._active=this._activeSelect=UNDEFINED;if(this._hasTimegrid){this._selectedTime=UNDEFINED;}};DatepickerBase.prototype._onOpen=function(){this._newSelection=true;};DatepickerBase.prototype._getValueText=function(input){return this._valueText.split(RANGE_SEPARATOR)[input==="start"?0:1]||""};DatepickerBase.prototype._selectionNotReady=function(){var notReady=false;if(this.s.select==="range"){var val=(this._get(this._tempValueRep||{})||[]).filter((function(v){return v}));notReady=!val.length;if(!notReady){if(this._hasCalendar&&!this._hasTime){notReady=val.length<2;}else {if(this._renderControls){notReady=val.length<2;}else {notReady=!this._tempValueRep[this._activeSelect];}}}}return notReady};DatepickerBase.prototype._setActiveSelect=function(active,timeout){var _this=this;if(this._activeSelect!==active){if(timeout){setTimeout((function(){return _this._hook("onActiveDateChange",{active:active})}));}else {this._hook("onActiveDateChange",{active:active});}}this._activeSelect=active;};DatepickerBase.defaults=__assign({},dateTimeLocale,PickerBase.defaults,{controls:CALENDAR_CTRL,dateText:"Date",inRangeInvalid:false,rangeEndHelp:"Please select",rangeEndLabel:"End",rangeHighlight:true,rangeStartHelp:"Please select",rangeStartLabel:"Start",select:"date",selectSize:7,selectedText:"{count} selected",showOnClick:true,timeText:"Time"});DatepickerBase._name="Datepicker";DatepickerBase=__decorate([core.Directive({selector:"[mbsc-dp-b]"})],DatepickerBase);return DatepickerBase}(PickerBase);var MbscPickerModule=function(){function MbscPickerModule(){}MbscPickerModule=__decorate([core.NgModule({declarations:[PickerBase],exports:[],imports:[common.CommonModule]})],MbscPickerModule);return MbscPickerModule}();var CalendarBase=function(_super){__extends(CalendarBase,_super);function CalendarBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onDayClick=function(args){var s=_this.s;var date=args.date;var d=+date;if(args.disabled){return}if(s.selectMultiple){var tempValueRep=_this._tempValueRep;if(tempValueRep[d]){delete tempValueRep[d];}else if(s.selectMax!==UNDEFINED?Object.keys(tempValueRep).length<s.selectMax:true){tempValueRep[d]=date;}_this._tempValueRep=__assign({},tempValueRep);}else {if(!s.selectRange){_this._tempValueRep={};}_this._tempValueRep[d]=date;}_this._hook("onCellClick",args);_this._setOrUpdate();};_this._onTodayClick=function(){var date=new Date;var d=+date;if(!_this.s.selectRange&&!_this.s.selectMultiple){_this._tempValueRep={};_this._tempValueRep[d]=date;_this._setOrUpdate();}};return _this}CalendarBase.prototype._valueEquals=function(v1,v2){return dateValueEquals(v1,v2,this.s)};CalendarBase.prototype._copy=function(value){return __assign({},value)};CalendarBase.prototype._format=function(value){var s=this.s;var ret=[];for(var i in value){if(value[i]!==UNDEFINED&&value[i]!==null){ret.push(formatDate(s.dateFormat,new Date(+value[i]),s));}}return s.selectMultiple||s.selectRange?ret.join(", "):ret[0]};CalendarBase.prototype._parse=function(value){var s=this.s;var isRange=s.selectRange;var ret={};var values=[];if(isString(value)){values=value.split(",");}else if(isArray(value)){values=value;}else if(value&&!isArray(value)){values=[value];}for(var _i=0,values_1=values;_i<values_1.length;_i++){var val=values_1[_i];if(val!==null){var date=makeDate(val,s,s.dateFormat);var key=isRange?+date:+getDateOnly(date);ret[key]=date;}}return ret};CalendarBase.prototype._get=function(value){var isRange=this.s.selectRange;if(this.s.selectMultiple||isRange){var valueArray=[];for(var _i=0,_a=Object.keys(value);_i<_a.length;_i++){var v=_a[_i];valueArray.push(new Date(+value[v]));}return valueArray}var valueKeys=Object.keys(value||{});if(!valueKeys.length){return null}return new Date(value[valueKeys[0]])};CalendarBase.defaults=__assign({},calendarViewDefaults,{calendarScroll:"horizontal",calendarType:"month",selectedText:"{count} selected",showControls:true,showOnClick:true,weeks:1});CalendarBase._name="Calendar";CalendarBase=__decorate([core.Directive({selector:"[mbsc-sc-b]"})],CalendarBase);return CalendarBase}(PickerBase);var MbscCalendar=function(_super){__extends(MbscCalendar,_super);function MbscCalendar(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._hours=ARRAY24;_this.onCancel=new core.EventEmitter;_this.onChange=new core.EventEmitter;_this.onClose=new core.EventEmitter;_this.onOpen=new core.EventEmitter;return _this}Object.defineProperty(MbscCalendar.prototype,"vCal",{set:function(cal){this._calendarView=cal;},enumerable:true,configurable:true});MbscCalendar.prototype._ctor=function(){this._instanceService=this._injector.get(MbscInstanceService);};MbscCalendar.prototype._mounted=function(){this._instanceService.instance=this;_super.prototype._mounted.call(this);};__decorate([core.ViewChild("cal",{static:false}),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],MbscCalendar.prototype,"vCal",null);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscCalendar.prototype,"onCancel",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscCalendar.prototype,"onChange",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscCalendar.prototype,"onClose",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscCalendar.prototype,"onOpen",void 0);MbscCalendar=__decorate([FormControl,core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-calendar",template:'\n    <mbsc-calendar-view #cal\n      [activeDate]="s.active"\n      [cssClass]="_className + \' mbsc-flex-1-1 mbsc-flex-b-auto mbsc-calendar-\' + s.display"\n      [calendarScroll]="s.calendarScroll"\n      [calendarType]="s.calendarType"\n      [colors]="s.colors"\n      [context]="s.context"\n      [dayTemplate]="s.dayTemplate"\n      [dayContentTemplate]="s.dayContentTemplate"\n      [downIcon]="s.downIcon"\n      [headerTemplate]="s.calendarHeaderTemplate"\n      [hoverEnd]="s.hoverEnd"\n      [hoverStart]="s.hoverStart"\n      [invalid]="s.invalid"\n      [instanceService]="_instanceService"\n      [isPicker]="true"\n      [labels]="s.labels"\n      [marked]="s.marked"\n      [max]="s.max"\n      [min]="s.min"\n      [mousewheel]="s.mousewheel"\n      [nextIconH]="s.nextIconH"\n      [nextIconV]="s.nextIconV"\n      [noOuterChange]="s.selectRange"\n      [onActiveChange]="s.onActiveChange"\n      [onCellHoverIn]="s.onCellHoverIn"\n      [onCellHoverOut]="s.onCellHoverOut"\n      [onDayClick]="_onDayClick"\n      [onDayHoverIn]="s.onDayHoverIn"\n      [onDayHoverOut]="s.onDayHoverOut"\n      [onLabelClick]="s.onLabelClick"\n      [onPageChange]="s.onPageChange"\n      [onPageLoaded]="s.onPageLoaded"\n      [onPageLoading]="s.onPageLoading"\n      [onTodayClick]="_onTodayClick"\n      [prevIconH]="s.prevIconH"\n      [prevIconV]="s.prevIconV"\n      [pages]="s.pages"\n      [rangeEnd]="s.rangeEnd"\n      [rangeStart]="s.rangeStart"\n      [rtl]="s.rtl"\n      [selectedDates]="_tempValueRep"\n      [selectView]="s.selectView"\n      [showCalendar]="true"\n      [showControls]="s.showControls"\n      [showOuterDays]="s.showOuterDays"\n      [showToday]="false"\n      [showWeekNumbers]="s.showWeekNumbers"\n      [size]="s.size"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n      [upIcon]="s.upIcon"\n      [valid]="s.valid"\n      [weeks]="s.weeks"\n      [width]="s.width"\n      [getDate]="s.getDate"\n      [getDay]="s.getDay"\n      [getMaxDayOfMonth]="s.getMaxDayOfMonth"\n      [getMonth]="s.getMonth"\n      [getWeekNumber]="s.getWeekNumber"\n      [getYear]="s.getYear"\n      [dateFormat]="s.dateFormat"\n      [dayNames]="s.dayNames"\n      [dayNamesMin]="s.dayNamesMin"\n      [dayNamesShort]="s.dayNamesShort"\n      [eventText]="s.eventText"\n      [eventsText]="s.eventsText"\n      [firstDay]="s.firstDay"\n      [monthNames]="s.monthNames"\n      [monthNamesShort]="s.monthNamesShort"\n      [moreEventsPluralText]="s.moreEventsPluralText"\n      [moreEventsText]="s.moreEventsText"\n      [todayText]="s.todayText"\n      [yearSuffix]="s.yearSuffix"\n    >\n    </mbsc-calendar-view>\n  '})],MbscCalendar);return MbscCalendar}(CalendarBase);var MbscCalendarModule=function(){function MbscCalendarModule(){}MbscCalendarModule=__decorate([core.NgModule({declarations:[CalendarBase,MbscCalendar],entryComponents:[MbscCalendar],exports:[MbscCalendar],imports:[common.CommonModule,MbscCalendarViewModule]})],MbscCalendarModule);return MbscCalendarModule}();function getPickerTemplate(content){return '\n    <mbsc-input *ngIf="_showInput" #input\n      [dropdown]="dropdown"\n      [disabled]="disabled"\n      [endIcon]="endIcon"\n      [endIconSrc]="endIconSrc"\n      [endIconSvg]="endIconSvg"\n      [error]="error"\n      [errorMessage]="errorMessage"\n      [inputStyle]="s.inputStyle"\n      [label]="label"\n      [labelStyle]="s.labelStyle"\n      [placeholder]="placeholder"\n      [name]="name"\n      [pickerMap]="s.valueMap"\n      [pickerValue]="_value"\n      [rtl]="s.rtl"\n      [startIcon]="startIcon"\n      [startIconSrc]="startIconSrc"\n      [startIconSvg]="startIconSvg"\n      [tags]="s.tagInput === undefined ? s.selectMultiple : s.tagInput"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n      [value]="(_value != null && _valueText) || \'\'"\n    >\n      <ng-content></ng-content>\n    </mbsc-input>\n    <mbsc-popup #popup\n      [activeElm]="s.activeElm"\n      [anchor]="_anchor"\n      [anchorAlign]="_anchorAlign"\n      [animation]="s.animation"\n      [buttons]="_buttons"\n      [cancelText]="s.cancelText"\n      [closeOnEsc]="s.closeOnEsc"\n      [closeOnOverlayClick]="s.closeOnOverlayClick"\n      [closeOnScroll]="s.closeOnScroll"\n      [closeText]="s.closeText"\n      [contentPadding]="false"\n      [context]="s.context"\n      [cssClass]="_cssClass"\n      [disableLeftRight]="true"\n      [display]="s.display"\n      [focusElm]="_focusElm"\n      [focusOnClose]="s.focusOnClose"\n      [focusTrap]="s.focusTrap"\n      [fullScreen]="s.fullScreen"\n      [headerText]="_headerText"\n      [height]="s.height"\n      [isOpen]="_isOpen"\n      [maxHeight]="s.maxHeight"\n      [maxWidth]="_maxWidth"\n      [setText]="s.setText"\n      [showArrow]="s.showArrow"\n      [showOverlay]="s.showOverlay"\n      [rtl]="s.rtl"\n      [scrollLock]="_scrollLock"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n      [touchUi]="_touchUi"\n      [windowWidth]="state.width"\n      [width]="s.width"\n      (onClose)="_onPopupClose($event)"\n      (onClosed)="_onPopupClosed($event)"\n      (onKeyDown)="_onPopupKey($event)"\n      (onOpen)="_onPopupOpen($event)"\n      (onResize)="_onResize($event)"\n    >\n      '+content+"\n    </mbsc-popup>"}function getValid(wheel,val,disabled,direction){var min=wheel.min===UNDEFINED?-Infinity:wheel.min;var max=wheel.max===UNDEFINED?Infinity:wheel.max;var index=getIndex(wheel,val);var value=getValue(wheel,index);var counter;var value1=value;var value2=value;var dist1=0;var dist2=0;if(disabled&&disabled.get(value)){counter=0;while(index-dist1>=min&&disabled.get(value1)&&counter<100){counter++;dist1++;value1=getValue(wheel,index-dist1);}counter=0;while(index+dist2<max&&disabled.get(value2)&&counter<100){counter++;dist2++;value2=getValue(wheel,index+dist2);}if((dist2<dist1&&dist2&&direction!==-1||!dist1||index-dist1<0||direction===1)&&!disabled.get(value2)){value=value2;}else {value=value1;}}return value}function getItemValue(item){return item!==UNDEFINED?item.value!==UNDEFINED?item.value:item.display!==UNDEFINED?item.display:item:item}function getItem$1(wheel,index){if(wheel.getItem){return wheel.getItem(index)}var data=wheel.data||[];var len=data.length;var i=index%len;return wheel._circular?data[i>=0?i:i+len]:data[constrain(index,0,len-1)]}function getIndex(wheel,value){var val=wheel.multiple?value&&value.length&&value[0]||UNDEFINED:value;return (wheel.getIndex?+wheel.getIndex(value):wheel._map.get(val))||0}function getFirstIndex(wheel,index){if(wheel.getItem&&wheel.getIndex){return wheel.getIndex(getItemValue(wheel.getItem(index)))}var data=wheel.data||[];var len=data.length;var i=index%len;return !len?0:i>=0?i:i+len}function getValue(wheel,index){return getItemValue(getItem$1(wheel,index))}var ScrollerBase=function(_super){__extends(ScrollerBase,_super);function ScrollerBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._indexes=[];_this._activeIndexes=[];_this._wheels=[];_this._batches=[];_this._lastIndexes=[];_this._onSet=function(){_this._setOrUpdate();};_this._onActiveChange=function(_a){var wheel=_a.wheel,index=_a.index;var wheelIndex=wheel._key;_this._activeIndexes[wheelIndex]=index;var indexes=_this._indexes;var currentIndex=indexes[wheelIndex];if(_this._scroll3d){currentIndex=index;}else if(index-currentIndex>=_this._rows){currentIndex++;}else if(index<currentIndex){currentIndex--;}indexes[wheelIndex]=currentIndex;_this.forceUpdate();};_this._onWheelIndexChange=function(args){var s=_this.s;var wheel=args.wheel;var key=wheel._key;var isMultiple=wheel.multiple;var newValue=getValue(wheel,args.index);var disabled=_this._disabled&&_this._disabled[key]&&_this._disabled[key].get(newValue);var lengths=[];var selectOnScroll=s.selectOnScroll;var updateIndex=selectOnScroll||!args.click;if(updateIndex){_this._lastIndexes[key]=_this._indexes[key]=args.index;_this._indexes.forEach((function(val,i){var w=_this._wheelMap[i];var len=w.data?w.data.length:0;_this._batches[i]=len?floor(val/len):0;lengths[i]=len;}));}_this._activeIndexes[key]=args.index;var beforeTempValue=_this._get(_this._tempValueRep);var itemTap=!!args.click&&!disabled;var scrollOrTapSelect=selectOnScroll||itemTap;if(isMultiple){if(itemTap){var selectionArr=(_this._tempValueRep[key]||[]).slice();if(args.selected===false){selectionArr.push(newValue);}else if(args.selected===true){selectionArr.splice(selectionArr.indexOf(newValue),1);}_this._tempValueRep[key]=selectionArr;}}else if(scrollOrTapSelect){_this._tempValueRep[key]=newValue;}if(s.onWheelMove&&args.index!==UNDEFINED){var wheelRep=s.onWheelMove({dataItem:getItem$1(wheel,args.index),selection:scrollOrTapSelect,wheelIndex:key});if(wheelRep){wheelRep.forEach((function(v,i){if(v!==UNDEFINED){_this._tempValueRep[i]=v;}if(!scrollOrTapSelect){var w=_this._wheelMap[i];var newIndex=getIndex(w,v);_this._constrainIndex(newIndex,w);}}));}}if(scrollOrTapSelect){_this._validate(key,args.diff>0?1:-1);}if(selectOnScroll){_this._tempValueRep.forEach((function(val,i){var w=_this._wheelMap[i];var len=w.data?w.data.length:0;var oldIndex=_this._indexes[i];var newIndex=getIndex(w,val)+_this._batches[i]*len;_this._activeIndexes[i]=_this._lastIndexes[i]=_this._indexes[i]=newIndex;w._offset=len!==lengths[i]?newIndex-oldIndex:0;}));}var currentTempValue=_this._get(_this._tempValueRep);var tempValueChanged=!_this._valueEquals(beforeTempValue,currentTempValue);if(tempValueChanged||args.click&&_this._live&&!_this._valueEquals(_this.value,currentTempValue)){_this._setOrUpdate(!tempValueChanged);}else {_this.forceUpdate();}if(_this._live&&itemTap&&wheel.closeOnTap){_this.close();}};return _this}ScrollerBase.prototype._initWheels=function(){var _this=this;var key=0;var wheels=this.s.wheels||[];this._wheelMap=[];wheels.forEach((function(wheelGroup){wheelGroup.forEach((function(wheel){_this._initWheel(wheel,key);_this._wheelMap[key]=wheel;key++;}));}));this._wheels=wheels;};ScrollerBase.prototype._shouldValidate=function(s,prevS){return s.shouldValidate?s.shouldValidate(s,prevS):false};ScrollerBase.prototype._valueEquals=function(v1,v2){if(this.s.valueEquality){return this.s.valueEquality(v1,v2)}return v1===v2};ScrollerBase.prototype._render=function(s,state){var _this=this;var props=this.props||{};var resp=this._respProps||{};var prevS=this._prevS;var circular=this._touchUi?s.circular:false;var rows=this._touchUi?s.rows:resp.rows||props.rows||7;this._displayStyle=s.displayStyle||s.display;this._scroll3d=s.scroll3d&&this._touchUi&&has3d;if(s.itemHeight!==prevS.itemHeight||rows!==this._rows){this._rows=rows;this._lineStyle={height:s.itemHeight+"px"};if(this._scroll3d){var translateZ="translateZ("+(s.itemHeight*rows/2+3)+"px";this._overlayStyle={};this._overlayStyle[cssPrefix+"transform"]=translateZ;this._lineStyle[cssPrefix+"transform"]="translateY(-50%) "+translateZ;}}if(s.wheels!==prevS.wheels||circular!==this._circular){this._batches=[];this._shouldSetIndex=true;this._circular=circular;this._initWheels();}_super.prototype._render.call(this,s,state);if(this._shouldSetIndex){this._setIndexes();this._shouldSetIndex=this._indexFromValue=false;}if(s.wheels!==prevS.wheels&&prevS.wheels!==UNDEFINED){setTimeout((function(){for(var _i=0,_a=_this._wheelMap;_i<_a.length;_i++){var wheel=_a[_i];_this._onWheelIndexChange({diff:0,index:_this._indexes[wheel._key],wheel:wheel});}}));}};ScrollerBase.prototype._writeValue=function(elm,text,value){if(this.s.writeValue){return this.s.writeValue(elm,text,value)}return _super.prototype._writeValue.call(this,elm,text,value)};ScrollerBase.prototype._copy=function(value){return value.slice(0)};ScrollerBase.prototype._format=function(value){if(this.s.formatValue){return this.s.formatValue(value)}return value.join(" ")};ScrollerBase.prototype._get=function(value){if(this.s.getValue){return this.s.getValue(value)}return value};ScrollerBase.prototype._parse=function(valueStr){if(this.s.parseValue){return this.s.parseValue(valueStr)}var ret=[];var values=[];var i=0;if(valueStr!==null&&valueStr!==UNDEFINED){values=(valueStr+"").split(" ");}this._wheels.forEach((function(wheelGroup){wheelGroup.forEach((function(wheel){var data=wheel.data||[];var len=data.length;var value=getItemValue(data[0]);var j=0;while(value!=values[i]&&j<len){value=getItemValue(data[j]);j++;}ret.push(value);i++;}));}));return ret};ScrollerBase.prototype._validate=function(index,direction){var _this=this;if(this.s.validate){var ret=this.s.validate.call(this._el,{direction:direction,index:index,values:this._tempValueRep.slice(0),wheels:this._wheelMap});this._disabled=ret.disabled;if(ret.init){this._initWheels();}if(ret.indexes){ret.indexes.forEach((function(value,i){if(value!==UNDEFINED){var w=_this._wheelMap[i];var newIndex=getIndex(w,value);_this._constrainIndex(newIndex,w);}}));}if(ret.valid){this._tempValueRep=ret.valid.slice(0);}else {this._wheelMap.forEach((function(wheel,i){_this._tempValueRep[i]=getValid(wheel,_this._tempValueRep[i],_this._disabled&&_this._disabled[i],direction);}));}}};ScrollerBase.prototype._onOpen=function(){this._batches=[];this._shouldSetIndex=true;this._indexFromValue=true;};ScrollerBase.prototype._onParse=function(){this._shouldSetIndex=true;};ScrollerBase.prototype._initWheel=function(wheel,key){var circular=this._circular;wheel._key=key;wheel._map=new Map;wheel._circular=circular===UNDEFINED?wheel.circular===UNDEFINED?wheel.data&&wheel.data.length>this._rows:wheel.circular:isArray(circular)?circular[key]:circular;if(wheel.data){wheel.min=wheel._circular?UNDEFINED:0;wheel.max=wheel._circular?UNDEFINED:wheel.data.length-1;wheel.data.forEach((function(item,i){wheel._map.set(getItemValue(item),i);}));}};ScrollerBase.prototype._setIndexes=function(){var _this=this;var currentIndexes=this._indexes||[];this._indexes=[];this._activeIndexes=[];this._tempValueRep.forEach((function(val,i){var w=_this._wheelMap[i];var len=w.data?w.data.length:0;var newIndex=getIndex(w,val);if(_this.s.selectOnScroll){_this._activeIndexes[i]=_this._indexes[i]=newIndex+(_this._batches[i]||0)*len;}else {var currentIndex=newIndex;if(!_this._indexFromValue){currentIndex=currentIndexes[i];if(currentIndex!==UNDEFINED){currentIndex=getFirstIndex(w,currentIndex)+(_this._batches[i]||0)*len;}}_this._constrainIndex(currentIndex,w);}}));};ScrollerBase.prototype._constrainIndex=function(newIndex,wheel){var i=wheel._key;if(newIndex!==UNDEFINED&&wheel.data){if(!wheel.spaceAround){newIndex=constrain(newIndex,0,Math.max(wheel.data.length-this._rows,0));}this._activeIndexes[i]=this._indexes[i]=newIndex;}else {this._activeIndexes[i]=this._indexes[i]=this._lastIndexes[i]||0;}};ScrollerBase.defaults={itemHeight:40,rows:5,selectOnScroll:true,showOnClick:true};ScrollerBase._name="Scroller";ScrollerBase=__decorate([core.Directive({selector:"[mbsc-sc-b]"})],ScrollerBase);return ScrollerBase}(PickerBase);var WHEEL_WIDTHS={ios:50,material:46,windows:50};function getDateIndex(d,hasDay){var dt=new Date(d);return hasDay?floor(+dt/864e5):dt.getMonth()+12*(dt.getFullYear()-1970)}function getFullDate(d){return d.getFullYear()+"-"+pad(d.getMonth()+1)+"-"+pad(d.getDate())}function getMilliseconds(d){return d.getMilliseconds()}function getAmPm(d){return d.getHours()>11?1:0}var DatetimeBase=function(_super){__extends(DatetimeBase,_super);function DatetimeBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._preset="date";_this._innerValues={};_this._onChange=function(args){if(_this.s.value===UNDEFINED){_this.setState({value:args.value});}_this._hook("onChange",args);};_this._parseDate=function(value){var s=_this.s;if(!value){_this._innerValues={};}return _this._getArray(makeDate(value||s.defaultSelection||new Date,s,_this._format),!!value)};_this._formatDate=function(values){var d=_this._getDate(values);return d?formatDate(_this._format,d,_this.s):""};_this._getDate=function(values){var s=_this.s;var getArrayPart=_this._getArrayPart;var wheelOrder=_this._wheelOrder;var today=new Date((new Date).setHours(0,0,0,0));var d;var t;if(values===null||values===UNDEFINED){return null}if(wheelOrder.dd!==UNDEFINED){var parts=values[wheelOrder.dd].split("-");d=new Date(parts[0],parts[1]-1,parts[2]);}if(wheelOrder.tt!==UNDEFINED){t=d||today;t=new Date(t.getTime()+values[wheelOrder.tt]%86400*1e3);}var year=getArrayPart(values,"y",d,today);var month=getArrayPart(values,"m",d,today);var day=Math.min(getArrayPart(values,"d",d,today),s.getMaxDayOfMonth(year,month));var hour=getArrayPart(values,"h",t,today);return s.getDate(year,month,day,_this._hasAmPm&&getArrayPart(values,"a",t,today)?hour+12:hour,getArrayPart(values,"i",t,today),getArrayPart(values,"s",t,today),getArrayPart(values,"u",t,today))};_this._validate=function(_a){var direction=_a.direction,index=_a.index,values=_a.values,wheels=_a.wheels;var disabled=[];var s=_this.s;var stepHour=s.stepHour;var stepMinute=s.stepMinute;var stepSecond=s.stepSecond;var preset=s.mode||_this._preset;var wheelOrder=_this._wheelOrder;var getDatePart=_this._getDatePart;var maxDate=_this._max;var minDate=_this._min;var current=_this._getDate(values);var currYear=s.getYear(current);var currMonth=s.getMonth(current);var from=s.getDate(currYear,currMonth-1,1);var until=s.getDate(currYear,currMonth+2,1);if(index===wheelOrder.y||index===wheelOrder.m||index===wheelOrder.d||index===UNDEFINED){_this._valids=getEventMap(s.valid,from,until,s,true);_this._invalids=getEventMap(s.invalid,from,until,s,true);}var valids=_this._valids;var invalids=_this._invalids;var mind=minDate?+minDate:-Infinity;var maxd=maxDate?+maxDate:Infinity;var validated=getClosestValidDate(current,s,mind,maxd,invalids,valids,direction);var valid=_this._getArray(validated);var dayWheel=_this._wheels&&_this._wheels[0][wheelOrder.d];var y=getDatePart.y(validated);var m=getDatePart.m(validated);var maxDays=s.getMaxDayOfMonth(y,m);var mins={y:minDate?minDate.getFullYear():-Infinity,m:0,d:1,h:0,i:0,s:0,a:0,tt:0};var maxs={y:maxDate?maxDate.getFullYear():Infinity,m:11,d:31,h:step(_this._hasAmPm?11:23,stepHour),i:step(59,stepMinute),s:step(59,stepSecond),a:1,tt:86400};var steps={y:1,m:1,d:1,h:stepHour,i:stepMinute,s:stepSecond,a:1,tt:_this._timeStep};var init=false;var minprop=true;var maxprop=true;["dd","y","m","d","tt","a","h","i","s"].forEach((function(key){var min=mins[key];var max=maxs[key];var val=getDatePart[key](validated);var order=wheelOrder[key];if(minprop&&minDate){min=getDatePart[key](minDate);}if(maxprop&&maxDate){max=getDatePart[key](maxDate);}if(val<min){val=min;}if(val>max){val=max;}if(key!=="dd"&&key!=="tt"){if(minprop){minprop=val===min;}if(maxprop){maxprop=val===max;}}if(order!==UNDEFINED){disabled[order]=new Map;if(key!=="y"&&key!=="dd"){for(var i=mins[key];i<=maxs[key];i+=steps[key]){if(i<min||i>max){disabled[order].set(i,true);}}}if(key==="d"&&invalids){for(var d in invalids){if(!valids||!valids[d]){var dd=new Date(d);var yy=s.getYear(dd);var mm=s.getMonth(dd);if(yy===y&&mm===m&&isInvalid(dd,invalids,valids)){disabled[order].set(s.getDay(dd),true);}}}}}}));var invalidsForDay=invalids&&invalids[getDateStr(validated)];if(/time/i.test(preset)&&invalidsForDay){var parts_1=["a","h","i","s","tt"];parts_1.forEach((function(key,i){var order=wheelOrder[key];if(order!==UNDEFINED){for(var _i=0,invalidsForDay_1=invalidsForDay;_i<invalidsForDay_1.length;_i++){var invalid=invalidsForDay_1[_i];if(invalid.start&&invalid.end){var start=invalid.start;var end=invalid.end;var startProp=true;var endProp=true;for(var j=0;j<i;j++){var k=parts_1[j];var validValue=valid[wheelOrder[k]];if(validValue!==UNDEFINED){var startVal=startProp?getDatePart[k](start):0;var endVal=endProp?getDatePart[k](end):maxs[k];if(validValue!==startVal){startProp=false;}if(validValue!==endVal){endProp=false;}}}var add=0;var remove=0;for(var j=i+1;j<4;j++){var k=parts_1[j];if(wheelOrder[k]!==UNDEFINED){if(getDatePart[k](start)>0&&startProp){add=steps[key];}if(getDatePart[k](end)<maxs[k]&&endProp){remove=steps[key];}}}if(startProp||endProp){var startVal=startProp?getDatePart[key](start)+add:0;var endVal=endProp?getDatePart[key](end)-remove:maxs[key];for(var j=startVal;j<=endVal;j+=steps[key]){disabled[order].set(j,true);}}}}valid[order]=getValid(wheels[order],getDatePart[key](validated),disabled[order],direction);}}));}var dateDisplay=_this._dateDisplay;if(dayWheel&&(dayWheel.data.length!==maxDays||/DDD/.test(dateDisplay))){var data=[];for(var j=1;j<=maxDays;j++){var weekDay=s.getDate(y,m,j).getDay();var dayStr=dateDisplay.replace(/[my|]/gi,"").replace(/DDDD/,s.dayNames[weekDay]).replace(/DDD/,s.dayNamesShort[weekDay]).replace(/DD/,pad(j)+s.daySuffix).replace(/D/,j+s.daySuffix);data.push({display:dayStr,value:j});}dayWheel.data=data;init=true;}return {disabled:disabled,init:init,valid:valid}};_this._shouldValidate=function(s,prevS){return !!(s.min&&+s.min!==+prevS.min||s.max&&+s.max!==+prevS.max)||s.wheels!==prevS.wheels};_this._getYearValue=function(i){return {display:(/yy/i.test(_this._dateDisplay)?i:(i+"").substr(2,2))+_this.s.yearSuffix,value:i}};_this._getYearIndex=function(i){return +i};_this._getDateIndex=function(i){return getDateIndex(i,_this._hasDay)};_this._getDateItem=function(i){var s=_this.s;var hasDay=_this._hasDay;var today=new Date((new Date).setHours(0,0,0,0));var d=hasDay?new Date(i*864e5):new Date(1970,i,1);if(hasDay){d=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate());}return {disabled:hasDay&&isInvalid(d,_this._invalids,_this._valids),display:today.getTime()===d.getTime()?s.todayText:formatDate(_this._dateTemplate,d,s),value:getFullDate(d)}};_this._getArrayPart=function(values,part,d,def){var ret;if(_this._wheelOrder[part]!==UNDEFINED){ret=+values[_this._wheelOrder[part]];if(!isNaN(ret)){return ret}}if(d){return _this._getDatePart[part](d)}if(_this._innerValues[part]!==UNDEFINED){return _this._innerValues[part]}return _this._getDatePart[part](def)};_this._getHours=function(d){var hour=d.getHours();hour=_this._hasAmPm&&hour>=12?hour-12:hour;return step(hour,_this.s.stepHour)};_this._getMinutes=function(d){return step(d.getMinutes(),_this.s.stepMinute)};_this._getSeconds=function(d){return step(d.getSeconds(),_this.s.stepSecond)};_this._getFullTime=function(d){return step(round((d.getTime()-new Date(d).setHours(0,0,0,0))/1e3),_this._timeStep||1)};return _this}DatetimeBase.prototype.getVal=function(){return this._value};DatetimeBase.prototype.setVal=function(value){this._value=value;this.setState({value:value});};DatetimeBase.prototype.position=function(){if(this._scroller){this._scroller.position();}};DatetimeBase.prototype.isVisible=function(){return this._scroller&&this._scroller.isVisible()};DatetimeBase.prototype._valueEquals=function(v1,v2){return dateValueEquals(v1,v2,this.s)};DatetimeBase.prototype._render=function(s,state){var genWheels=false;var prevProps=this._prevS;var dateFormat=s.dateFormat;var timeFormat=s.timeFormat;var preset=s.mode||this._preset;var format=preset==="datetime"?dateFormat+s.separator+timeFormat:preset==="time"?timeFormat:dateFormat;this._value=s.value===UNDEFINED?state.value:s.value;this._minWheelWidth=s.minWheelWidth||(preset==="datetime"?WHEEL_WIDTHS[s.baseTheme||s.theme]:UNDEFINED);this._dateWheels=s.dateWheels||(preset==="datetime"?s.dateWheelFormat:dateFormat);this._dateDisplay=s.dateWheels||s.dateDisplay;this._timeWheels=s.timeWheels||timeFormat;this._timeDisplay=this._timeWheels;this._format=format;this._hasAmPm=/h/.test(this._timeDisplay);this._getDatePart={y:s.getYear,m:s.getMonth,d:s.getDay,h:this._getHours,i:this._getMinutes,s:this._getSeconds,u:getMilliseconds,a:getAmPm,dd:getFullDate,tt:this._getFullTime};if(+makeDate(prevProps.min)!==+makeDate(s.min)){genWheels=true;this._min=isEmpty(s.min)?UNDEFINED:makeDate(s.min,s,format);}if(+makeDate(prevProps.max)!==+makeDate(s.max)){genWheels=true;this._max=isEmpty(s.max)?UNDEFINED:makeDate(s.max,s,format);}if(s.theme!==prevProps.theme||s.mode!==prevProps.mode||s.locale!==prevProps.locale||s.dateWheels!==prevProps.dateWheels||s.timeWheels!==prevProps.timeWheels||genWheels){this._wheels=this._getWheels();}};DatetimeBase.prototype._getWheels=function(){this._wheelOrder={};var s=this.s;var preset=s.mode||this._preset;var hasAmPm=this._hasAmPm;var dateDisplay=this._dateDisplay.replace(/MMMM/,"XXXX").replace(/MMM/,"ZZZ").replace(/MM/,"mm").replace(/M/,"m").replace(/XXXX/,"MM").replace(/ZZZ/,"M");var timeDisplay=this._timeDisplay;var wheelOrder=this._wheelOrder;var wheels=[];var dateGroup=[];var values;var timeGroup=[];var nr=0;if(/date/i.test(preset)){var dateParts=this._dateWheels.split(/\|/.test(this._dateWheels)?"|":"");for(var _i=0,dateParts_1=dateParts;_i<dateParts_1.length;_i++){var template=dateParts_1[_i];var types=0;if(template.length){if(/y/i.test(template)){types++;}if(/m/i.test(template)){types++;}if(/d/i.test(template)){types++;}if(types>1&&wheelOrder.dd===UNDEFINED){wheelOrder.dd=nr;nr++;dateGroup.push(this._getDateWheel(template));timeGroup=dateGroup;}else if(/y/i.test(template)&&wheelOrder.y===UNDEFINED){wheelOrder.y=nr;nr++;dateGroup.push({cssClass:"mbsc-datetime-year-wheel",getIndex:this._getYearIndex,getItem:this._getYearValue,max:this._max?s.getYear(this._max):UNDEFINED,min:this._min?s.getYear(this._min):UNDEFINED,spaceAround:true});}else if(/m/i.test(template)&&wheelOrder.m===UNDEFINED){wheelOrder.m=nr;values=[];nr++;for(var j=0;j<12;j++){var monthStr=dateDisplay.replace(/[dy|]/gi,"").replace(/mm/,pad(j+1)+(s.monthSuffix||"")).replace(/m/,j+1+(s.monthSuffix||""));values.push({display:/MM/.test(monthStr)?monthStr.replace(/MM/,s.monthNames[j]):monthStr.replace(/M/,s.monthNamesShort[j]),value:j});}dateGroup.push({cssClass:"mbsc-datetime-month-wheel",data:values,spaceAround:true});}else if(/d/i.test(template)&&wheelOrder.d===UNDEFINED){wheelOrder.d=nr;values=[];nr++;for(var j=1;j<32;j++){values.push({display:(/dd/i.test(dateDisplay)?pad(j):j)+s.daySuffix,value:j});}dateGroup.push({cssClass:"mbsc-datetime-day-wheel",data:values,spaceAround:true});}}}wheels.push(dateGroup);}if(/time/i.test(preset)){var timeParts=this._timeWheels.split(/\|/.test(this._timeWheels)?"|":"");for(var _a=0,timeParts_1=timeParts;_a<timeParts_1.length;_a++){var template=timeParts_1[_a];var types=0;if(template.length){if(/h/i.test(template)){types++;}if(/m/i.test(template)){types++;}if(/s/i.test(template)){types++;}if(/a/i.test(template)){types++;}}if(types>1&&wheelOrder.tt===UNDEFINED){wheelOrder.tt=nr;nr++;timeGroup.push(this._getTimeWheel(template));}else if(/h/i.test(template)&&wheelOrder.h===UNDEFINED){values=[];wheelOrder.h=nr;nr++;for(var j=0;j<(hasAmPm?12:24);j+=s.stepHour){values.push({display:hasAmPm&&j===0?12:/hh/i.test(timeDisplay)?pad(j):j,value:j});}timeGroup.push({cssClass:"mbsc-datetime-hour-wheel",data:values,spaceAround:true});}else if(/m/i.test(template)&&wheelOrder.i===UNDEFINED){values=[];wheelOrder.i=nr;nr++;for(var j=0;j<60;j+=s.stepMinute){values.push({display:/mm/i.test(timeDisplay)?pad(j):j,value:j});}timeGroup.push({cssClass:"mbsc-datetime-minute-wheel",data:values,spaceAround:true});}else if(/s/i.test(template)&&wheelOrder.s===UNDEFINED){values=[];wheelOrder.s=nr;nr++;for(var j=0;j<60;j+=s.stepSecond){values.push({display:/ss/i.test(timeDisplay)?pad(j):j,value:j});}timeGroup.push({cssClass:"mbsc-datetime-second-wheel",data:values,spaceAround:true});}else if(/a/i.test(template)&&wheelOrder.a===UNDEFINED){wheelOrder.a=nr;nr++;timeGroup.push({cssClass:"mbsc-dt-whl-a",data:/A/.test(template)?[{display:s.amText.toUpperCase(),value:0},{display:s.pmText.toUpperCase(),value:1}]:[{display:s.amText,value:0},{display:s.pmText,value:1}],spaceAround:true});}}if(timeGroup!==dateGroup){wheels.push(timeGroup);}}return wheels};DatetimeBase.prototype._getDateWheel=function(template){var hasDay=/d/i.test(template);this._hasDay=hasDay;this._dateTemplate=template;return {cssClass:"mbsc-datetime-date-wheel",getIndex:this._getDateIndex,getItem:this._getDateItem,label:"",max:this._max?getDateIndex(getFullDate(this._max),hasDay):UNDEFINED,min:this._min?getDateIndex(getFullDate(this._min),hasDay):UNDEFINED,spaceAround:true}};DatetimeBase.prototype._getTimeWheel=function(template){var s=this.s;var values=[];var st=1;if(/s/i.test(template)){st=s.stepSecond;}else if(/m/i.test(template)){st=s.stepMinute*60;}else if(/h/i.test(template)){st=s.stepHour*3600;}this._timeStep=st;for(var i=0;i<86400;i+=st){var time=new Date((new Date).setHours(0,0,0,0)+i*1e3);values.push({display:formatDate(template,time,s),value:i});}return {data:values,label:"",spaceAround:true}};DatetimeBase.prototype._getArray=function(d,fillInner){var parts=["y","m","d","a","h","i","s","u","dd","tt"];var ret=[];var wheelOrder=this._wheelOrder;if(d===null||d===UNDEFINED){return ret}for(var _i=0,parts_2=parts;_i<parts_2.length;_i++){var part=parts_2[_i];var v=this._getDatePart[part](d);if(wheelOrder[part]!==UNDEFINED){ret[wheelOrder[part]]=v;}if(fillInner){this._innerValues[part]=v;}}return ret};DatetimeBase.defaults=__assign({},dateTimeLocale,{dateDisplay:"MMMMDDYYYY",dateWheelFormat:"|DDD MMM D|",stepHour:1,stepMinute:1,stepSecond:1});DatetimeBase._name="Datetime";DatetimeBase=__decorate([core.Directive({selector:"[mbsc-dt-b]"})],DatetimeBase);return DatetimeBase}(BaseComponent);var MbscScroller=function(_super){__extends(MbscScroller,_super);function MbscScroller(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onCancel=new core.EventEmitter;_this.onChange=new core.EventEmitter;_this.onClose=new core.EventEmitter;_this.onOpen=new core.EventEmitter;_this.onTempChange=new core.EventEmitter;_this.onResize=new core.EventEmitter;return _this}Object.defineProperty(MbscScroller.prototype,"vInput",{set:function(inp){if(inp){this._el=inp.nativeElement;this._isMbsc=true;}},enumerable:true,configurable:true});Object.defineProperty(MbscScroller.prototype,"vPopup",{set:function(popup){this._popup=popup;},enumerable:true,configurable:true});__decorate([core.ViewChild("input",{static:false}),__metadata("design:type",MbscInput),__metadata("design:paramtypes",[MbscInput])],MbscScroller.prototype,"vInput",null);__decorate([core.ViewChild("popup",{static:false}),__metadata("design:type",MbscPopup),__metadata("design:paramtypes",[MbscPopup])],MbscScroller.prototype,"vPopup",null);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"element",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScroller.prototype,"writeValue",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"value",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"circular",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"displayStyle",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScroller.prototype,"formatValue",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScroller.prototype,"getValue",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"maxWheelWidth",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"minWheelWidth",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"inContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScroller.prototype,"itemHeight",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscScroller.prototype,"itemTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScroller.prototype,"onWheelMove",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScroller.prototype,"parseValue",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"preContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"preContentData",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscScroller.prototype,"rows",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScroller.prototype,"selectMultiple",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScroller.prototype,"selectOnScroll",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScroller.prototype,"shouldValidate",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScroller.prototype,"showOnClick",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScroller.prototype,"showOnFocus",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScroller.prototype,"validate",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscScroller.prototype,"valueEquality",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"valueMap",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscScroller.prototype,"wheels",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"wheelWidth",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScroller.prototype,"disabled",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScroller.prototype,"dropdown",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"endIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"endIconSrc",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"endIconSvg",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScroller.prototype,"error",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"errorMessage",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"inputStyle",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"label",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"labelStyle",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"name",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"placeholder",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"startIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"startIconSrc",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"startIconSvg",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"activeElm",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"anchor",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"animation",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscScroller.prototype,"buttons",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"cancelText",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScroller.prototype,"closeOnEsc",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScroller.prototype,"closeOnOverlayClick",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"closeText",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"context",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"display",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScroller.prototype,"focusOnClose",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScroller.prototype,"focusTrap",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"headerText",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"height",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"maxHeight",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"maxWidth",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"setText",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScroller.prototype,"showArrow",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscScroller.prototype,"showOverlay",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscScroller.prototype,"width",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscScroller.prototype,"clearText",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScroller.prototype,"onCancel",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScroller.prototype,"onChange",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScroller.prototype,"onClose",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScroller.prototype,"onOpen",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScroller.prototype,"onTempChange",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscScroller.prototype,"onResize",void 0);MbscScroller=__decorate([FormControl,core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-scroller",template:getPickerTemplate('\n    <ng-template [ngTemplateOutlet]="preContentTemplate" [ngTemplateOutletContext]="{ data: preContentData }">\n    </ng-template>\n    <div [class]="\'mbsc-scroller mbsc-scroller-\' + _displayStyle + _theme + _rtl +\n      (_touchUi ? \' mbsc-scroller-touch\' : \' mbsc-scroller-pointer \') +\n      (s.display === \'inline\' ? \' mbsc-font \' : \' \') + _className">\n      <ng-template [ngTemplateOutlet]="inContentTemplate" [ngTemplateOutletContext]="{ data: preContentData }">\n      </ng-template>\n      <div *ngFor="let wheelGroup of _wheels" [class]="\'mbsc-scroller-wheel-group-cont\' +\n        (s.scroll3d ? \' mbsc-scroller-wheel-group-cont-3d\' : \'\') + _theme">\n        <div *ngIf="s.selectOnScroll" [class]="\'mbsc-scroller-wheel-line\' + _theme" [ngStyle]="_lineStyle"></div>\n        <div [class]="\'mbsc-scroller-wheel-group\' +\n          (s.scroll3d ? \' mbsc-scroller-wheel-group-3d\' : \'\') + _theme">\n          <div\n            [class]="\'mbsc-scroller-wheel-overlay mbsc-scroller-wheel-overlay-\' + _displayStyle + _theme"\n            [ngStyle]="_overlayStyle"\n          ></div>\n          <mbsc-wheel *ngFor="let wheel of wheelGroup"\n            [activeIndex]="_activeIndexes[wheel._key]"\n            [disabled]="_disabled && _disabled[wheel._key]"\n            [display]="_displayStyle"\n            [itemHeight]="s.itemHeight"\n            [onActiveChange]="_onActiveChange"\n            [onIndexChange]="_onWheelIndexChange"\n            [onSet]="_onSet"\n            [maxIndex]="wheel.max"\n            [maxWheelWidth]="s.maxWheelWidth"\n            [minIndex]="wheel.min"\n            [minWheelWidth]="s.minWheelWidth"\n            [multiple]="wheel.multiple"\n            [rows]="_rows"\n            [scroll3d]="_scroll3d"\n            [selectedIndex]="_indexes[wheel._key]"\n            [selectedValues]="_tempValueRep[wheel._key]"\n            [selectOnScroll]="s.selectOnScroll"\n            [itemTemplate]="s.itemTemplate"\n            [theme]="s.theme"\n            [rtl]="s.rtl"\n            [wheel]="wheel"\n            [wheelWidth]="s.wheelWidth"\n            [touchUi]="s.touchUi">\n          </mbsc-wheel>\n        </div>\n      </div>\n    </div>')})],MbscScroller);return MbscScroller}(ScrollerBase);var TEMPLATE='\n  <mbsc-scroller #scroller\n    [disabled]="s.disabled"\n    [endIcon]="s.endIcon"\n    [endIconSrc]="s.endIconSrc"\n    [endIconSvg]="s.endIconSvg"\n    [error]="s.error"\n    [errorMessage]="s.errorMessage"\n    [inputStyle]="s.inputStyle"\n    [label]="s.label"\n    [labelStyle]="s.labelStyle"\n    [placeholder]="s.placeholder"\n    [name]="s.name"\n    [startIcon]="s.startIcon"\n    [startIconSrc]="s.startIconSrc"\n    [startIconSvg]="s.startIconSvg"\n\n    [anchor]="s.anchor"\n    [animation]="s.animation"\n    [buttons]="s.buttons"\n    [cancelText]="s.cancelText"\n    [clearText]="s.clearText"\n    [closeOnOverlayClick]="s.closeOnOverlayClick"\n    [context]="s.context"\n    [display]="s.display"\n    [focusOnClose]="s.focusOnClose"\n    [focusTrap]="s.focusTrap"\n    [headerText]="s.headerText"\n    [height]="s.height"\n    [setText]="s.setText"\n    [showArrow]="s.showArrow"\n    [showOverlay]="s.showOverlay"\n    [width]="s.width"\n\n    [circular]="s.circular"\n    [displayStyle]="s.displayStyle"\n    [formatValue]="_formatDate"\n    [getValue]="_getDate"\n    [itemHeight]="s.itemHeight"\n    [maxWheelWidth]="s.maxWheelWidth"\n    [minWheelWidth]="_minWheelWidth"\n    [value]="_value"\n    [parseValue]="_parseDate"\n    [rows]="s.rows"\n    [rtl]="s.rtl"\n    [shouldValidate]="_shouldValidate"\n    [showOnClick]="s.showOnClick"\n    [showOnFocus]="s.showOnFocus"\n    [theme]="s.theme"\n    [themeVariant]="s.themeVariant"\n    [touchUi]="_touchUi"\n    [validate]="_validate"\n    [valueEquality]="_valueEquals"\n    [wheels]="_wheels"\n    [wheelWidth]="s.wheelWidth"\n\n    (onCancel)="_hook(\'onCancel\', $event)"\n    (onChange)="_hook(\'onChange\', $event)"\n    (onClose)="_hook(\'onClose\', $event)"\n    (onOpen)="_hook(\'onOpen\', $event)"\n  ></mbsc-scroller>\n';var MbscDateBase=function(_super){__extends(MbscDateBase,_super);function MbscDateBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onCancel=new core.EventEmitter;_this.onChange=new core.EventEmitter;_this.onClose=new core.EventEmitter;_this.onOpen=new core.EventEmitter;return _this}Object.defineProperty(MbscDateBase.prototype,"vScroller",{set:function(scroller){this._scroller=scroller;},enumerable:true,configurable:true});__decorate([core.ViewChild("scroller",{static:false}),__metadata("design:type",MbscScroller),__metadata("design:paramtypes",[MbscScroller])],MbscDateBase.prototype,"vScroller",null);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDateBase.prototype,"onCancel",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDateBase.prototype,"onChange",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDateBase.prototype,"onClose",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDateBase.prototype,"onOpen",void 0);MbscDateBase=__decorate([FormControl,core.Directive({selector:"[mbsc-dtb-b]"})],MbscDateBase);return MbscDateBase}(DatetimeBase);var MbscDate=function(_super){__extends(MbscDate,_super);function MbscDate(){return _super!==null&&_super.apply(this,arguments)||this}MbscDate=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-date",template:TEMPLATE})],MbscDate);return MbscDate}(MbscDateBase);var MbscDatetime=function(_super){__extends(MbscDatetime,_super);function MbscDatetime(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._preset="datetime";return _this}MbscDatetime=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-datetime",template:TEMPLATE})],MbscDatetime);return MbscDatetime}(MbscDateBase);var MbscTime=function(_super){__extends(MbscTime,_super);function MbscTime(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._preset="time";return _this}MbscTime=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-time",template:TEMPLATE})],MbscTime);return MbscTime}(MbscDateBase);function getClosestNumber(arr,value){if(value==null||!arr.length){return null}var i=0;while(i<arr.length&&value>=arr[i]){i++;}if(i===arr.length){return arr[i-1]}else if(i===0){return arr[0]}else {var prev=arr[i-1];var next=arr[i];return value-prev<next-value?prev:next}}var TimegridBase=function(_super){__extends(TimegridBase,_super);function TimegridBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._setTime=function(timeSlot){_this._hook("onChange",{value:new Date(timeSlot.value)});};_this._isDisabled=function(d){var disabled=false;var key=getDateStr(new Date(d));var invalidsForDay=_this._invalids&&_this._invalids[key];if(invalidsForDay){for(var _i=0,invalidsForDay_1=invalidsForDay;_i<invalidsForDay_1.length;_i++){var invalid=invalidsForDay_1[_i];if(invalid.start&&invalid.end&&d>=+invalid.start&&d<=+invalid.end){disabled=true;}}}return disabled};_this._onKeyDown=function(ev){switch(ev.keyCode){case SPACE:ev.target.click();ev.preventDefault();break}};return _this}TimegridBase.prototype._render=function(s,state){var _this=this;var prevS=this._prevS;this._cssClass="mbsc-timegrid-container mbsc-font"+this._theme+this._rtl;var minChanged=s.min!==prevS.min;var maxChanged=s.max!==prevS.max;var timeFormat=s.timeFormat;var valueChanged=prevS.value&&!s.value||s.value&&+s.value!==this._value;if(minChanged){this._min=isEmpty(s.min)?UNDEFINED:makeDate(s.min,timeFormat,s);}if(maxChanged){this._max=isEmpty(s.max)?UNDEFINED:makeDate(s.max,timeFormat,s);}var selectedOrDefaultConstrained=constrainDate(s.value||new Date,this._min,this._max);var dayStart=getDateOnly(selectedOrDefaultConstrained);var dayEnd=new Date(dayStart);dayEnd.setHours(23,59,59,999);var currentDateChanged=this._selectedDate!==+dayStart;var invChanged=s.invalid!==prevS.invalid;if(invChanged||currentDateChanged){this._invalids=getEventMap(s.invalid,dayStart,dayEnd,s,true);}if(valueChanged){this._value=s.value&&+s.value;}var timeSlotsChange=currentDateChanged||invChanged||minChanged||maxChanged||timeFormat!==prevS.timeFormat;if(timeSlotsChange){this._selectedDate=+dayStart;var start=+constrainDate(dayStart,this._min);var end=+constrainDate(dayEnd,UNDEFINED,this._max);var timeInterval=s.stepHour*36e5+s.stepMinute*6e4;this._timeSlots=[];this._validTimes=[];var arr=[];for(var d=start,i=0;d<=end;d+=timeInterval,i++){var timeslot={formattedValue:formatDate(timeFormat,new Date(d)),value:d};arr.push(timeslot);if(i===2){this._timeSlots.push(arr);arr=[];i=-1;}if(!this._isDisabled(d)){this._validTimes.push(timeslot);}}if(arr.length){this._timeSlots.push(arr);}}if(this._isDisabled(this._value)||(valueChanged||timeSlotsChange)&&findIndex(this._validTimes,(function(ts){return ts.value===_this._value}))===-1){var validated_1=getClosestNumber(this._validTimes.map((function(slot){return slot.value})),this._value);if(validated_1){setTimeout((function(){var validTimeslot=find(_this._validTimes,(function(slot){return slot.value===validated_1}));_this._setTime(validTimeslot);}));}}this._valueChanged=this._valueChanged||valueChanged;};TimegridBase.prototype._updated=function(){if(this._value!==UNDEFINED&&this._valueChanged){var timeslot=this._gridContEl.querySelector('[data-timeslot="'+this._value+'"]');if(timeslot){var itemTop=getOffset(timeslot).top;var gridTop=getOffset(this._gridContEl).top;var currPos=getScrollTop(this._gridContEl);var gridHeight=this._gridContEl.clientHeight;var itemHeight=timeslot.clientHeight;if(itemTop-gridTop+itemHeight>gridHeight||itemTop<gridTop){var scrollPos=itemTop-gridTop+currPos-5;smoothScroll(this._gridContEl,scrollPos,this._lastValue!==UNDEFINED);}}this._valueChanged=false;this._lastValue=this._value;}};TimegridBase.defaults=__assign({},dateTimeLocale,{stepHour:0,stepMinute:30});TimegridBase._name="Timegrid";TimegridBase=__decorate([core.Directive({selector:"[mbsc-tg-b]"})],TimegridBase);return TimegridBase}(BaseComponent);var MbscTimeBox=function(){function MbscTimeBox(){}__decorate([core.Input(),__metadata("design:type",Boolean)],MbscTimeBox.prototype,"disabled",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscTimeBox.prototype,"selected",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscTimeBox.prototype,"timeSlot",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscTimeBox.prototype,"theme",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeBox.prototype,"onClick",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscTimeBox.prototype,"onKeyDown",void 0);MbscTimeBox=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,selector:"mbsc-timebox",template:"<div [class]=\"'mbsc-timegrid-item' + (selected ? ' mbsc-selected' : '') + (disabled ? ' mbsc-disabled' : '') + theme\"\n    (click)=\"onClick(timeSlot)\" (keydown)=\"onKeyDown($event)\" [attr.tabIndex]=\"disabled ? null : 0\" [attr.data-timeslot]=\"timeSlot.value\">{{timeSlot.formattedValue}}</div>"})],MbscTimeBox);return MbscTimeBox}();var MbscTimegrid=function(_super){__extends(MbscTimegrid,_super);function MbscTimegrid(){return _super!==null&&_super.apply(this,arguments)||this}MbscTimegrid.prototype._mounted=function(){var el=this._elr.nativeElement;this._gridContEl=el&&el.parentElement;};MbscTimegrid=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-timegrid",template:'\n    <div *ngFor="let arr of _timeSlots; let rowIndex = index; trackBy: _getKey" class="mbsc-timegrid-row">\n      <div *ngFor="let v of arr; let cellIndex = index; trackBy: _getKey" [class]="\'mbsc-timegrid-cell\' + (_isDisabled(v.value) ? \' mbsc-disabled\' : \'\')">\n        \x3c!-- TRIALMULTI(rowIndex*3+cellIndex) --\x3e\n        <mbsc-timebox\n          [disabled]="_isDisabled(v.value)"\n          [selected]="_value === v.value"\n          [timeSlot]="v"\n          [theme]="_theme"\n          [onClick]="_setTime"\n          [onKeyDown]="_onKeyDown">\n        </mbsc-timebox>\n      </div>\n    </div>\n'})],MbscTimegrid);return MbscTimegrid}(TimegridBase);modules.Calendar=MbscCalendar;modules.Datetime=MbscDatetime;modules.Timegrid=MbscTimegrid;var MbscTplDirective=function(){function MbscTplDirective(vcr){this.vcr=vcr;}MbscTplDirective=__decorate([core.Directive({selector:"[mbsc-tpl]"}),__metadata("design:paramtypes",[core.ViewContainerRef])],MbscTplDirective);return MbscTplDirective}();var template='\n<div [class]="\'mbsc-datepicker mbsc-flex-col mbsc-datepicker-\' + s.display + _theme +\n  (s.display === \'inline\' ? \' \' + _className : \'\') + _controlsClass"\n>\n  <div *ngIf="_headerText && s.display === \'inline\'" [class]="\'mbsc-picker-header\' + _theme + _hb">\n    {{_headerText}}\n  </div>\n\n  <mbsc-segmented-group *ngIf="_renderTabs"\n    [rtl]="s.rtl"\n    [theme]="s.theme"\n    [themeVariant]="s.themeVariant"\n    [(ngModel)]="_activeTab"\n    (change)="_changeActiveTab($event)"\n  >\n    <mbsc-segmented *ngFor="let control of _controls"\n      [rtl]="s.rtl"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n      [value]="control.name"\n    >\n      {{control.title}}\n    </mbsc-segmented>\n  </mbsc-segmented-group>\n  <div *ngIf="_renderControls" [class]="\'mbsc-range-control-wrapper\' + _theme">\n    <mbsc-segmented-group\n      [rtl]="s.rtl"\n      [theme]="s.theme"\n      [themeVariant]="s.themeVariant"\n      [(ngModel)]="_activeSelect"\n      (change)="_changeActiveSelect($event)"\n    >\n      <mbsc-segmented [rtl]="s.rtl" [theme]="s.theme" [themeVariant]="s.themeVariant" value="start" [class]="\'mbsc-range-start\' +\n        (_tempStartText ? \' mbsc-range-value-nonempty\' : \'\')">\n        <div [class]="\'mbsc-range-control-label\' + _theme + _rtl +\n        (_activeSelect === \'start\'? \' active\' : \'\')">{{s.rangeStartLabel}}</div>\n        <div [class]="\'mbsc-range-control-value\' + _theme + _rtl +\n        (_activeSelect === \'start\' ? \' active\' : \'\') +\n        (!_tempStartText ? \' mbsc-range-control-text-empty\' : \'\')">{{_tempStartText || s.rangeStartHelp}}</div>\n        <mbsc-icon *ngIf="_activeSelect === \'start\' && _tempStartText" [class]="\'mbsc-range-label-clear\' + _rtl"\n          (click)="_clearStart()" [svg]="s.clearIcon" [theme]="s.theme"></mbsc-icon>\n      </mbsc-segmented>\n      <mbsc-segmented [rtl]="s.rtl" [theme]="s.theme" [themeVariant]="s.themeVariant" value="end" [class]="\'mbsc-range-end\' +\n        (_tempEndText ? \' mbsc-range-value-nonempty\' : \'\')">\n        <div [class]="\'mbsc-range-control-label\' + _theme + _rtl +\n        (_activeSelect === \'end\'? \' active\' : \'\')">{{s.rangeEndLabel}}</div>\n        <div [class]="\'mbsc-range-control-value\' + _theme + _rtl +\n        (_activeSelect === \'end\' ? \' active\' : \'\') +\n        (!_tempEndText ? \' mbsc-range-control-text-empty\' : \'\')">{{_tempEndText || s.rangeEndHelp}}</div>\n        <mbsc-icon *ngIf="_activeSelect === \'end\' && _tempEndText" [class]="\'mbsc-range-label-clear\' + _rtl"\n          (click)="_clearEnd()" [svg]="s.clearIcon" [theme]="s.theme"></mbsc-icon>\n      </mbsc-segmented>\n    </mbsc-segmented-group>\n  </div>\n  <div [class]="\'mbsc-datepicker-tab-wrapper mbsc-flex-1-1 mbsc-flex-b-auto \' + _theme" #wrapper>\n    <div *ngFor="let control of _controls"\n      [class]="\'mbsc-datepicker-tab mbsc-datepicker-tab-\' + control.name + _theme +\n        ((_renderTabs && control.name === _activeTab) || !_renderTabs ? \' mbsc-datepicker-tab-active\' : \'\') +\n        (_renderTabs && control.name === \'time\' ? \' mbsc-datepicker-time-modal\' : \'\') +\n        (_renderTabs || _controls.length === 1 ? \' mbsc-datepicker-tab-expand\' : \'\')"\n      >\n      <ng-container mbsc-tpl></ng-container>\n    </div>\n  </div>\n</div>\n';var MbscDatepickerBase=function(_super){__extends(MbscDatepickerBase,_super);function MbscDatepickerBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.onCancel=new core.EventEmitter;_this.onCellClick=new core.EventEmitter;_this.onCellHoverIn=new core.EventEmitter;_this.onCellHoverOut=new core.EventEmitter;_this.onChange=new core.EventEmitter;_this.onClose=new core.EventEmitter;_this.onLabelClick=new core.EventEmitter;_this.onPageChange=new core.EventEmitter(true);_this.onPageLoaded=new core.EventEmitter(true);_this.onPageLoading=new core.EventEmitter(true);_this.onOpen=new core.EventEmitter;_this.onPosition=new core.EventEmitter;_this.onTempChange=new core.EventEmitter;_this.onActiveDateChange=new core.EventEmitter;return _this}__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscDatepickerBase.prototype,"calendarHeaderTemplate",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"calendarScroll",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"calendarSize",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"calendarSystem",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"calendarType",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"colors",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscDatepickerBase.prototype,"controls",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"defaultSelection",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"element",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"endInput",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"firstSelectDay",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"invalid",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"inRangeInvalid",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"labels",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"marked",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"max",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"maxRange",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"maxTime",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"min",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"minRange",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"minTime",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"mode",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscDatepickerBase.prototype,"modules",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"moment",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"pages",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"rangeHighlight",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"rangeEndInvalid",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"returnFormat",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"showInput",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"startInput",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"stepHour",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"stepMinute",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"stepSecond",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"select",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"selectCounter",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"selectSize",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"selectMax",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"selectMin",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"selectMultiple",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"showOuterDays",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"showRangeLabels",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"showWeekNumbers",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"tabs",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"theme",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"valid",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"value",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"weeks",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"disabled",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"endIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"endIconSrc",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"endIconSvg",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"error",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"errorMessage",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"inputStyle",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"label",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"labelStyle",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"name",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"placeholder",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"startIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"startIconSrc",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"startIconSvg",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"tagInput",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"circular",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"clearText",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"itemHeight",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"maxWheelWidth",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"minWheelWidth",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"rows",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"showOnClick",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"showOnFocus",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"wheelWidth",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"anchor",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"anchorAlign",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"animation",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscDatepickerBase.prototype,"buttons",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"cancelText",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"closeOnEsc",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"closeOnOverlayClick",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"closeOnScroll",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"closeText",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"context",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"display",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"focusOnClose",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"focusTrap",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"fullScreen",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"headerText",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"height",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"isOpen",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"maxHeight",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"maxWidth",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"scrollLock",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"setText",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"showArrow",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscDatepickerBase.prototype,"showOverlay",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscDatepickerBase.prototype,"width",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"amText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"dateFormat",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"dateWheels",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscDatepickerBase.prototype,"dayNames",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscDatepickerBase.prototype,"dayNamesShort",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"daySuffix",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscDatepickerBase.prototype,"dayTemplate",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscDatepickerBase.prototype,"dayContentTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscDatepickerBase.prototype,"firstDay",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscDatepickerBase.prototype,"monthNames",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscDatepickerBase.prototype,"monthNamesShort",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"monthSuffix",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"moreEventsPluralText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"moreEventsText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"nowText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"pmText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"rangeEndHelp",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"rangeEndLabel",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"rangeStartHelp",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"rangeStartLabel",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"selectedPluralText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"selectedText",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"timeFormat",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"timeWheels",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscDatepickerBase.prototype,"yearSuffix",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onCancel",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onCellClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onCellHoverIn",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onCellHoverOut",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onChange",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onClose",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onLabelClick",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onPageChange",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onPageLoaded",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onPageLoading",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onOpen",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onPosition",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onTempChange",void 0);__decorate([core.Output(),__metadata("design:type",core.EventEmitter)],MbscDatepickerBase.prototype,"onActiveDateChange",void 0);MbscDatepickerBase=__decorate([FormControl,core.Directive({selector:"[mbsc-dp-b]"})],MbscDatepickerBase);return MbscDatepickerBase}(DatepickerBase);var MbscDatepicker=function(_super){__extends(MbscDatepicker,_super);function MbscDatepicker(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._refs=[];return _this}Object.defineProperty(MbscDatepicker.prototype,"vInput",{set:function(inp){if(inp){this._el=inp.nativeElement;this._isMbsc=true;}},enumerable:true,configurable:true});Object.defineProperty(MbscDatepicker.prototype,"vPopup",{set:function(popup){this._popup=popup;},enumerable:true,configurable:true});Object.defineProperty(MbscDatepicker.prototype,"vWrapper",{set:function(wrapper){this._wrapper=wrapper&&wrapper.nativeElement;},enumerable:true,configurable:true});MbscDatepicker.prototype._ctor=function(){this._cfr=this._injector.get(core.ComponentFactoryResolver);};MbscDatepicker.prototype._render=function(s,state){_super.prototype._render.call(this,s,state);for(var _i=0,_a=this._controls;_i<_a.length;_i++){var control=_a[_i];if(control.ref){control.ref.instance.props=control.options;control.ref.instance.forceUpdate();}}};MbscDatepicker.prototype._updated=function(){var _this=this;_super.prototype._updated.call(this);var s=this.s;var controlsChanged=s.controls!==this._prevS.controls;if(controlsChanged){this._destroyControls();}if((controlsChanged||!this._controlsCreated)&&(s.display==="inline"||this.isVisible())){var templates_1=this.vTemplates.toArray();this._refs=[];this._controls.forEach((function(control,i){var Comp=control.Component;if(Comp){var componentFactory=_this._cfr.resolveComponentFactory(Comp);var ref_1=templates_1[i].vcr.createComponent(componentFactory);ref_1.instance.props=control.options;control.timer=setTimeout((function(){ref_1.changeDetectorRef.detectChanges();}));control.vcr=templates_1[i].vcr;control.ref=ref_1;_this._refs.push(control);}_this._controlsCreated=true;}));if(this._controls.length&&s.display==="anchored"){setTimeout((function(){_this.position();}));}}};MbscDatepicker.prototype._destroy=function(){this._destroyControls();_super.prototype._destroy.call(this);};MbscDatepicker.prototype._onClosed=function(){_super.prototype._onClosed.call(this);this._destroyControls();this._onFormTouch();};MbscDatepicker.prototype._destroyControls=function(){this._controlsCreated=false;for(var _i=0,_a=this._refs;_i<_a.length;_i++){var control=_a[_i];if(control.ref){clearTimeout(control.timer);control.ref.destroy();control.vcr.clear();delete control.ref;delete control.vcr;}}};__decorate([core.ViewChild("input",{static:false}),__metadata("design:type",MbscInput),__metadata("design:paramtypes",[MbscInput])],MbscDatepicker.prototype,"vInput",null);__decorate([core.ViewChild("popup",{static:false}),__metadata("design:type",MbscPopup),__metadata("design:paramtypes",[MbscPopup])],MbscDatepicker.prototype,"vPopup",null);__decorate([core.ViewChild("wrapper",{static:false}),__metadata("design:type",core.ElementRef),__metadata("design:paramtypes",[core.ElementRef])],MbscDatepicker.prototype,"vWrapper",null);__decorate([core.ViewChildren(MbscTplDirective,{static:false}),__metadata("design:type",core.QueryList)],MbscDatepicker.prototype,"vTemplates",void 0);MbscDatepicker=__decorate([FormControl,core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,providers:[MbscInstanceService],selector:"mbsc-datepicker",template:getPickerTemplate(template)})],MbscDatepicker);return MbscDatepicker}(MbscDatepickerBase);var MbscDatepickerDirective=function(_super){__extends(MbscDatepickerDirective,_super);function MbscDatepickerDirective(){return _super!==null&&_super.apply(this,arguments)||this}MbscDatepickerDirective.prototype._ctor=function(){this._cfr=this._injector.get(core.ComponentFactoryResolver);};MbscDatepickerDirective.prototype._init=function(){var _this=this;var componentFactory=this._cfr.resolveComponentFactory(MbscDatepicker);this._ref=this._vcf.createComponent(componentFactory);this._inst=this._ref.instance;var inst=this._inst;var _loop_1=function(prop){if(prop!=="onInit"&&prop!=="onDestroy"&&inst[prop]instanceof core.EventEmitter){inst[prop].subscribe((function(args){if(prop==="onClose"){_this._onFormTouch();}if(prop==="onChange"){_this.value=inst.value;}_this[prop].emit(args);}));}};for(var prop in inst){_loop_1(prop);}_super.prototype._init.call(this);};MbscDatepickerDirective.prototype._destroy=function(){_super.prototype._destroy.call(this);if(this._ref){this._ref.destroy();}};MbscDatepickerDirective.prototype._render=function(s,state){_super.prototype._render.call(this,s,state);var inst=this._inst;inst.value=this.value;inst.props=s;inst.props.element=this._elr.nativeElement;inst.forceUpdate();};__decorate([core.Input("mbscOptions"),__metadata("design:type",Object)],MbscDatepickerDirective.prototype,"options",void 0);MbscDatepickerDirective=__decorate([core.Directive({exportAs:"mobiscroll",providers:[MbscInstanceService],selector:"[mbsc-datepicker]"})],MbscDatepickerDirective);return MbscDatepickerDirective}(MbscDatepickerBase);var WheelBase=function(_super){__extends(WheelBase,_super);function WheelBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onIndexChange=function(args){args.wheel=_this.s.wheel;_this._hook("onIndexChange",args);};_this._onItemClick=function(args){_this._hook("onIndexChange",{click:true,index:args.index,wheel:_this.s.wheel,selected:args.selected});};_this._onKeyDown=function(ev){var dir=0;if(ev.keyCode===UP_ARROW){dir=-1;}else if(ev.keyCode===DOWN_ARROW){dir=1;}var s=_this.s;var newIndex=s.activeIndex+dir;var change=!(newIndex<s.minIndex)&&!(newIndex>s.maxIndex);if(dir){ev.preventDefault();}if(dir&&change){var hook=s.selectOnScroll?"onIndexChange":"onActiveChange";_this._shouldFocus=true;_this._hook(hook,{diff:dir,index:newIndex,wheel:s.wheel});}else if(ev.keyCode===ENTER&&s.multiple){_this._hook("onSet",{});}};return _this}WheelBase.prototype._getText=function(data){return data!==UNDEFINED?data.display!==UNDEFINED?data.display:data:UNDEFINED};WheelBase.prototype._getValue=function(data){return data?data.value!==UNDEFINED?data.value:data.display!==UNDEFINED?data.display:data:data};WheelBase.prototype._isActive=function(item,text,is3d){var s=this.s;var d3=s.scroll3d&&s.multiple?is3d:!is3d;return s.activeIndex===item.key&&text&&d3};WheelBase.prototype._isSelected=function(item){var s=this.s;var selectedValues=s.selectedValues;var value=this._getValue(item.data);return s.multiple?!!(selectedValues&&selectedValues.indexOf)&&selectedValues.indexOf(value)>=0:s.selectOnScroll?item.key===s.selectedIndex:value!==UNDEFINED&&value===selectedValues};WheelBase.prototype._isDisabled=function(data){var disabledMap=this.s.disabled;var disabledProp=data&&data.disabled;var value=this._getValue(data);return !!(disabledProp||disabledMap&&disabledMap.get(value))};WheelBase.prototype._render=function(s){var rows=s.rows;var itemHeight=s.itemHeight;var key=s.wheel._key;var itemHeight3d=round((itemHeight-(itemHeight*rows/2+3)*.03)/2)*2;this._items=s.wheel.getItem||s.wheel.data||[];this._batchSize3d=round(rows*1.8);this._angle3d=360/(this._batchSize3d*2);this._style={height:round(rows*itemHeight*(s.scroll3d?1.1:1)/2)*2};this._itemNr=s.wheel.spaceAround?1:rows;this._innerStyle={height:(s.scroll3d?itemHeight3d:s.wheel.spaceAround?itemHeight:itemHeight*rows)+"px"};this._wheelStyle=s.wheelWidth?{width:s.wheelWidth[key]||s.wheelWidth}:{maxWidth:isArray(s.maxWheelWidth)?s.maxWheelWidth[key]:s.maxWheelWidth,minWidth:isArray(s.minWheelWidth)?s.minWheelWidth[key]:s.minWheelWidth};if(s.scroll3d){this._innerStyle[cssPrefix+"transform"]="translateY(-50%) translateZ("+(itemHeight*rows/2+3)+"px";}};WheelBase.prototype._updated=function(){if(this._shouldFocus){var item_1=this._el.querySelector('[tabindex="0"]');if(item_1){setTimeout((function(){item_1.focus();}));}this._shouldFocus=false;}};WheelBase=__decorate([core.Directive({selector:"[mbsc-wh-b]"})],WheelBase);return WheelBase}(BaseComponent);var WheelItemBase=function(_super){__extends(WheelItemBase,_super);function WheelItemBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._onClick=function(){var s=_this.s;if(s.text!==UNDEFINED&&!s.isGroup){_this._hook("onClick",{index:s.index,selected:s.selected,disabled:s.disabled});}};return _this}WheelItemBase.prototype._mounted=function(){var _this=this;this._unlisten=gestureListener(this._el,{click:true,keepFocus:false,onBlur:function(){_this.setState({hasFocus:false});},onFocus:function(){_this.setState({hasFocus:true});},onHoverIn:function(){if(_this.s.text!==UNDEFINED){_this.setState({hasHover:true});}},onHoverOut:function(){if(_this.s.text!==UNDEFINED){_this.setState({hasHover:false});}},onKeyDown:function(ev){if(ev.keyCode===SPACE||!_this.s.multiple&&ev.keyCode===ENTER){_this._onClick();}},onPress:function(){if(_this.s.text!==UNDEFINED){_this.setState({isActive:true});}},onRelease:function(){if(_this.s.text!==UNDEFINED){_this.setState({isActive:false});}}});};WheelItemBase.prototype._destroy=function(){this._unlisten();};WheelItemBase.prototype._render=function(s,state){var height=s.height;this._cssClass="mbsc-scroller-wheel-"+(s.isGroup?"header":"item")+this._theme+this._rtl+(s.checkmark&&!s.isGroup?" mbsc-wheel-item-checkmark":"")+(s.is3d?" mbsc-scroller-wheel-item-3d":"")+(s.scroll3d&&!s.is3d?" mbsc-scroller-wheel-item-2d":"")+(s.selected&&!s.is3d?" mbsc-selected":"")+(s.selected&&s.is3d?" mbsc-selected-3d":"")+(s.disabled?" mbsc-disabled":"")+(s.multiple&&!s.isGroup?" mbsc-wheel-item-multi":"")+(state.hasHover?" mbsc-hover":"")+(state.hasFocus?" mbsc-focus":"")+(state.isActive?" mbsc-active":"");this._style={height:height,lineHeight:height+"px"};this._checkmarkClass=this._theme+this._rtl+" mbsc-wheel-checkmark"+(s.selected?" mbsc-selected":"");if(s.is3d){this._transform="rotateX("+(s.offset-s.index)*s.angle3d%360+"deg) translateZ("+height*s.rows/2+"px)";this._style[cssPrefix+"transform"]=this._transform;}};WheelItemBase=__decorate([core.Directive({selector:"[mbsc-whi-b]"})],WheelItemBase);return WheelItemBase}(BaseComponent);var MbscWheel=function(_super){__extends(MbscWheel,_super);function MbscWheel(){return _super!==null&&_super.apply(this,arguments)||this}MbscWheel.prototype._getItemKey=function(index,item){return item.key};__decorate([core.Input(),__metadata("design:type",Number)],MbscWheel.prototype,"activeIndex",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscWheel.prototype,"disabled",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscWheel.prototype,"display",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscWheel.prototype,"itemHeight",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscWheel.prototype,"itemTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscWheel.prototype,"maxIndex",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscWheel.prototype,"maxWheelWidth",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscWheel.prototype,"minIndex",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscWheel.prototype,"minWheelWidth",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWheel.prototype,"multiple",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscWheel.prototype,"rows",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWheel.prototype,"scroll3d",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscWheel.prototype,"selectedIndex",void 0);__decorate([core.Input(),__metadata("design:type",Array)],MbscWheel.prototype,"selectedValues",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWheel.prototype,"selectOnScroll",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWheel.prototype,"touchUi",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscWheel.prototype,"wheel",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscWheel.prototype,"wheelWidth",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscWheel.prototype,"onGestureEnd",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscWheel.prototype,"onGestureStart",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscWheel.prototype,"onIndexChange",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscWheel.prototype,"onActiveChange",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscWheel.prototype,"onSet",void 0);MbscWheel=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(keydown)":"_onKeyDown($event)","[attr.aria-multiselectable]":'multiple ? "true" : undefined',"[class]":'"mbsc-scroller-wheel-wrapper mbsc-scroller-wheel-wrapper-" + wheel._key + " " + (wheel.cssClass || "") + (scroll3d ? " mbsc-scroller-wheel-wrapper-3d" : "") + _theme + _rtl',"[style.maxWidth.px]":"_wheelStyle.maxWidth","[style.minWidth.px]":"_wheelStyle.minWidth","[style.width.px]":"_wheelStyle.width",role:"listbox"},selector:"mbsc-wheel",template:'\n    <mbsc-scrollview-base [class]="\'mbsc-scroller-wheel\' + (scroll3d ? \' mbsc-scroller-wheel-3d\' : \'\') + _theme" #scrollview\n      [batchSize3d]="_batchSize3d"\n      [innerClass]="\'mbsc-scroller-wheel-cont mbsc-scroller-wheel-cont-\' + display +\n        (scroll3d ? \' mbsc-scroller-wheel-cont-3d\' : \'\') +\n        (multiple ? \' mbsc-scroller-wheel-multi\' : \'\') + _theme"\n      [innerStyles]="_innerStyle"\n      [items]="_items"\n      [itemSize]="itemHeight"\n      [itemNr]="_itemNr"\n      [margin]="true"\n      [maxIndex]="maxIndex"\n      [minIndex]="minIndex"\n      [offset]="wheel._offset"\n      [onIndexChange]="_onIndexChange"\n      [rtl]="rtl"\n      [scroll3d]="scroll3d"\n      [scrollBar]="!_touchUi"\n      [selectedIndex]="selectedIndex"\n      [snap]="true"\n      [spaceAround]="wheel.spaceAround"\n      [style.height.px]="_style.height"\n      [visibleSize]="rows"\n    >\n      <mbsc-wheel-item *ngFor="let item of scrollview.visibleItems; trackBy: _getItemKey"\n        [active]="_isActive(item, _getText(item.data), false)"\n        [angle3d]="_angle3d"\n        [data]="item.data"\n        [disabled]="_isDisabled(item.data)"\n        [height]="itemHeight"\n        [is3d]="false"\n        [isGroup]="item.data && item.data.isGroup"\n        [index]="item.key"\n        [itemTemplate]="itemTemplate"\n        [multiple]="multiple"\n        [offset]="scrollview._offset"\n        [checkmark]="wheel.checkmark"\n        [rows]="rows"\n        [rtl]="rtl"\n        [scroll3d]="scroll3d"\n        [selected]="_isSelected(item)"\n        [text]="_getText(item.data)"\n        [theme]="theme"\n        [onClick]="_onItemClick">\n      </mbsc-wheel-item>\n      <ng-container content-3d>\n        <mbsc-wheel-item *ngFor="let item of scrollview.visible3dItems; trackBy: _getItemKey"\n          [active]="_isActive(item, _getText(item.data), true)"\n          [angle3d]="_angle3d"\n          [data]="item.data"\n          [disabled]="_isDisabled(item.data)"\n          [height]="itemHeight"\n          [is3d]="true"\n          [isGroup]="item.data && item.data.isGroup"\n          [index]="item.key"\n          [itemTemplate]="itemTemplate"\n          [multiple]="multiple"\n          [offset]="scrollview._offset"\n          [checkmark]="wheel.checkmark"\n          [rows]="rows"\n          [rtl]="rtl"\n          [scroll3d]="scroll3d"\n          [selected]="_isSelected(item)"\n          [text]="_getText(item.data)"\n          [theme]="theme"\n          [onClick]="_onItemClick">\n        </mbsc-wheel-item>\n      </ng-container>\n    </mbsc-scrollview-base>\n  '})],MbscWheel);return MbscWheel}(WheelBase);var MbscWheelItem=function(_super){__extends(MbscWheelItem,_super);function MbscWheelItem(){return _super!==null&&_super.apply(this,arguments)||this}MbscWheelItem.prototype._render=function(s,state){_super.prototype._render.call(this,s,state);this._transform=this._sanitizer.bypassSecurityTrustStyle(this._transform);};__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWheelItem.prototype,"active",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscWheelItem.prototype,"angle3d",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscWheelItem.prototype,"data",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWheelItem.prototype,"disabled",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscWheelItem.prototype,"height",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWheelItem.prototype,"is3d",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWheelItem.prototype,"isGroup",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscWheelItem.prototype,"index",void 0);__decorate([core.Input(),__metadata("design:type",core.TemplateRef)],MbscWheelItem.prototype,"itemTemplate",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWheelItem.prototype,"multiple",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscWheelItem.prototype,"offset",void 0);__decorate([core.Input(),__metadata("design:type",Number)],MbscWheelItem.prototype,"rows",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWheelItem.prototype,"scroll3d",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWheelItem.prototype,"selected",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscWheelItem.prototype,"text",void 0);__decorate([core.Input(),__metadata("design:type",Function)],MbscWheelItem.prototype,"onClick",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscWheelItem.prototype,"checkmark",void 0);MbscWheelItem=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"(click)":"_onClick()","[attr.aria-disabled]":'disabled ? "true" : undefined',"[attr.aria-hidden]":'text === undefined || is3d ? "true" : undefined',"[attr.aria-selected]":'selected ? "true" : undefined',"[attr.tabindex]":"active ? 0 : text === undefined || is3d ? undefined : -1","[class]":"_cssClass","[style.height.px]":"height","[style.lineHeight.px]":"height","[style.transform]":"_transform",role:"option"},selector:"mbsc-wheel-item",template:'\x3c!-- TRIAL --\x3e<span *ngIf="checkmark" [class]="_checkmarkClass"></span>\n  <div *ngIf="itemTemplate && data">\n    <ng-template [ngTemplateOutlet]="itemTemplate" [ngTemplateOutletContext]="{ $implicit: data }"></ng-template>\n  </div>\n  <ng-container *ngIf="!itemTemplate || !data">{{text}}</ng-container>'})],MbscWheelItem);return MbscWheelItem}(WheelItemBase);var MbscScrollerModule=function(){function MbscScrollerModule(){}MbscScrollerModule=__decorate([core.NgModule({declarations:[MbscScroller,MbscWheelItem,MbscWheel,ScrollerBase,WheelBase,WheelItemBase],entryComponents:[MbscScroller],exports:[MbscScroller],imports:[common.CommonModule,MbscInputModule,MbscPickerModule,MbscPopupModule,MbscScrollviewBaseModule]})],MbscScrollerModule);return MbscScrollerModule}();var MbscDatetimeModule=function(){function MbscDatetimeModule(){}MbscDatetimeModule=__decorate([core.NgModule({declarations:[DatetimeBase,MbscDate,MbscDateBase,MbscDatetime,MbscTime],entryComponents:[MbscDate,MbscDatetime,MbscTime],exports:[MbscDate,MbscDatetime,MbscTime],imports:[common.CommonModule,forms.FormsModule,MbscScrollerModule]})],MbscDatetimeModule);return MbscDatetimeModule}();var radios={};function subscribeRadio(name,handler){if(!radios[name]){radios[name]={change:new Observable,selectedIndex:-1};}return radios[name].change.subscribe(handler)}function unsubscribeRadio(name,key){var data=radios[name];if(data){data.change.unsubscribe(key);if(!data.change.nr){delete radios[name];}}}function setRadio(name,value,selectedIndex){var data=radios[name];if(data){if(selectedIndex!==UNDEFINED){data.selectedIndex=selectedIndex;}if(value!==UNDEFINED){data.value=value;}data.change.next(data.value);}}function getSelectedIndex(name){return radios[name]&&radios[name].selectedIndex}function setSelectedIndex(name,selectedIndex){if(radios[name]){radios[name].selectedIndex=selectedIndex;}}var guid$2=1;var SegmentedGroupBase=function(_super){__extends(SegmentedGroupBase,_super);function SegmentedGroupBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._id="mbsc-segmented-group"+guid$2++;_this._onChange=function(ev,val){var s=_this.s;var value=_this.value;if(s.select==="multiple"){if(value!==UNDEFINED){value=value||[];var index=value.indexOf(val);if(index!==-1){value.splice(index,1);}else {value.push(val);}_this.value=value.slice();}}else {_this.value=val;}if(s.onChange){s.onChange(ev);}};return _this}SegmentedGroupBase.prototype._setupDrag=function(){var _this=this;var disabledArray=[];var widthArray=[];var wrapperWidth;var wrapperLeft;var isDragging;var selectedIndex;var oldIndex;var name;this._unlisten=gestureListener(this._el,{onEnd:function(){if(isDragging&&selectedIndex!==oldIndex&&!disabledArray[selectedIndex]){var inputElement=_this._el.querySelectorAll(".mbsc-segmented-input")[selectedIndex];inputElement.click();}isDragging=false;_this.setState({dragging:false});},onMove:function(ev){if(isDragging){var relativeLeft=Math.min(Math.max(ev.endX-wrapperLeft,0),wrapperWidth);var newIndex=0;var beforeSum=widthArray[0];while(relativeLeft>beforeSum&&widthArray.length>newIndex+1){newIndex++;beforeSum+=widthArray[newIndex];}newIndex=_this.s.rtl?widthArray.length-1-newIndex:newIndex;if(newIndex!==selectedIndex&&!disabledArray[newIndex]){selectedIndex=newIndex;setRadio(name,UNDEFINED,selectedIndex);}}},onStart:function(ev){var item=closest(ev.domEvent.target,".mbsc-segmented-item",_this._el);if(!item){return}var input=item.querySelector(".mbsc-segmented-input");var classList=input.classList;if(classList.contains("mbsc-selected")){disabledArray=[];forEach(_this._el.querySelectorAll(".mbsc-segmented-button"),(function(button){disabledArray.push(button.classList.contains("mbsc-disabled"));}));widthArray=[];forEach(_this._el.querySelectorAll(".mbsc-segmented-item"),(function(el){widthArray.push(el.clientWidth);}));var padding=15;wrapperWidth=_this._el.clientWidth-padding*2;wrapperLeft=getOffset(_this._el).left+padding;name=input.name;selectedIndex=getSelectedIndex(name);oldIndex=selectedIndex;if(widthArray.length&&input.type==="radio"){isDragging=true;_this.setState({dragging:true});}}}});};SegmentedGroupBase.prototype._cleanupDrag=function(){if(this._unlisten){this._unlisten();this._unlisten=null;}};SegmentedGroupBase.prototype._render=function(s){this._name=s.name===UNDEFINED?this._id:s.name;this._groupClass="mbsc-segmented"+this._theme+this._rtl+(s.color?" mbsc-segmented-"+s.color:"")+(this.state.dragging?" mbsc-segmented-dragging":"");};SegmentedGroupBase.prototype._updated=function(){if(this.s.drag&&this.s.select!=="multiple"){if(!this._unlisten){this._setupDrag();}}else {this._cleanupDrag();}};SegmentedGroupBase.prototype._destroy=function(){this._cleanupDrag();};SegmentedGroupBase.defaults={select:"single"};SegmentedGroupBase._name="SegmentedGroup";SegmentedGroupBase=__decorate([core.Directive({selector:"[mbsc-sgr-b]"})],SegmentedGroupBase);return SegmentedGroupBase}(BaseComponent);var guid$3=1;var SegmentedBase=function(_super){__extends(SegmentedBase,_super);function SegmentedBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this._id="mbsc-segmented-"+guid$3++;_this._onChange=function(ev){var s=_this.s;var checked=ev.target.checked;if(checked===_this._checked){return}_this._change(checked);if(_this._onGroupChange){_this._onGroupChange(ev,_this._value);}_this._toggle(checked);if(s.onChange){s.onChange(ev);}};_this._onValueChange=function(value){var s=_this.s;var selected=_this._isMultiple?value&&value.indexOf(_this._value)!==-1:value===_this._value;if(s.checked===UNDEFINED&&selected!==_this.state.selected){_this.setState({selected:selected});}else {_this.forceUpdate();}_this._change(selected);};return _this}SegmentedBase.prototype._change=function(checked){};SegmentedBase.prototype._toggle=function(checked){if(this.s.checked===UNDEFINED){this.setState({selected:checked});}};SegmentedBase.prototype._groupOptions=function(_a){var _this=this;var color=_a.color,disabled=_a.disabled,name=_a.name,onChange=_a.onChange,select=_a.select,value=_a.value;var s=this.s;var state=this.state;var prevChecked=this._checked;var checked=s.checked!==UNDEFINED?emptyOrTrue(s.checked):state.selected===UNDEFINED?emptyOrTrue(s.defaultChecked):state.selected;this._value=s.value===UNDEFINED?this._id:s.value;this._onGroupChange=onChange;this._isMultiple=(select||s.select)==="multiple";this._name=name===UNDEFINED?s.name:name;this._disabled=disabled===UNDEFINED?s.disabled===UNDEFINED?state.disabled:emptyOrTrue(s.disabled):emptyOrTrue(disabled);this._color=color===UNDEFINED?s.color:color;this._checked=value===UNDEFINED?checked:this._isMultiple?value&&value.indexOf(this._value)!==-1:value===this._value;if(this._name&&!this._unsubscribe){this._unsubscribe=subscribeRadio(this._name,this._onValueChange);}if(!this._isMultiple&&!prevChecked&&this._checked){setTimeout((function(){if(_this._checked){setRadio(_this._name,_this._value,_this._index);}}));}this._selectedIndex=getSelectedIndex(this._name);this._cssClass="mbsc-segmented-item "+this._className+this._theme+this._rtl+(this._checked?" mbsc-segmented-item-checked":"")+(state.hasFocus?" mbsc-focus":"")+(this._index===this._selectedIndex||this._index===UNDEFINED&&this._checked||this._isMultiple&&this._checked?" mbsc-segmented-item-selected":"");};SegmentedBase.prototype._mounted=function(){var _this=this;listen(this._el,CLICK,this._onChange);this._unlisten=gestureListener(this._el,{onBlur:function(){_this.setState({hasFocus:false});},onFocus:function(){_this.setState({hasFocus:true});}});};SegmentedBase.prototype._updated=function(){if(!this._isMultiple){var cont=closest(this._el,".mbsc-segmented");var index=-1;var selectedIndex=-1;if(cont){var items=cont.querySelectorAll('.mbsc-segmented-input[name="'+this._name+'"]');for(var i=0;i<items.length;i++){if(items[i]===this._el){index=i;}if(items[i].checked){selectedIndex=i;}}}if(this._index!==index&&selectedIndex!==-1){setSelectedIndex(this._name,selectedIndex);}if(this._selectedIndex!==-1){this._box.style.transform="translateX("+(this.s.rtl?-1:1)*(this._selectedIndex-index)*100+"%)";this._animate=true;}if(index!==-1){this._index=index;}}};SegmentedBase.prototype._destroy=function(){unsubscribeRadio(this._name,this._unsubscribe);unlisten(this._el,CLICK,this._onChange);this._unlisten();};SegmentedBase.defaults={select:"single"};SegmentedBase._name="Segmented";SegmentedBase=__decorate([core.Directive({selector:"[mbsc-seg-b]"})],SegmentedBase);return SegmentedBase}(BaseComponent);var MbscRadioService=function(){function MbscRadioService(){}MbscRadioService=__decorate([core.Injectable()],MbscRadioService);return MbscRadioService}();var MbscSegmentedGroup=function(_super){__extends(MbscSegmentedGroup,_super);function MbscSegmentedGroup(){return _super!==null&&_super.apply(this,arguments)||this}MbscSegmentedGroup.prototype._onValueChange=function(value){this._radioService.value=value;setRadio(this._radioService.name,value);};MbscSegmentedGroup.prototype._ctor=function(){this._radioService=this._injector.get(MbscRadioService);};MbscSegmentedGroup.prototype._render=function(s){_super.prototype._render.call(this,s);var rs=this._radioService;rs.color=s.color;rs.disabled=s.disabled;rs.name=this._name;rs.select=s.select;rs.value=this.value;rs.onChange=this._onChange;};__decorate([core.Input(),__metadata("design:type",String)],MbscSegmentedGroup.prototype,"color",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmentedGroup.prototype,"disabled",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmentedGroup.prototype,"name",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmentedGroup.prototype,"select",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscSegmentedGroup.prototype,"value",void 0);MbscSegmentedGroup=__decorate([FormControl,core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_groupClass"},providers:[MbscRadioService],selector:"mbsc-segmented-group",template:"<ng-content></ng-content>"})],MbscSegmentedGroup);return MbscSegmentedGroup}(SegmentedGroupBase);var MbscSegmented=function(_super){__extends(MbscSegmented,_super);function MbscSegmented(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.checkedChange=new core.EventEmitter;return _this}Object.defineProperty(MbscSegmented.prototype,"checked",{get:function(){return this._check},set:function(val){var rs=this._radioService;if(this._check!==val){if(this._isMultiple){this._onFormChange(val);}else if(val){if(rs){rs.value=this.value;}this._onFormChange(this.value);}this.props.checked=val;this._check=val;this.setState({selected:val});}},enumerable:true,configurable:true});MbscSegmented.prototype.registerOnChange=function(fn){this._onFormChange=fn;};MbscSegmented.prototype.registerOnTouched=function(fn){this._onFormTouch=fn;};MbscSegmented.prototype.setDisabledState=function(disabled){this.setState({disabled:disabled});};MbscSegmented.prototype.writeValue=function(val){this.checked=this._isMultiple?val:this.value===val;};MbscSegmented.prototype._ctor=function(){var rs;this._radioService=rs=this._injector.get(MbscRadioService,null);var select=rs&&rs.select||this.select;this._isMultiple=select==="multiple";};MbscSegmented.prototype._change=function(checked){this.checked=checked;};MbscSegmented.prototype._render=function(s,state){this._groupOptions(this._radioService||{});_super.prototype._render.call(this,s,state);};MbscSegmented.prototype._mounted=function(){this._el=this.vInput.nativeElement;this._box=this.vBox.nativeElement;_super.prototype._mounted.call(this);};__decorate([core.ViewChild("input",{static:false}),__metadata("design:type",core.ElementRef)],MbscSegmented.prototype,"vInput",void 0);__decorate([core.ViewChild("box",{static:false}),__metadata("design:type",core.ElementRef)],MbscSegmented.prototype,"vBox",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmented.prototype,"color",void 0);__decorate([core.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],MbscSegmented.prototype,"checked",null);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscSegmented.prototype,"disabled",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmented.prototype,"endIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmented.prototype,"endIconSrc",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmented.prototype,"endIconSvg",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmented.prototype,"icon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmented.prototype,"iconSvg",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmented.prototype,"iconSrc",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmented.prototype,"name",void 0);__decorate([core.Input(),__metadata("design:type",Boolean)],MbscSegmented.prototype,"ripple",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmented.prototype,"startIcon",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmented.prototype,"startIconSrc",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmented.prototype,"startIconSvg",void 0);__decorate([core.Input(),__metadata("design:type",String)],MbscSegmented.prototype,"select",void 0);__decorate([core.Input(),__metadata("design:type",Object)],MbscSegmented.prototype,"value",void 0);__decorate([core.Output(),__metadata("design:type",Object)],MbscSegmented.prototype,"checkedChange",void 0);MbscSegmented=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,host:{"[class]":"_cssClass"},selector:"mbsc-segmented",template:'\n    <label class="mbsc-segmented-label">\n      <div #box [class]="\'mbsc-segmented-selectbox\' + _theme +\n        (_animate ? \' mbsc-segmented-selectbox-animate\' : \'\') +\n        (_checked ? \' mbsc-selected\': \'\')">\n        <div [class]="\'mbsc-segmented-selectbox-inner\' +\n          (_index === _selectedIndex || _checked ? \' mbsc-segmented-selectbox-inner-visible\' : \'\') +\n          (_checked ? \' mbsc-selected\' : \'\') + _theme">\n        </div>\n      </div>\n      <input #input\n        [class]="\'mbsc-segmented-input mbsc-reset\' + _theme + (_checked ? \' mbsc-selected\' : \'\')"\n        [checked]="_checked"\n        [disabled]="_disabled"\n        [name]="_isMultiple ? (s.name === undefined ? \'\' : s.name) : _name"\n        [type]="_isMultiple ? \'checkbox\' : \'radio\'"\n        [value]="_value" />\n      <mbsc-button\n        [class]="\'mbsc-segmented-button\' + (_checked ? \' mbsc-selected\' : \'\') + (state.hasFocus ? \' mbsc-focus\' : \'\')"\n        [color]="_color"\n        [disabled]="_disabled"\n        [endIcon]="s.endIcon"\n        [endIconSrc]="s.endIconSrc"\n        [endIconSvg]="s.endIconSvg"\n        [icon]="s.icon"\n        [iconSrc]="s.iconSrc"\n        [iconSvg]="s.iconSvg"\n        [ripple]="s.ripple"\n        [rtl]="s.rtl"\n        [startIcon]="s.startIcon"\n        [startIconSrc]="s.startIconSrc"\n        [startIconSvg]="s.startIconSvg"\n        [tabIndex]="-1"\n        [theme]="s.theme"\n        [themeVariant]="s.themeVariant">\n        <ng-content></ng-content>\n      </mbsc-button>\n    </label>\n  '})],MbscSegmented);return MbscSegmented}(SegmentedBase);var MbscSegmentedModule=function(){function MbscSegmentedModule(){}MbscSegmentedModule=__decorate([core.NgModule({declarations:[SegmentedBase,SegmentedGroupBase,MbscSegmented,MbscSegmentedGroup],exports:[MbscSegmented,MbscSegmentedGroup],imports:[common.CommonModule,MbscButtonModule]})],MbscSegmentedModule);return MbscSegmentedModule}();var MbscTimegridModule=function(){function MbscTimegridModule(){}MbscTimegridModule=__decorate([core.NgModule({declarations:[MbscTimeBox,TimegridBase,MbscTimegrid],entryComponents:[MbscTimegrid],exports:[MbscTimegrid],imports:[common.CommonModule]})],MbscTimegridModule);return MbscTimegridModule}();var MbscDatepickerModule=function(){function MbscDatepickerModule(){}MbscDatepickerModule=__decorate([core.NgModule({declarations:[DatepickerBase,MbscDatepicker,MbscDatepickerBase,MbscDatepickerDirective,MbscTplDirective],entryComponents:[MbscDatepicker],exports:[MbscDatepicker,MbscDatepickerDirective,MbscCalendarHeaderModule],imports:[common.CommonModule,forms.FormsModule,MbscCalendarModule,MbscDatetimeModule,MbscIconModule,MbscInputModule,MbscPickerModule,MbscPopupModule,MbscSegmentedModule,MbscTimegridModule]})],MbscDatepickerModule);return MbscDatepickerModule}();var MbscOptionsProviderComponent=function(){function MbscOptionsProviderComponent(_opt){this._opt=_opt;}MbscOptionsProviderComponent.prototype.ngOnChanges=function(changes){if(changes.options){this._opt.setOptions(changes.options.currentValue);}};__decorate([core.Input(),__metadata("design:type",Object)],MbscOptionsProviderComponent.prototype,"options",void 0);MbscOptionsProviderComponent=__decorate([core.Component({changeDetection:core.ChangeDetectionStrategy.OnPush,encapsulation:core.ViewEncapsulation.None,providers:[{provide:MbscOptionsService,useClass:MbscOptionsService}],selector:"mbsc-options-provider",template:"<ng-content></ng-content>"}),__metadata("design:paramtypes",[MbscOptionsService])],MbscOptionsProviderComponent);return MbscOptionsProviderComponent}();var MbscOptionsModule=function(){function MbscOptionsModule(){}MbscOptionsModule=__decorate([core.NgModule({declarations:[MbscOptionsProviderComponent],exports:[MbscOptionsProviderComponent]})],MbscOptionsModule);return MbscOptionsModule}();var MbscBaseModule=function(){function MbscBaseModule(){}MbscBaseModule=__decorate([core.NgModule({declarations:[Base,BaseComponent]})],MbscBaseModule);return MbscBaseModule}();var MbscModule=function(){function MbscModule(){}MbscModule=__decorate([core.NgModule({exports:[MbscBaseModule,MbscIconModule,MbscOptionsModule,MbscEventcalendarModule,MbscDatepickerModule],imports:[MbscBaseModule,MbscIconModule,MbscOptionsModule,MbscEventcalendarModule,MbscDatepickerModule]})],MbscModule);return MbscModule}();

exports.MBSC_OPTIONS = MBSC_OPTIONS;
exports.MbscDatepicker = MbscDatepicker;
exports.MbscDatepickerModule = MbscDatepickerModule;
exports.MbscEventcalendar = MbscEventcalendar;
exports.MbscEventcalendarModule = MbscEventcalendarModule;
exports.MbscModule = MbscModule;
exports.MbscOptionsModule = MbscOptionsModule;
exports.MbscOptionsService = MbscOptionsService;
exports.autoDetect = autoDetect;
exports.createCustomTheme = createCustomTheme;
exports.formatDate = formatDate;
exports.getAutoTheme = getAutoTheme;
exports.getJson = getJson;
exports.globalChanges = globalChanges;
exports.hijriCalendar = hijriCalendar;
exports.jalaliCalendar = jalaliCalendar;
exports.locale = locale;
exports.localeEn = localeEn;
exports.luxonTimezone = luxonTimezone;
exports.momentTimezone = momentTimezone;
exports.options = options;
exports.parseDate = parseDate;
exports.platform = platform$1;
exports.setOptions = setOptions;
exports.themes = themes;
exports.util = util;
exports.ɵa = MbscEventListService;
exports.ɵb = MbscEventListDayDirective;
exports.ɵba = WeekDayBase;
exports.ɵbb = MbscTimeIndicator;
exports.ɵbc = TimeIndicatorBase;
exports.ɵbd = MbscCalendarHeaderModule;
exports.ɵbe = CalendarSubscriber;
exports.ɵbf = MbscCalendarPrev;
exports.ɵbg = MbscCalendarNext;
exports.ɵbh = MbscCalendarToday;
exports.ɵbi = MbscCalendarNav;
exports.ɵbj = MbscButton;
exports.ɵbk = MbscButtonModule;
exports.ɵbl = ButtonBase;
exports.ɵbm = MbscCustomIcon;
exports.ɵbn = MbscCustomStartIcon;
exports.ɵbo = MbscCustomEndIcon;
exports.ɵbp = MbscIcon;
exports.ɵbq = MbscIconModule;
exports.ɵbr = IconBase;
exports.ɵbs = DraggableDirective;
exports.ɵbt = MbscDraggableModule;
exports.ɵbu = DraggableBase;
exports.ɵbv = MbscCalendarViewModule;
exports.ɵbw = CalendarDayBase;
exports.ɵbx = CalendarLabelBase;
exports.ɵby = CalendarViewBase;
exports.ɵbz = MbscCalendarDay;
exports.ɵc = MbscEventListItem;
exports.ɵca = MbscCalendarLabel;
exports.ɵcb = MbscCalendarView;
exports.ɵcc = MbscCalendarWeekDays;
exports.ɵcd = MbscMonthView;
exports.ɵce = MonthViewBase;
exports.ɵcf = MbscMultiYearView;
exports.ɵcg = MbscYearView;
exports.ɵch = MbscPopup;
exports.ɵci = MbscPopupModule;
exports.ɵcj = PopupBase;
exports.ɵck = MbscPrompt;
exports.ɵcl = MbscSnackbar;
exports.ɵcm = MbscDropdown;
exports.ɵcn = MbscInput;
exports.ɵco = MbscTextarea;
exports.ɵcp = MbscInputModule;
exports.ɵcq = InputBase;
exports.ɵcr = FormControl;
exports.ɵcs = MbscScrollviewBaseModule;
exports.ɵct = MbscScrollviewBase;
exports.ɵcu = ScrollviewBase;
exports.ɵcv = MbscList;
exports.ɵcw = MbscListHeader;
exports.ɵcx = MbscListModule;
exports.ɵcy = ListBase;
exports.ɵcz = ListHeaderBase;
exports.ɵd = EventcalendarBase;
exports.ɵda = UNDEFINED;
exports.ɵdb = PickerBase;
exports.ɵdc = getPickerTemplate;
exports.ɵdd = MbscCalendar;
exports.ɵde = MbscCalendarModule;
exports.ɵdf = CalendarBase;
exports.ɵdg = MbscDateBase;
exports.ɵdh = MbscDate;
exports.ɵdi = MbscDatetime;
exports.ɵdj = MbscTime;
exports.ɵdk = MbscDatetimeModule;
exports.ɵdl = DatetimeBase;
exports.ɵdm = MbscScroller;
exports.ɵdn = MbscScrollerModule;
exports.ɵdo = ScrollerBase;
exports.ɵdp = MbscWheelItem;
exports.ɵdq = WheelItemBase;
exports.ɵdr = MbscWheel;
exports.ɵds = WheelBase;
exports.ɵdt = MbscPickerModule;
exports.ɵdu = MbscSegmented;
exports.ɵdv = MbscSegmentedGroup;
exports.ɵdw = MbscSegmentedModule;
exports.ɵdx = SegmentedBase;
exports.ɵdy = SegmentedGroupBase;
exports.ɵdz = MbscRadioService;
exports.ɵe = MbscTplDirective;
exports.ɵea = MbscTimeBox;
exports.ɵeb = MbscTimegrid;
exports.ɵec = MbscTimegridModule;
exports.ɵed = TimegridBase;
exports.ɵee = MbscOptionsProviderComponent;
exports.ɵef = MbscBaseModule;
exports.ɵf = MbscDatepickerBase;
exports.ɵg = MbscDatepickerDirective;
exports.ɵh = DatepickerBase;
exports.ɵi = Observable;
exports.ɵm = BaseComponent;
exports.ɵn = Base;
exports.ɵo = MbscInstanceService;
exports.ɵp = InstanceServiceBase;
exports.ɵq = MbscListItem;
exports.ɵr = ListItemBase;
exports.ɵs = MbscScheduleEvent;
exports.ɵt = ScheduleEventBase;
exports.ɵu = MbscScheduler;
exports.ɵv = SchedulerBase;
exports.ɵw = STBase;
exports.ɵx = MbscTimeline;
exports.ɵy = TimelineBase;
exports.ɵz = MbscWeekDay;

Object.defineProperty(exports, '__esModule', { value: true });

})));
